!function(e){function t(t){for(var n,i,s=t[0],l=t[1],c=t[2],p=0,d=[];p<s.length;p++)i=s[p],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(u&&u(t);d.length;)d.shift()();return o.push.apply(o,c||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,s=1;s<r.length;s++){var l=r[s];0!==a[l]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={4:0},o=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],r=a[e];if(0!==r)if(r)t.push(r[2]);else{var n=new Promise((function(t,n){r=a[e]=[t,n]}));t.push(r[2]=n);var o,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=function(e){return i.p+""+({}[e]||e)+"."+{0:"907bef1a",1:"85090e8a",2:"69069b2a",3:"997e2e4e",16:"4451d162",17:"6172f03d",18:"edec1dc5",19:"6ac0bc03",20:"ad390d43",21:"e3f30d10"}[e]+".iframe.bundle.js"}(e);var l=new Error;o=function(t){s.onerror=s.onload=null,clearTimeout(c);var r=a[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+o+")",l.name="ChunkLoadError",l.type=n,l.request=o,r[1](l)}a[e]=void 0}};var c=setTimeout((function(){o({type:"timeout",target:s})}),12e4);s.onerror=s.onload=o,document.head.appendChild(s)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;o.push([633,6,7,15,12,5,14,11,9,10,13,8]),r()}({1e3:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return q}));var n=r(0),a=r.n(n),o=r(3),i=r.n(o),s=r(34),l=r(575),c=r(113),u=r(215),p=r(214),d=r(570),f=r.n(d);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function v(e){var t=h(Object(n.useState)(void 0),2),r=t[0],a=t[1],o=h(Object(n.useState)(e.url),2),i=o[0],s=o[1],l=h(Object(n.useState)(""),2),c=l[0],u=l[1],p=h(Object(n.useState)(void 0),2),d=p[0],m=p[1],g=h(Object(n.useState)(void 0),2),b=g[0],v=g[1],O=function(){a(void 0),m(void 0),u("")};return Object(n.useEffect)((function(){var t;if(O(),v(void 0),i){var r,n=i;-1!==i.indexOf("?")&&(n=(r=i.split("?"))[0]);var a=new URLSearchParams(null===(t=r)||void 0===t?void 0:t[1]),o=y(y({},Object.fromEntries(a)),e.urlParameters),s=new URLSearchParams(o),l=decodeURIComponent(s.toString())+"".replace(/%2F/g,"/").replace(/%3A/g,":");fetch(n+"?"+l).then((function(e){if(e.ok)return e.text();throw Error(e.statusText+" ("+e.status+" - "+e.type+")")})).then((function(e){m(new f.a(e).toJSON())})).catch((function(e){O(),console.log(e),v(e.message)}))}}),[i,e.urlParameters]),Object(n.useEffect)((function(){var e,t,r,n,o,i,s,l,c,p,f,m,y,g;null!=d&&d.Service&&(u(null===(e=d.Capability)||void 0===e||null===(t=e.Request)||void 0===t||null===(r=t.GetMap)||void 0===r||null===(n=r.DCPType)||void 0===n||null===(o=n[0])||void 0===o||null===(i=o.HTTP)||void 0===i||null===(s=i.Get)||void 0===s?void 0:s.OnlineResource),a(null===(l=d.Capability)||void 0===l||null===(c=l.Request)||void 0===c||null===(p=c.GetFeatureInfo)||void 0===p||null===(f=p.DCPType)||void 0===f||null===(m=f[0])||void 0===m||null===(y=m.HTTP)||void 0===y||null===(g=y.Get)||void 0===g?void 0:g.OnlineResource))}),[d]),{capabilities:d,getFeatureInfoUrl:r,wmsUrl:c,error:b,setUrl:s}}v.defaultProps={url:"",urlParameters:{SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"getCapabilities"}};var O=v,j=r(279),I=r.n(j),w=r(280),S=r.n(w),x=r(1031),C=r(1029),M=r(1032),E=r(290);function P(e){return function(e){if(Array.isArray(e))return H(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw a}}return o}(e,t)||_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){if(e){if("string"==typeof e)return H(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?H(e,t):void 0}}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var G=2*Math.PI*6378137/2,N=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{enable:!0,decimal:1},n=e.lng,a=e.lat,o=n*G/180,i=Math.log(Math.tan((90+a)*Math.PI/360))/(Math.PI/180);return i=i*G/180,r.enable&&(o=Number(o.toFixed(r.decimal)),i=Number(i.toFixed(r.decimal))),[o,i]},D=function(e){var t,r,o,i,d,f,m=Object(n.useContext)(s.b),y=O({url:void 0,urlParameters:e.urlParameters}),g=y.capabilities,h=y.error,b=y.setUrl,v=y.getFeatureInfoUrl,j=y.wmsUrl,w=Object(n.useRef)(!1),L=Object(n.useRef)(void 0),R=Object(n.useRef)((e.idPrefix?e.idPrefix:"MlWmsLoader-")+Object(l.a)()),_=k(Object(n.useState)([]),2),H=_[0],G=_[1],D=k(Object(n.useState)(void 0),2),F=D[0],B=D[1],z=k(Object(n.useState)(void 0),2),U=z[0],Z=z[1];Object(n.useEffect)((function(){var e=R.current;return function(){L.current&&(L.current.cleanup(e),L.current=void 0),w.current=!1}}),[]),Object(n.useEffect)((function(){w.current&&b(e.url)}),[e.url]);var W=Object(n.useCallback)((function(t){var r,n,a,o,i;B(void 0),Z(void 0);var s,l=L.current.getBounds(),c=N(l._sw),u=N(l._ne),p={REQUEST:"GetFeatureInfo",BBOX:[c[0],c[1],u[0],u[1]].join(","),SERVICE:"WMS",INFO_FORMAT:-1!==(null==g||null===(r=g.Capability)||void 0===r||null===(n=r.Request)||void 0===n?void 0:n.GetFeatureInfo.Format.indexOf("text/html"))?"text/html":"text/plain",FEATURE_COUNT:"10",LAYERS:H.map((function(e,t){return e.visible&&e.queryable?e.Name:void 0})).filter((function(e){return e})),QUERY_LAYERS:H.map((function(e,t){return e.visible&&e.queryable?e.Name:void 0})).filter((function(e){return e})),WIDTH:L.current._container.clientWidth,HEIGHT:L.current._container.clientHeight,srs:"EPSG:3857",CRS:"EPSG:3857",version:"1.3.0",X:t.point.x,Y:t.point.y,I:t.point.x,J:t.point.y,buffer:"50"},d=v;-1!==(null===(a=d)||void 0===a||null===(o=a.indexOf)||void 0===o?void 0:o.call(a,"?"))&&(d=(s=e.url.split("?"))[0]);var f=new URLSearchParams(null===(i=s)||void 0===i?void 0:i[1]),m=T(T({},Object.fromEntries(f)),p),y=new URLSearchParams(m);fetch(e.url+"?"+y.toString()).then((function(e){if(!e.ok)throw new Error("FeatureInfo could not be fetched");return e.text()})).then((function(e){B(t.lngLat),Z(e)})).catch((function(e){return console.log(e)}))}),[g,v]);return Object(n.useEffect)((function(){if(L.current){var e=W;return L.current.on("click",e,R.current),function(){var t,r;null===(t=L.current)||void 0===t||null===(r=t.off)||void 0===r||r.call(t,"click",e)}}}),[v]),Object(n.useEffect)((function(){var e,t,r,n,a,o,i,s;null!=g&&g.Service&&(-1===(null==g||null===(e=g.Capability)||void 0===e||null===(t=e.Layer)||void 0===t||null===(r=t.SRS)||void 0===r||null===(n=r.indexOf)||void 0===n?void 0:n.call(r,"EPSG:3857"))?console.log("MlWmsLoader ("+g.Service.Title+"): No WGS 84/Pseudo-Mercator support"):(console.log("MlWmsLoader ("+g.Service.Title+"): WGS 84/Pseudo-Mercator supported"),G(null==g||null===(a=g.Capability)||void 0===a||null===(o=a.Layer)||void 0===o?void 0:o.Layer.map((function(e,t){var r,n,a;return 0===t&&((s=e.LatLonBoundingBox)||(s=e.EX_GeographicBoundingBox)),e.visible=!((null==g||null===(r=g.Capability)||void 0===r||null===(n=r.Layer)||void 0===n||null===(a=n.Layer)||void 0===a?void 0:a.length)>2)||t>1,e}))),L.current&&(null===(i=s)||void 0===i?void 0:i.length)>3&&L.current.fitBounds([[s[0],s[1]],[s[2],s[3]]])))}),[g]),Object(n.useEffect)((function(){var t;null!=m&&null!==(t=m.mapExists)&&void 0!==t&&t.call(m,e.mapId)&&!w.current&&(w.current=!0,L.current=m.getMap(e.mapId),console.log("set url "+e.url),b(e.url))}),[m.mapIds,m,e.mapId,e.url]),a.a.createElement(a.a.Fragment,null,h&&a.a.createElement("p",null,h),a.a.createElement("h3",{key:"title"},null==g||null===(t=g.Service)||void 0===t?void 0:t.Title),console.log(R.current),null==g||null===(r=g.Capability)||void 0===r||null===(o=r.Layer)||void 0===o?void 0:o.Layer.map((function(e,t){return a.a.createElement(p.a,A({layerId:"Order-"+R.current+"-"+t,key:R.current+"-"+t},t>0?{insertBeforeLayer:"Order-"+R.current+"-"+(t-1)}:void 0))})),a.a.createElement(x.a,{dense:!0,key:"layers"},j&&(null==H||null===(i=H.map)||void 0===i?void 0:i.call(H,(function(t,r){return null!=t&&t.Name?a.a.createElement(C.a,{key:t.Name+r,secondaryAction:a.a.createElement(E.a,{edge:"end","aria-label":"toggle visibility",onClick:function(){var e=P(H);e[r].visible=!e[r].visible,G(P(e))}},H[r].visible?a.a.createElement(I.a,null):a.a.createElement(S.a,null))},a.a.createElement(M.a,{primary:null==t?void 0:t.Title,secondary:null==t?void 0:t.Abstract}),a.a.createElement(c.a,{key:(null==t?void 0:t.Name)+r,url:j,urlParameters:T(T({},e.wmsUrlParameters),{},{layers:null==t?void 0:t.Name}),visible:H[r].visible,insertBeforeLayer:"Order-"+R.current+"-"+r})):a.a.createElement(a.a.Fragment,null)})))),a.a.createElement("p",{key:"description",style:{fontSize:".7em"}},null==g||null===(d=g.Capability)||void 0===d||null===(f=d.Layer)||void 0===f?void 0:f.Abstract),F&&a.a.createElement(u.a,A({},F,{content:U})))};D.defaultProps={url:"",urlParameters:{SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"getCapabilities"},wmsUrlParameters:{TRANSPARENT:"TRUE"}},D.propTypes={url:i.a.string.isRequired,mapId:i.a.string,urlParameters:i.a.object,wmsUrlParameters:i.a.object,layerUrlParameters:i.a.object};var F=D,B=r(1095),z=r(20),U=r(278);function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function W(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return J(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var X={title:"MapComponents/MlWmsLoader",component:F,argTypes:{url:{},layer:{}},decorators:z.a},q=(t.default=X,function(e){var t=Y(Object(n.useState)(e.url),2),r=t[0],o=t[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement(U.a,{sx:{wordBreak:"break-word"}},a.a.createElement(B.a,{label:"WMS Url",variant:"standard",value:r,onChange:function(e){return o(e.target.value)}}),a.a.createElement(F,V({},e,{url:r}))))}.bind({}));q.parameters={},q.args={url:"https://www.wms.nrw.de/wms/kitas"},q.parameters=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({storySource:{source:'(props) => {\n  const [url, setUrl] = useState(props.url);\n\n  return (\n    <>\n      <Sidebar sx={{ wordBreak: "break-word" }}>\n        <TextField\n          label="WMS Url"\n          variant="standard"\n          value={url}\n          onChange={(ev) => setUrl(ev.target.value)}\n        />\n        <MlWmsLoader {...props} url={url} />\n      </Sidebar>\n    </>\n  );\n}'}},q.parameters)},1005:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"parameters",(function(){return i}));var a=r(1097),o=r(8),i=(r(947),{docs:{inlineStories:!1},actions:{argTypesRegex:"^on[A-Z].*"}});function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.keys(n).forEach((function(e){var t=n[e];switch(e){case"args":case"argTypes":return o.a.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify(t));case"decorators":return t.forEach((function(e){return Object(a.d)(e,!1)}));case"loaders":return t.forEach((function(e){return Object(a.e)(e,!1)}));case"parameters":return Object(a.f)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t),!1);case"argTypesEnhancers":return t.forEach((function(e){return Object(a.b)(e)}));case"argsEnhancers":return t.forEach((function(e){return Object(a.c)(e)}));case"render":return Object(a.g)(t);case"globals":case"globalTypes":var r={};return r[e]=t,Object(a.f)(r,!1);case"__namedExportsOrder":case"decorateStory":case"renderToDOM":return null;default:return console.log(e+" was not supported :( !")}}))},1006:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return d}));var n=r(0),a=r.n(n),o=r(30),i=function(e){var t=Object(o.a)({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=Object(n.useRef)(!1);return Object(n.useEffect)((function(){t.map&&!r.current&&(r.current=!0,t.map.map.setCenter([7.132122000552613,50.716405378037706]))}),[t.map,e.mapId]),a.a.createElement(a.a.Fragment,null)};i.defaultProps={mapId:void 0};var s=i;try{i.displayName="MlComponentTemplate",i.__docgenInfo={description:"Component template",displayName:"MlComponentTemplate",props:{mapId:{defaultValue:{value:"undefined"},description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:'Id of an existing layer in the mapLibre instance to help specify the layer order\nThis layer will be visually beneath the layer with the "insertBeforeLayer" id.',name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlComponentTemplate/MlComponentTemplate.tsx#MlComponentTemplate"]={docgenInfo:i.__docgenInfo,name:"MlComponentTemplate",path:"src/components/MlComponentTemplate/MlComponentTemplate.tsx#MlComponentTemplate"})}catch(e){}var l=r(20);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p={title:"MapComponents/MlComponentTemplate",component:s,argTypes:{},decorators:l.a},d=(t.default=p,function(e){return a.a.createElement(s,null)}.bind({}));d.parameters={},d.args={},d.parameters=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({storySource:{source:"(args) => <MlComponentTemplate />"}},d.parameters)},1007:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return g}));var n=r(0),a=r.n(n),o=r(575),i=r(172);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=function(e){return Object(i.a)({mapId:e.mapId,layerId:e.layerId||"MlFillExtrusionLayer-"+Object(o.a)(),options:{id:"",type:"fill-extrusion",source:e.sourceId||"openmaptiles","source-layer":e.sourceLayer||"building",minzoom:e.minZoom||14,paint:l({},e.paint)},insertBeforeFirstSymbolLayer:!0}),a.a.createElement(a.a.Fragment,null)};u.defaultProps={mapId:void 0,paint:{"fill-extrusion-color":"hsl(196, 61%, 83%)","fill-extrusion-height":{property:"render_height",type:"identity"},"fill-extrusion-base":{property:"render_min_height",type:"identity"},"fill-extrusion-opacity":1}};var p=u;try{u.displayName="MlFillExtrusionLayer",u.__docgenInfo={description:"Adds a fill extrusion layer to the MapLibre instance reference by props.mapId",displayName:"MlFillExtrusionLayer",props:{mapId:{defaultValue:{value:"undefined"},description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:'The layerId of an existing layer this layer should be rendered visually beneath\nhttps://maplibre.org/maplibre-gl-js-docs/api/map/#map#addlayer - see "beforeId" property',name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"Id of the layer that will be added by this component",name:"layerId",required:!1,type:{name:"string | undefined"}},paint:{defaultValue:{value:'{\n    "fill-extrusion-color": "hsl(196, 61%, 83%)",\n    "fill-extrusion-height": {\n      property: "render_height",\n      type: "identity",\n    },\n    "fill-extrusion-base": {\n      property: "render_min_height",\n      type: "identity",\n    },\n    "fill-extrusion-opacity": 1,\n  }'},description:"Paint properties of the config object that is passed to the MapLibreGl.addLayer call. All\navailable properties are documented in the MapLibreGl documentation\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill-extrusion",name:"paint",required:!1,type:{name:"object | undefined"}},sourceId:{defaultValue:null,description:"Source id of a vector tile source containing the geometries to use for this fill-extrusion\nlayer.\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#source-layer",name:"sourceId",required:!1,type:{name:"string | undefined"}},sourceLayer:{defaultValue:null,description:"Layer id from a vector tile source containing the geometries to use for this fill-extrusion\nlayer.\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#source-layer",name:"sourceLayer",required:!1,type:{name:"string | undefined"}},minZoom:{defaultValue:null,description:"This layer will be hidden for zoom levels lower than defined on this property\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#minzoom",name:"minZoom",required:!1,type:{name:"number | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlFillExtrusionLayer/MlFillExtrusionLayer.tsx#MlFillExtrusionLayer"]={docgenInfo:u.__docgenInfo,name:"MlFillExtrusionLayer",path:"src/components/MlFillExtrusionLayer/MlFillExtrusionLayer.tsx#MlFillExtrusionLayer"})}catch(e){}var d=r(20);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y={title:"MapComponents/MlFillExtrusionLayer",component:p,argTypes:{},decorators:d.a},g=(t.default=y,function(e){return a.a.createElement(p,e)}.bind({}));g.parameters={},g.parameters=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({storySource:{source:"(props) => {\n  \n  return (\n    <MlFillExtrusionLayer {...props} />\n);\n  }"}},g.parameters)},1008:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return g}));var n=r(0),a=r.n(n),o=r(30);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=function(e){var t=Object(o.a)({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=Object(n.useRef)(!1),l=Object(n.useRef)(e.imageId||"img_"+(new Date).getTime()),c=Object(n.useRef)(e.layerId||"MlImageMarkerLayer-"+t.componentId);Object(n.useEffect)((function(){if(t.map&&(!t.map||t.map.map.getLayer(c.current))&&e.options){var r;if(e.options.layout)for(r in e.options.layout)t.map.map.setLayoutProperty(c.current,r,e.options.layout[r]);if(e.options.paint)for(r in e.options.paint)t.map.map.setPaintProperty(c.current,r,e.options.paint[r])}}),[e.options,c.current,e.mapId]);var u=Object(n.useCallback)((function(){if(t.map){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:c.current,layout:{}},e.options);r.layout["icon-image"]=l.current,t.map.addLayer(r,e.insertBeforeLayer,t.componentId)}}),[e,t.map]);return Object(n.useEffect)((function(){e.options&&t.map&&!r.current&&(r.current=!0,e.imgSrc&&t.map.map.loadImage(e.imgSrc,(function(e,r){if(e)throw e;t.map&&t.map.addImage(l.current,r,t.componentId)})),u())}),[t.map,u,e]),Object(n.useEffect)((function(){t.map&&(!t.map||t.map.map.getLayer(c.current))&&e.options&&t.map.map.getSource(c.current).setData(e.options.source.data)}),[e.options.source.data,e]),a.a.createElement(a.a.Fragment,null)},c=l;try{l.displayName="MlImageMarkerLayer",l.__docgenInfo={description:"",displayName:"MlImageMarkerLayer",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:'The layerId of an existing layer this layer should be rendered visually beneath\nhttps://maplibre.org/maplibre-gl-js-docs/api/map/#map#addlayer - see "beforeId" property',name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"Id of the layer that will be added by this component to the maplibre-gl instance",name:"layerId",required:!1,type:{name:"string | undefined"}},imageId:{defaultValue:null,description:"Id of the image that will be added by this component to the maplibre-gl instance",name:"imageId",required:!1,type:{name:"string | undefined"}},imgSrc:{defaultValue:null,description:"Path or URL to a supported raster image",name:"imgSrc",required:!1,type:{name:"string | undefined"}},options:{defaultValue:null,description:"Javascript object that is passed the addLayer command as first parameter.",name:"options",required:!1,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlImageMarkerLayer/MlImageMarkerLayer.tsx#MlImageMarkerLayer"]={docgenInfo:l.__docgenInfo,name:"MlImageMarkerLayer",path:"src/components/MlImageMarkerLayer/MlImageMarkerLayer.tsx#MlImageMarkerLayer"})}catch(e){}var u=r(20),p=r(554),d=r.n(p);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y={title:"MapComponents/MlImageMarkerLayer",component:c,argTypes:{},decorators:u.a},g=(t.default=y,function(e){return a.a.createElement(c,{options:{type:"symbol",source:{type:"geojson",data:{type:"Feature",properties:{id:"test"},geometry:{type:"Point",coordinates:[7.0847929969609424,50.73855193187643]}}},layout:{"icon-allow-overlap":!0,"icon-size":.14,"icon-offset":[0,-180]}},imgSrc:d.a})}.bind({}));g.parameters={},g.args={},g.parameters=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({storySource:{source:'(args) => (\n  <MlImageMarkerLayer\n    options={{\n      type: "symbol",\n      source: {\n        type: "geojson",\n        data: {\n          type: "Feature",\n          properties: {\n            id: "test",\n          },\n          geometry: {\n            type: "Point",\n            coordinates: [7.0847929969609424, 50.73855193187643],\n          },\n        },\n      },\n      layout: {\n        "icon-allow-overlap": true,\n        "icon-size": 0.14,\n        "icon-offset": [0, -180],\n      },\n    }}\n    imgSrc={wgMarker}\n  />\n)'}},g.parameters)},1009:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return h}));var n=r(0),a=r.n(n),o=r(277),i=r.n(o),s=(r(978),r(34));function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var u=function(e){var t=Object(n.useContext)(s.b),r=Object(n.useRef)(!1),o=Object(n.useRef)(null),c=l(Object(n.useState)("50"),2),u=c[0],p=c[1],d=Object(n.useRef)("50"),f=l(Object(n.useState)("50"),2),m=f[0],y=f[1],g=Object(n.useRef)("50"),h=Object(n.useMemo)((function(){return e.magnifierRadius||200}),[e.magnifierRadius]),b=Object(n.useCallback)((function(){return!(!e.map1Id||!e.map2Id)&&!(!t.getMap(e.map1Id)||!t.getMap(e.map2Id))}),[e,t]),v=Object(n.useRef)((function(){b()&&O({clientX:d.current,clientY:g.current})}));Object(n.useEffect)((function(){window.addEventListener("resize",v.current);var e=v.current;return function(){window.removeEventListener("resize",e),"function"==typeof o.current&&o.current()}}),[]);var O=Object(n.useCallback)((function(r){if(b()){var n=t.maps[e.map1Id].getCanvas().getBoundingClientRect(),a=r.clientX||(void 0!==r.touches&&void 0!==r.touches[0]?r.touches[0].clientX:0),o=r.clientY||(void 0!==r.touches&&void 0!==r.touches[0]?r.touches[0].clientY:0);a-=n.x,o-=n.y;var i=(a/n.width*100).toFixed(2),s=(o/n.height*100).toFixed(2);d.current===i&&g.current===s||(p(i),d.current=i,y(s),g.current=s,t.maps[e.map2Id].getContainer().style.clipPath="circle(".concat(h,"px at ")+parseFloat(d.current)*n.width/100+"px "+parseFloat(g.current)*n.height/100+"px)")}}),[t,b,e,h]);Object(n.useEffect)((function(){b()&&!r.current&&(r.current=!0,o.current=i()(t.getMap(e.map1Id).map,t.getMap(e.map2Id).map),O({clientX:t.maps[e.map1Id].getCanvas().clientWidth/2,clientY:t.maps[e.map1Id].getCanvas().clientHeight/2}))}),[t.mapIds,t,b,e,O]);var j=function(e){e.touches?(document.addEventListener("touchmove",O),document.addEventListener("touchend",I)):(document.addEventListener("mousemove",O),document.addEventListener("mouseup",w))},I=function e(){document.removeEventListener("touchmove",O),document.removeEventListener("touchend",e)},w=function e(){document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",e)};return a.a.createElement("div",{style:{position:"absolute",left:u+"%",top:m+"%",borderRadius:"50%",width:2*h+1+"px",height:2*h+1+"px",background:"rgba(0,0,0,0)",border:"2px solid #fafafa",boxShadow:"1px 2px 2px rgba(19, 19, 19, .5), inset 1px 1px 1px rgba(19, 19, 19, .2)",cursor:"pointer",zIndex:"110",marginLeft:-1*h-1+"px",marginTop:-1*h-1+"px",textAlign:"center",lineHeight:"91px",fontSize:"2em",color:"#fafafa",userSelect:"none"},onTouchStart:j,onMouseDown:j,onWheel:function(e){var r=new WheelEvent(e.type,e);t.map.getCanvas().dispatchEvent(r)}})};u.defaultProps={magnifierRadius:200};var p=u;try{u.displayName="MlLayerMagnify",u.__docgenInfo={description:'\nHides the MapLibreMap referenced by props.map2Id except for the "magnifier"-circle that reveals\nthe map and can be dragged around on top of the MapLibreMap referenced by props.map1Id',displayName:"MlLayerMagnify",props:{map1Id:{defaultValue:null,description:"Id of the first MapLibre instance",name:"map1Id",required:!0,type:{name:"string"}},map2Id:{defaultValue:null,description:"Id of the second MapLibre instance",name:"map2Id",required:!0,type:{name:"string"}},magnifierRadius:{defaultValue:{value:"200"},description:'Size of the "magnifier"-circle',name:"magnifierRadius",required:!1,type:{name:"number | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlLayerMagnify/MlLayerMagnify.tsx#MlLayerMagnify"]={docgenInfo:u.__docgenInfo,name:"MlLayerMagnify",path:"src/components/MlLayerMagnify/MlLayerMagnify.tsx#MlLayerMagnify"})}catch(e){}var d=r(113),f=r(174);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g={title:"MapComponents/MlLayerMagnify",component:p,argTypes:{},decorators:f.a},h=(t.default=g,function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement(d.a,{url:"https://www.wms.nrw.de/geobasis/wms_nw_uraufnahme",urlParameters:{layers:"nw_uraufnahme_rw"},sourceOptions:{minzoom:13,maxzoom:20},mapId:e.wmsLayerMapId}),a.a.createElement(p,{map1Id:"map_1",map2Id:"map_2",magnifierRadius:e.magnifierRadius}))}.bind({}));h.parameters={},h.args={wmsLayerMapId:"map_2",magnifierRadius:200},h.parameters=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({storySource:{source:'(args) => (\n  <>\n    <MlWmsLayer\n      url="https://www.wms.nrw.de/geobasis/wms_nw_uraufnahme"\n      urlParameters={{\n        layers: "nw_uraufnahme_rw",\n      }}\n      sourceOptions={{\n        minzoom: 13,\n        maxzoom: 20,\n      }}\n      mapId={args.wmsLayerMapId}\n    />\n    <MlLayerMagnify map1Id="map_1" map2Id="map_2" magnifierRadius={args.magnifierRadius} />\n  </>\n)'}},h.parameters)},1010:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return h}));var n=r(0),a=r.n(n),o=r(277),i=r.n(o),s=(r(980),r(34));function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var u=function(e){var t=Object(n.useContext)(s.b),r=Object(n.useRef)(!1),o=l(Object(n.useState)(50),2),c=o[0],u=o[1],p=Object(n.useRef)(0),d=Object(n.useRef)(null),f=Object(n.useCallback)((function(){return!(!e.map1Id||!e.map2Id)&&!(!t.getMap(e.map1Id)||!t.getMap(e.map2Id))}),[t,e.map1Id,e.map2Id]),m=function(){d.current&&d.current()},y=Object(n.useCallback)((function(r){if(f()){var n=t.maps[e.map1Id].getCanvas().getBoundingClientRect(),a=r.clientX||(void 0!==r.touches&&void 0!==r.touches[0]?r.touches[0].clientX:0);a-=n.x;var o=parseFloat((a/n.width*100).toFixed(2));if(console.log(o),p.current!==o){u(o),p.current=o;var i="rect(0, "+p.current*n.width/100+"px, 999em, 0)";t.maps[e.map2Id].getContainer().style.clip=i}}}),[t,f,e.map1Id,e.map2Id]);Object(n.useEffect)((function(){return m}),[]),Object(n.useEffect)((function(){f()&&!r.current&&(r.current=!0,d.current=i()(t.getMap(e.map1Id).map,t.getMap(e.map2Id).map),y({clientX:t.maps[e.map1Id].getCanvas().clientWidth/2}))}),[t.mapIds,t,e,y,f]);var g=function(e){e.touches?(document.addEventListener("touchmove",y),document.addEventListener("touchend",h)):(document.addEventListener("mousemove",y),document.addEventListener("mouseup",b))},h=function e(){document.removeEventListener("touchmove",y),document.removeEventListener("touchend",e)},b=function e(){document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",e)};return a.a.createElement("div",{style:{position:"absolute",left:c+"%",top:"50%",borderRadius:"50%",width:"100px",height:"100px",background:"#0066ff",border:"3px solid #eaebf1",cursor:"pointer",zIndex:"110",marginLeft:"-50px",marginTop:"-50px",textAlign:"center",lineHeight:"91px",fontSize:"2em",color:"#fafafa",userSelect:"none"},onTouchStart:g,onMouseDown:g})},p=u;try{u.displayName="MlLayerSwipe",u.__docgenInfo={description:"creates a split view of 2 synchronised maplibre instances",displayName:"MlLayerSwipe",props:{map1Id:{defaultValue:null,description:"Id of the first MapLibre instance.",name:"map1Id",required:!0,type:{name:"string"}},map2Id:{defaultValue:null,description:"Id of the second MapLibre instance.",name:"map2Id",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlLayerSwipe/MlLayerSwipe.tsx#MlLayerSwipe"]={docgenInfo:u.__docgenInfo,name:"MlLayerSwipe",path:"src/components/MlLayerSwipe/MlLayerSwipe.tsx#MlLayerSwipe"})}catch(e){}var d=r(113),f=r(174);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g={title:"MapComponents/MlLayerSwipe",name:"MlLayerSwipe",component:p,argTypes:{},decorators:f.a},h=(t.default=g,function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement(d.a,{url:"https://www.wms.nrw.de/geobasis/wms_nw_uraufnahme",urlParameters:{layers:"nw_uraufnahme_rw"},sourceOptions:{minzoom:13,maxzoom:20},mapId:"map_2"}),a.a.createElement(p,{map1Id:"map_1",map2Id:"map_2"}))}.bind({}));h.parameters={},h.args={},h.parameters=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({storySource:{source:'(args) => (\n  <>\n    <MlWmsLayer\n      url="https://www.wms.nrw.de/geobasis/wms_nw_uraufnahme"\n      urlParameters={{\n        layers: "nw_uraufnahme_rw",\n      }}\n      sourceOptions={{\n        minzoom: 13,\n        maxzoom: 20,\n      }}\n      mapId="map_2"\n    />\n    <MlLayerSwipe map1Id="map_1" map2Id="map_2" />\n  </>\n)'}},h.parameters)},1011:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return j}));var n=r(0),a=r.n(n),o=r(3),i=r.n(o),s=r(30);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=function(e){var t=Object(s.a)({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=Object(n.useRef)(e.layerId||"MlOsmLayer-"+t.componentId);return Object(n.useEffect)((function(){t.map&&(t.map.addSource(r.current,c({type:"raster",tileSize:256},e.sourceOptions),t.componentId),t.map.addLayer(c({id:r.current,type:"raster",source:r.current,minzoom:0,maxzoom:22},e.layerOptions),e.insertBeforeLayer,t.componentId))}),[e,t.map]),a.a.createElement(a.a.Fragment,null)};p.propTypes={mapId:i.a.string,idPrefix:i.a.string,sourceOptions:i.a.object,layerOptions:i.a.object,insertBeforeLayer:i.a.string};var d=p,f=r(84),m=r(219),y=r(20);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var O={title:"MapComponents/MlOsmLayer",component:d,argTypes:{options:{control:{type:"object"}}},decorators:y.a},j=(t.default=O,function(e){var t=b(Object(n.useState)(!0),2),r=t[0],o=t[1];return a.a.createElement(f.a,null,a.a.createElement(m.a,{color:"primary",variant:r?"contained":"outlined",onClick:function(){return o(!r)}},"OSM"),r&&a.a.createElement(d,e))}.bind({}));j.args={sourceOptions:{tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.jpg"],attribution:'Map tiles by <a target="_top" rel="noopener" href="http://stamen.com">Stamen Design</a>, under <a target="_top" rel="noopener" href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a target="_top" rel="noopener" href="http://openstreetmap.org">OpenStreetMap</a>, under <a target="_top" rel="noopener" href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'},layerOptions:{}},j.parameters=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({storySource:{source:'(props) => {\n  const [showLayer, setShowLayer] = useState(true);\n\n  return (\n    <TopToolbar>\n      <Button\n        color="primary"\n        variant={showLayer ? "contained" : "outlined"}\n        onClick={() => setShowLayer(!showLayer)}\n      >\n        OSM\n      </Button>\n      {showLayer && <MlOsmLayer {...props} />}\n    </TopToolbar>\n  );\n}'}},j.parameters)},1012:function(e,t,r){"use strict";r.r(t),r.d(t,"Toolbar",(function(){return h})),r.d(t,"Overlay",(function(){return b}));var n=r(0),a=r.n(n),o=r(30);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var l=function(e){var t=Object(n.useRef)(0),r=Object(o.a)({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),s=i(Object(n.useState)(0),2),l=s[0],c=s[1],u=i(Object(n.useState)(""),2),p=u[0],d=u[1],f=Object(n.useCallback)((function(){var n,a;if((null===(n=r.map)||void 0===n?void 0:n.map.getZoom())!==t.current&&r.map){t.current=null===(a=r.map)||void 0===a?void 0:a.map.getZoom();var o=e.maxWidth||100,i=r.map._container.clientHeight/2,s=r.map.unproject([0,i]),l=r.map.unproject([o,i]),c=s.distanceTo(l);if("imperial"===e.unit){var u=3.2808*c;if(u>5280)m(o,u/5280,r.map._getUIString("ScaleControl.Miles"));else m(o,u,r.map._getUIString("ScaleControl.Feet"))}else if("nautical"===e.unit){m(o,c/1852,r.map._getUIString("ScaleControl.NauticalMiles"))}else c>=1e3?m(o,c/1e3,r.map._getUIString("ScaleControl.Kilometers")):m(o,c,r.map._getUIString("ScaleControl.Meters"))}}),[r.map,e.unit,e.maxWidth]);Object(n.useEffect)((function(){if(r.map){var e=f;return r.map.on("move",e,r.componentId),f(),function(){r.map.off("move",e)}}}),[r.map,f]);var m=function(e,t,r){var n=y(t);c(e*(n/t)),d(n+"&nbsp;"+r)},y=function(e){var t=Math.pow(10,"".concat(Math.floor(e)).length-1),r=e/t;return t*(r=r>=10?10:r>=5?5:r>=3?3:r>=2?2:r>=1?1:function(e){var t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(r))};return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{style:{backgroundColor:"hsla(0,0%,100%,.75)",fontSize:"10px",border:"2px solid #333",borderTop:"#333",padding:"0 5px",color:"#333",boxSizing:"border-box",width:l+"px",fontFamily:"sans-serif"},dangerouslySetInnerHTML:{__html:p}}))},c=r(84),u=r(20),p=r(376);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y={title:"MapComponents/MlScaleReference",component:l,argTypes:{url:{},layer:{}},decorators:u.a},g=(t.default=y,function(e){var t=Object(p.a)("(max-width:900px)");return a.a.createElement(a.a.Fragment,null,"toolbar"===e.show&&a.a.createElement(c.a,null,a.a.createElement(l,e)),"overlay"===e.show&&a.a.createElement("div",{style:{position:"absolute",zIndex:1e5,bottom:t?"40px":"20px",right:"20px"}},a.a.createElement(l,e)))}),h=g.bind({});h.args={show:"toolbar"};var b=g.bind({});b.args={show:"overlay"},h.parameters=f({storySource:{source:'(props) => {\n  const mediaIsMobile = useMediaQuery("(max-width:900px)");\n  return(\n    <>\n      {props.show === "toolbar" && (\n        <TopToolbar>\n          <MlScaleReference {...props} />\n        </TopToolbar>\n      )}\n      {props.show === "overlay" && (\n        <div\n          style={{\n            position: "absolute",\n            zIndex: 100000,\n            bottom: mediaIsMobile ? "40px" : "20px",\n            right: "20px",\n          }}\n        >\n          <MlScaleReference {...props} />\n        </div>\n      )}\n    </>\n  );\n}'}},h.parameters),b.parameters=f({storySource:{source:'(props) => {\n  const mediaIsMobile = useMediaQuery("(max-width:900px)");\n  return(\n    <>\n      {props.show === "toolbar" && (\n        <TopToolbar>\n          <MlScaleReference {...props} />\n        </TopToolbar>\n      )}\n      {props.show === "overlay" && (\n        <div\n          style={{\n            position: "absolute",\n            zIndex: 100000,\n            bottom: mediaIsMobile ? "40px" : "20px",\n            right: "20px",\n          }}\n        >\n          <MlScaleReference {...props} />\n        </div>\n      )}\n    </>\n  );\n}'}},b.parameters)},1013:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return U}));var n=r(0),a=r.n(n),o=r(3),i=r.n(o),s=r(34),l=r(575),c=r(76);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var y=function(){var e=Object.fromEntries(new URLSearchParams(window.location.search));return e.layers=JSON.parse(null!=e&&e.layers?e.layers:"[]"),e},g=y(),h=function(e){var t=Object(n.useContext)(s.b),r=Object(n.useRef)(!1),o=Object(n.useRef)(void 0),i=f(Object(n.useState)(void 0),2),u=i[0],d=i[1],m=Object(n.useRef)({}),h=Object(n.useRef)((e.idPrefix?e.idPrefix:"MlShareMapState-")+Object(l.a)()),b=Object(c.a)({watch:{viewport:!1,layers:!0,sources:!1},filter:{includeBaseLayers:!1}}),v=Object(n.useRef)(!1),O=Object(n.useRef)(void 0),j=Object(n.useRef)({viewport:{center:!1,bearing:!1,pitch:!1,zoom:!1},layers:p({},m)}),I=Object(n.useRef)({}),w=Object(n.useCallback)((function(){if(e.active){var t=[];for(var r in b.layers)t.push({id:b.layers[r].id,type:b.layers[r].type,visible:b.layers[r].visible});S();var n=new URLSearchParams(p(p(p({},y()),I.current),{},{layers:JSON.stringify(t)}));JSON.parse(Object.fromEntries(n).layers).forEach((function(e){m.current[e.id]=!1}));var a=new URLSearchParams(window.location.search);x(b.layers),n.toString()!==a.toString()&&window.history.pushState(p({},I.current),document.title,"?"+n.toString())}}),[b.layers,e.active]);Object(n.useEffect)((function(){var e=h.current;return I.current=y(),function(){o.current&&(o.current.cleanup(e),o.current=void 0),r.current=!1}}),[]),Object(n.useEffect)((function(){o.current&&w()}),[w]),Object(n.useEffect)((function(){if(o.current){var e=w;return o.current.on("moveend",e,h.current),function(){var t;null===(t=o.current)||void 0===t||t.off("moveend",e)}}}),[w,u]),Object(n.useEffect)((function(){t.mapExists(e.mapId)&&!r.current&&(r.current=!0,o.current=t.getMap(e.mapId),d(o.current),I.current.lat&&I.current.lng&&C())}),[t.mapIds,t,e.mapId,e.active]),Object(n.useEffect)((function(){var e;if(null!=b&&null!==(e=b.layers)&&void 0!==e&&e.length){for(var t in void 0===O.current&&(O.current={},null==g||g.layers.forEach((function(e){O.current[e.id]=!1}))),O.current){var r=!0;if(!1===O.current[t]&&(r=!1),r)return}g.layers&&g.layers.forEach((function(e){var t,r,n;null!==(t=o.current)&&void 0!==t&&t.getLayer(e.id)&&!1===O.current[e.id]&&(O.current[e.id]=!0,null===(r=o.current)||void 0===r||null===(n=r.getLayer(e.id))||void 0===n||n.setLayoutProperty("visibility",e.visible?"visible":"none"))}))}}),[b.layers,e.mapId,e.active]),Object(n.useEffect)((function(){u&&b.layers&&(e.active||u.cleanup(h.current))}),[e.active,u,b.layers]);var S=function(){I.current.lat=o.current.getCenter().lat,I.current.lng=o.current.getCenter().lng,I.current.zoom=o.current.getZoom(),I.current.bearing=o.current.getBearing(),I.current.pitch=o.current.getPitch()},x=function(e){var t={};e.forEach((function(e,r,n){n[e.key]||(t[e.key]=!0)}))},C=function(){j.current.viewport.center||(j.current.viewport.center=!0,o.current.setCenter([I.current.lng,I.current.lat]),o.current.setZoom(I.current.zoom),o.current.setBearing(I.current.bearing),o.current.setPitch(I.current.pitch)),v.current=!0};return window.onpopstate=function(e){e.state&&e.state.lng&&e.state.lat&&e.state.zoom&&o.current.easeTo({zoom:e.state.zoom,center:[e.state.lng,e.state.lat]})},a.a.createElement(a.a.Fragment,null)};h.defaultProps={mapId:void 0},h.propTypes={mapId:i.a.string};var b=h,v=r(20),O=r(30),j=r(278),I=r(1029),w=r(290),S=r(279),x=r.n(S),C=r(280),M=r.n(C),E=r(1032),P=r(276),A=r(563),L=r(1031),T=r(69),R=r(1099),k=r(564),_=r.n(k),H=r(565),G=r.n(H);function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var z={title:"MapComponents/MlShareMapState",component:b,argTypes:{},decorators:v.a},U=(t.default=z,function(){var e,t=[P,A],r=F(Object(n.useState)(!0),2),o=r[0],i=r[1],s=Object(O.a)({mapId:"map_1"}),l=Object(c.a)({mapId:"map_1",watch:{viewport:!1,layers:!0,sources:!1},filter:{includeBaseLayers:!1}});return a.a.createElement(a.a.Fragment,null,a.a.createElement(b,{active:o}),t.map((function(e,t){return a.a.createElement(T.a,{layerId:"GeoJson_"+t,type:"line",geojson:e,key:"GeoJson_"+t})})),a.a.createElement(j.a,{sx:{wordBreak:"break-word"}},a.a.createElement(R.a,{size:"small",selected:o,value:o,onChange:function(){i(!o)}},o?a.a.createElement(_.a,null):a.a.createElement(G.a,null),o?"active":"inactive"),a.a.createElement(L.a,{dense:!0,key:"layers"},null===(e=l.layers)||void 0===e?void 0:e.map((function(e){return a.a.createElement(I.a,{key:e.id,secondaryAction:a.a.createElement(w.a,{edge:"end","aria-label":"toggle visibility",onClick:function(){var t,r,n,a,o,i,l=null===(t=s.map)||void 0===t||null===(r=t.getLayer)||void 0===r||null===(n=r.call(t,e.id))||void 0===n?void 0:n.getLayoutProperty("visibility");null===(a=s.map)||void 0===a||null===(o=a.getLayer)||void 0===o||null===(i=o.call(a,e.id))||void 0===i||i.setLayoutProperty("visibility","none"===l?"visible":"none"),s.map.map.fire("zoom")}},e.visible?a.a.createElement(x.a,null):a.a.createElement(M.a,null))},a.a.createElement(E.a,{primary:e.id,secondary:""}))})))))}.bind({}));U.parameters={},U.args={},U.parameters=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({storySource:{source:'() => {\n  const geoJsonArray = [sample_geojson_1, sample_geojson_2];\n  const [watchState, setWatchState] = useState(true);\n  const mapHook = useMap({ mapId: "map_1" });\n  const mapState = useMapState({\n    mapId: "map_1",\n    watch: {\n      viewport: false,\n      layers: true,\n      sources: false,\n    },\n    filter: {\n      includeBaseLayers: false,\n    },\n  });\n\n  return (\n    <>\n      <MlShareMapState active={watchState} />\n      {geoJsonArray.map((el, i) => (\n        <MlGeoJsonLayer layerId={"GeoJson_" + i} type="line" geojson={el} key={"GeoJson_" + i} />\n      ))}\n      <Sidebar sx={{ wordBreak: "break-word" }}>\n        <ToggleButton\n          size="small"\n          selected={watchState}\n          value={watchState}\n          onChange={() => {\n            setWatchState(!watchState);\n          }}\n        >\n          {watchState ? <CheckCircleOutlineIcon /> : <ErrorOutlineIcon />}\n\n          {watchState ? "active" : "inactive"}\n        </ToggleButton>\n        <List dense key="layers">\n          {mapState.layers?.map((el) => (\n            <ListItem\n              key={el.id}\n              secondaryAction={\n                <IconButton\n                  edge="end"\n                  aria-label="toggle visibility"\n                  onClick={() => {\n                    let currentVisibility = mapHook.map\n                      ?.getLayer?.(el.id)\n                      ?.getLayoutProperty("visibility");\n                    mapHook.map\n                      ?.getLayer?.(el.id)\n                      ?.setLayoutProperty(\n                        "visibility",\n                        currentVisibility === "none" ? "visible" : "none"\n                      );\n                    mapHook.map.map.fire("zoom");\n                  }}\n                >\n                  {el.visible ? <VisibilityIcon /> : <VisibilityOffIcon />}\n                </IconButton>\n              }\n            >\n              <ListItemText primary={el.id} secondary={""} />\n            </ListItem>\n          ))}\n        </List>\n      </Sidebar>\n    </>\n  );\n}'}},U.parameters)},1014:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return C}));var n=r(0),a=r.n(n),o=r(34),i=r(173),s=r(374),l=r(52),c=r(575),u=r(3),p=r.n(u);function d(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var m=function(e){var t=Object(n.useContext)(o.b),r=Object(n.useRef)((e.idPrefix?e.idPrefix:"MlSpatialElevationProfile-")+Object(c.a)()),u=Object(n.useRef)(null),p=Object(n.useRef)(!1),f=Object(n.useContext)(i.b),m=Object(n.useRef)("elevationprofile-"+Object(c.a)()),y=Object(n.useRef)("elevationprofile-layer-"+Object(c.a)()),g=Object(n.useCallback)((function(t,r,n,a,o){var i=Object(s.a)([[t,r],[a,o]]),c=Object(l.lineOffset)(i,5,{units:"meters"}),u=c.geometry.coordinates[0][0],p=c.geometry.coordinates[0][1],d=c.geometry.coordinates[1][0],f=c.geometry.coordinates[1][1];return Object(s.b)([[[t,r],[a,o],[d,f],[u,p],[t,r]]],{height:n*e.elevationFactor})}),[e.elevationFactor]);return Object(n.useEffect)((function(){var e=r.current;return function(){u.current&&(u.current.cleanup(e),u.current=null)}}),[]),Object(n.useEffect)((function(){t.mapExists(e.mapId)&&!p.current&&(p.current=!0,u.current=t.getMap(e.mapId),u.current.addSource(m.current,{type:"geojson",data:f.data},r.current),u.current.addLayer({id:y.current,source:m.current,type:"fill-extrusion",paint:{"fill-extrusion-height":["get","height"],"fill-extrusion-opacity":.9,"fill-extrusion-color":["interpolate",["linear"],["get","height"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"yellow"]}},e.insertBeforeLayer,r.current))}),[t.mapIds,e.insertBeforeLayer,e.mapId,f,t]),Object(n.useEffect)((function(){var t;if(u.current&&u.current.getLayer(y.current)){var r=f.data;if(r&&r.features){var n=r.features.find((function(e){return"LineString"===e.geometry.type}));if(n&&n.geometry){var a=n.geometry.coordinates.map((function(e,t){return e[2]})),o=Math.min.apply(Math,d(a)),i=Math.max.apply(Math,d(a))-o;i=0===i?1:i,u.current.setPaintProperty(y.current,"fill-extrusion-color",["interpolate",["linear"],["get","height"],0,"rgb(0,255,55)",i*e.elevationFactor,"rgb(255,0,0)"]);var s=function(e,t,r){return e*(1-r)+t*r},c=[];n.geometry.coordinates.forEach((function(e,t){if(n.geometry.coordinates[t+1]){var r=~~(1e3*Object(l.distance)([e[0],e[1]],[n.geometry.coordinates[t+1][0],n.geometry.coordinates[t+1][1]],{units:"kilometers"})/10);r=r<1?1:r;for(var a=0;a<r;a++){var i=s(n.geometry.coordinates[t][0],n.geometry.coordinates[t+1][0],a/r),u=s(n.geometry.coordinates[t][1],n.geometry.coordinates[t+1][1],a/r),p=s(n.geometry.coordinates[t][2]-o,n.geometry.coordinates[t+1][2]-o,a/r),d=s(n.geometry.coordinates[t][0],n.geometry.coordinates[t+1][0],(a+1)/r),f=s(n.geometry.coordinates[t][1],n.geometry.coordinates[t+1][1],(a+1)/r),m=g(i,u,p,d,f);c.push(m)}}}));var p=f.getEmptyFeatureCollection();p.features=c,null===(t=u.current.getSource(m.current))||void 0===t||t.setData(p)}}}}),[f.data,g,f,e.elevationFactor,t]),a.a.createElement(a.a.Fragment,null)};m.defaultProps={elevationFactor:1},m.propTypes={mapId:p.a.string,idPrefix:p.a.string,elevationFactor:p.a.number,insertBeforeLayer:p.a.string};var y=m,g=r(213),h=r(20),b=r(275),v=r(566),O=r.n(v),j=r(290),I=r(376);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x={title:"MapComponents/MlSpatialElevationProfile",component:y,argTypes:{options:{control:{type:"object"}}},decorators:h.a},C=(t.default=x,function(e){var t=Object(I.a)("(max-width:900px)");return a.a.createElement(a.a.Fragment,null,a.a.createElement(j.a,{style:{position:"absolute",right:"5px",bottom:t?"145px":"125px",backgroundColor:"rgba(255,255,255,1)",zIndex:1e3},title:"Download sample-data",size:"large",href:"assets/sample.gpx",target:"blank"},a.a.createElement(O.a,null)),a.a.createElement(b.a,null,a.a.createElement(g.a,null),a.a.createElement(y,null)))}.bind({}));C.parameters={},C.parameters=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({storySource:{source:'(args) => {\n\n  const mediaIsMobile = useMediaQuery("(max-width:900px)");\n\n  return(\n  <>\n    <IconButton\n      style={{\n        position: "absolute",\n        right: "5px",\n        bottom: mediaIsMobile ? "145px" : "125px",\n        backgroundColor: "rgba(255,255,255,1)",\n\n        zIndex: 1000,\n      }}\n      title="Download sample-data"\n      size="large"\n      href="assets/sample.gpx"\n      target="blank"\n    >\n      <FileDownloadIcon />\n    </IconButton>\n    <GeoJsonProvider>\n      <MlGPXViewer />\n      <MlSpatialElevationProfile />\n    </GeoJsonProvider>\n  </>\n);\n}'}},C.parameters)},1015:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return h}));var n=r(0),a=r.n(n),o=r(3),i=r.n(o),s=r(76);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=function(e){var t=Object(s.a)({mapId:e.mapId,watch:c({layers:!0,sources:!1,viewport:!1},e.watch),filter:c({},e.filter)}),r=Object(n.useRef)(0);return r.current=r.current+1,a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{style:{overflow:"hidden",width:"100px",height:"20px"}},"Render: ",r.current,a.a.createElement("br",null),a.a.createElement("pre",null,JSON.stringify(t,null," "))))};p.defaultProps={mapId:void 0},p.propTypes={mapId:i.a.string};var d=p,f=r(20);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g={title:"MapComponents/MlUseMapDebugger",component:d,argTypes:{url:{},layer:{}},decorators:f.a},h=(t.default=g,function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement(d,e))}.bind({}));h.parameters={},h.args={mapId:"map_1"},h.parameters=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({storySource:{source:"(props) => {\n  return (\n    <>\n      <MlUseMapDebugger {...props} />\n    </>\n  );\n}"}},h.parameters)},1016:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return b}));var n=r(0),a=r.n(n),o=r(30),i=r(3),s=r.n(i);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=function(e){var t=Object(o.a)({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=Object(n.useRef)({}),i=Object(n.useRef)(e.layerId||"MlVectorTileLayer-"+t.componentId),s=Object(n.useRef)({}),l=Object(n.useRef)({}),u=Object(n.useRef)(!1);return Object(n.useEffect)((function(){if(t.map&&!u.current)for(var n in u.current=!0,t.map.addSource(i.current,c({type:"vector",tiles:[e.url],tileSize:512,attribution:""},e.sourceOptions),t.componentId),e.layers){var a=i.current+"_"+n;r.current[n]=a,t.map.addLayer(c({id:a,source:i.current,type:"line",minzoom:0,maxzoom:22,layout:{},paint:{"line-opacity":.5,"line-color":"rgb(80, 80, 80)","line-width":2}},e.layers[n]),e.insertBeforeLayer,t.componentId),s.current[n]=JSON.stringify(e.layers[n].paint),l.current[n]=JSON.stringify(e.layers[n].layout)}}),[t.map,e]),Object(n.useEffect)((function(){if(t.map&&u.current)for(var n in e.layers)if(t.map.map.getLayer(r.current[n])){var a=JSON.stringify(e.layers[n].paint);if(a!==s.current[n])for(var o in e.layers[n].paint)t.map.map.setPaintProperty(r.current[n],o,e.layers[n].paint[o]);s.current[n]=a;var i=JSON.stringify(e.layers[n].layout);if(i!==l.current[n])for(var c in e.layers[n].layout)t.map.map.setLayoutProperty(r.current[n],c,e.layers[n].layout[c]);l.current[n]=i}}),[e.layers,t.map]),a.a.createElement(a.a.Fragment,null)};p.propTypes={mapId:s.a.string,sourceOptions:s.a.object,layers:s.a.object,url:s.a.string};var d=p;try{p.displayName="MlVectorTileLayer",p.__docgenInfo={description:"Adds a vector-tile source and 0...n vector-tile-layers to the MapLibre instance referenced by\nprops.mapId",displayName:"MlVectorTileLayer",props:{mapId:{defaultValue:null,description:"",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:"",name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"",name:"layerId",required:!1,type:{name:"string | undefined"}},sourceOptions:{defaultValue:null,description:"",name:"sourceOptions",required:!1,type:{name:"any"}},url:{defaultValue:null,description:"",name:"url",required:!1,type:{name:"string | undefined"}},layers:{defaultValue:null,description:"",name:"layers",required:!1,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlVectorTileLayer/MlVectorTileLayer.tsx#MlVectorTileLayer"]={docgenInfo:p.__docgenInfo,name:"MlVectorTileLayer",path:"src/components/MlVectorTileLayer/MlVectorTileLayer.tsx#MlVectorTileLayer"})}catch(e){}var f=r(84),m=r(20);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h={title:"MapComponents/MlVectorTileLayer",component:d,argTypes:{url:{},layer:{}},decorators:m.a},b=(t.default=h,function(e){return a.a.createElement(f.a,null,a.a.createElement(d,e))}.bind({}));b.parameters={},b.args={mapId:"map_1",url:"https://wms.wheregroup.com/tileserver/tile/tileserver.php?/europe-0-14/index.json?/europe-0-14/{z}/{x}/{y}.pbf",layers:{landuseLine:{"source-layer":"landuse",layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":2,"line-color":"#ff0000"}}},sourceOptions:{minzoom:0,maxzoom:20}},b.parameters=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({storySource:{source:"(args) => (\n  <TopToolbar>\n    <MlVectorTileLayer {...args} />\n  </TopToolbar>\n)"}},b.parameters)},1017:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return y}));var n=r(0),a=r.n(n),o=r(3),i=r.n(o),s=r(34),l=r(575),c=function(e){var t=Object(n.useContext)(s.b),r=Object(n.useRef)(!1),o=Object(n.useRef)(void 0),i=Object(n.useRef)((e.idPrefix?e.idPrefix:"MlWmsFeatureInfoPopup-")+Object(l.a)());return Object(n.useEffect)((function(){var e=i.current;return function(){o.current&&(o.current.cleanup(e),o.current=void 0),r.current=!1}}),[]),Object(n.useEffect)((function(){t.mapExists(e.mapId)&&!r.current&&(r.current=!0,o.current=t.getMap(e.mapId),o.current.setCenter([7.132122000552613,50.716405378037706]))}),[t.mapIds,t,e.mapId]),a.a.createElement(a.a.Fragment,null)};c.defaultProps={mapId:void 0},c.propTypes={mapId:i.a.string};var u=c,p=r(20);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m={title:"MapComponents/MlWmsFeatureInfoPopup",component:u,argTypes:{url:{},layer:{}},decorators:p.a},y=(t.default=m,function(e){return a.a.createElement(u,null)}.bind({}));y.parameters={},y.args={},y.parameters=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({storySource:{source:"(args) => <MlWmsFeatureInfoPopup />"}},y.parameters)},113:function(e,t,r){"use strict";var n=r(0),a=r.n(n),o=r(30),i=r(3),s=r.n(i);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p={visible:!0,urlParameters:{bbox:"{bbox-epsg-3857}",format:"image/png",service:"WMS",version:"1.1.1",request:"GetMap",srs:"EPSG:3857",width:256,height:256,styles:""},attribution:"",sourceOptions:{minZoom:0,maxZoom:20},layerOptions:{minZoom:0,maxZoom:20}},d=function(e){var t=Object(o.a)({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=Object(n.useRef)(!1),i=Object(n.useRef)(e.layerId||"MlWmsLayer-"+t.componentId);return Object(n.useEffect)((function(){var n;if(t.map&&!r.current){var a;r.current=!0;var o=e.url;-1!==e.url.indexOf("?")&&(o=(a=e.url.split("?"))[0]);var s=new URLSearchParams(null===(n=a)||void 0===n?void 0:n[1]),l=c(c(c({},p.urlParameters),Object.fromEntries(s)),e.urlParameters),u=new URLSearchParams(l),d=decodeURIComponent(u.toString())+"".replace(/%2F/g,"/").replace(/%3A/g,":");t.map.addSource(i.current,c({type:"raster",tiles:[o+"?"+d],tileSize:l.width,attribution:e.attribution},e.sourceOptions),t.componentId),t.map.addLayer(c({id:i.current,type:"raster",source:i.current},e.layerOptions),e.insertBeforeLayer,t.componentId),e.visible||t.map.map.setLayoutProperty(i.current,"visibility","none")}}),[t,e]),Object(n.useEffect)((function(){t.map&&r.current&&(e.visible?t.map.map.setLayoutProperty(i.current,"visibility","visible"):t.map.map.setLayoutProperty(i.current,"visibility","none"))}),[e.visible,t.map]),a.a.createElement(a.a.Fragment,null)};d.defaultProps=c({},p),d.propTypes={url:s.a.string.isRequired,urlParameters:s.a.shape({layers:s.a.string.isRequired,bbox:s.a.string,format:s.a.string,service:s.a.string,version:s.a.string,request:s.a.string,srs:s.a.string,width:s.a.number,height:s.a.number}),mapId:s.a.string,attribution:s.a.string,layerOptions:s.a.object,sourceOptions:s.a.object,insertBeforeLayer:s.a.string,visible:s.a.bool},t.a=d;try{d.displayName="MlWmsLayer",d.__docgenInfo={description:"Adds a WMS raster source & layer to the maplibre-gl instance",displayName:"MlWmsLayer",props:{urlParameters:{defaultValue:null,description:"",name:"urlParameters",required:!1,type:{name:"any"}},url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},visible:{defaultValue:null,description:"",name:"visible",required:!1,type:{name:"boolean | undefined"}},attribution:{defaultValue:null,description:"",name:"attribution",required:!1,type:{name:"string | undefined"}},mapId:{defaultValue:null,description:"",name:"mapId",required:!1,type:{name:"string | undefined"}},sourceOptions:{defaultValue:null,description:"",name:"sourceOptions",required:!1,type:{name:"any"}},layerOptions:{defaultValue:null,description:"",name:"layerOptions",required:!1,type:{name:"any"}},insertBeforeLayer:{defaultValue:null,description:"",name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"",name:"layerId",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlWmsLayer/MlWmsLayer.tsx#MlWmsLayer"]={docgenInfo:d.__docgenInfo,name:"MlWmsLayer",path:"src/components/MlWmsLayer/MlWmsLayer.tsx#MlWmsLayer"})}catch(e){}},133:function(e,t,r){"use strict";var n=r(0),a=r.n(n),o=r(34),i=r(130);function s(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}function l(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var f=d((function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=this;this.registeredElements={},this.baseLayers=[],this.firstSymbolLayer=void 0,this.eventHandlers={layerchange:[],viewportchange:[]},this.wrapper={on:function(e,t,r,a){if(n.eventHandlers[e]){"string"==typeof r&&(a=r,r={}),n.eventHandlers[e].push({handler:t,options:r});var o=[e,t];a&&"string"==typeof a&&(n.initRegisteredElements(a),n.registeredElements[a].wrapperEvents.push(o))}},off:function(e,t){n.eventHandlers[e]&&(n.eventHandlers[e]=n.eventHandlers[e].filter((function(e){return!Object.is(e.handler,t)&&e})))},fire:function(e,t){if(n.eventHandlers[e]){var r=t||window,a=new Event(e);n.eventHandlers[e].forEach((function(e){e.handler.call(r,a,n)}))}},layerState:[],layerStateString:"",oldLayerStateStrings:{},buildLayerObject:function(e){return{id:e.id,type:e.type,visible:"none"!==e.visibility,baseLayer:-1!==n.baseLayers.indexOf(e.id)}},buildLayerObjects:function(){return n.style._order.map((function(e){return n.wrapper.buildLayerObject(n.map.style._layers[e])})).filter((function(e){return e}))},refreshLayerState:function(){n.wrapper.layerState=n.wrapper.buildLayerObjects(),JSON.stringify(n.wrapper.layerState)!==n.wrapper.layerStateString&&(n.wrapper.fire("layerchange"),n.wrapper.layerStateString=JSON.stringify(n.wrapper.layerState))},viewportState:{center:{lng:0,lat:0},zoom:0,bearing:0,pitch:0},viewportStateString:"{}",oldViewportStateString:"{}",getViewport:function(){return"function"==typeof n.map.getCenter?{center:(e=n.map.getCenter(),{lng:e.lng,lat:e.lat}),zoom:n.map.getZoom(),bearing:n.map.getBearing(),pitch:n.map.getPitch()}:{};var e},refreshViewport:function(){n.wrapper.viewportState=n.wrapper.getViewport()}},this.initRegisteredElements=function(e,t){(void 0===n.registeredElements[e]||void 0!==t&&t)&&(n.registeredElements[e]={layers:[],sources:[],images:[],events:[],controls:[],wrapperEvents:[]})},this.addLayer=function(e,t,r){n.map.style&&(r&&"string"==typeof r&&void 0!==e.id&&(n.initRegisteredElements(r),n.registeredElements[r].layers.push(e.id),"object"===u(e.source)&&n.registeredElements[r].sources.push(e.id)),n.map.addLayer(e,t))},this.addSource=function(e,t,r){n.map.style&&(r&&"string"==typeof r&&void 0!==e&&(n.initRegisteredElements(r),n.registeredElements[r].sources.push(e)),n.map.addSource(e,t))},this.addImage=function(e,t,r,a){if(n.map.style){if("string"==typeof r&&void 0===a)return n.addImage.call(n,e,t,void 0,r);a&&"string"==typeof a&&void 0!==e&&(n.initRegisteredElements(a),n.registeredElements[a].images.push(e)),n.map.addImage(e,t,r)}},this.on=function(e,t,r,a){var o;if("string"==typeof r&&"function"==typeof t)return n.on.call(n,e,void 0,t,r);var i=[e,t,r];t||(i=[e,r]),a&&"string"==typeof a&&(n.initRegisteredElements(a),n.registeredElements[a].events.push(i)),(o=n.map).on.apply(o,l(i))},this.addControl=function(e,t,r){r&&"string"==typeof r&&(n.initRegisteredElements(r),n.registeredElements[r].controls.push(e)),n.map.addControl(e,t)},this.cleanup=function(e){n.map.style&&void 0!==n.registeredElements[e]&&(n.registeredElements[e].layers.forEach((function(e){n.map.style.getLayer(e)&&n.map.style.removeLayer(e)})),n.registeredElements[e].sources.forEach((function(e){n.map.style.getSource(e)&&n.map.style.removeSource(e)})),n.registeredElements[e].images.forEach((function(e){n.map.hasImage(e)&&n.map.style.removeImage(e)})),n.registeredElements[e].events.forEach((function(e){var t;(t=n.map).off.apply(t,l(e))})),n.registeredElements[e].controls.forEach((function(e){n.map.removeControl(e)})),n.registeredElements[e].wrapperEvents.forEach((function(e){var t;(t=n.wrapper).off.apply(t,l(e))})),n.initRegisteredElements(e,!0))};["moveLayer","removeLayer","removeSource","setPaintProperty","setLayoutProperty"].forEach((function(e){r[e]=function(){var t;n.map&&r.map.style&&"function"==typeof n.map.style[e]&&(t=n.map.style)[e].apply(t,arguments);return n.map._update?n.map._update(!0):void 0}}));["getLayer","getSource","listImages","getPaintProperty","getLayoutProperty","removeImage"].forEach((function(e){r[e]=function(){var t;return!(!n.map||!n.map.style)&&(t=n.map.style)[e].apply(t,arguments)}})),this.addNativeMaplibreFunctionsAndProps=function(){Object.getOwnPropertyNames(Object.getPrototypeOf(r.map)).forEach((function(e){void 0===r[e]&&(r[e]=function(){var t;return(t=n.map)[e].apply(t,arguments)})})),Object.keys(r.map).forEach((function(e){void 0===r[e]&&(r[e]=n.map[e])}))};["getZoom","setZoom","getCenter","setCenter","getBearing","setBearing","getPitch","setPitch","jumpTo","flyTo","panTo","panBy","panBy","zoomTo","zoomIn","zoomOut","getPadding","setPadding","rotateTo","resetNorth","resetNorthPitch","snapToNorth","cameraForBounds","fitBounds","fitScreenCoordinates","getFreeCameraOptions","setFreeCameraOptions","easeTo","stop"].forEach((function(e){r[e]=function(){if("function"==typeof n.map[e]){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=n.map[e]).call.apply(t,[n.map].concat(a))}}})),function(){var e,r=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t.mapOptions.style||-1!==t.mapOptions.style.indexOf("mapbox://")){e.next=3;break}return e.next=3,fetch(t.mapOptions.style).then((function(e){if(e.ok)return e.json();throw new Error("error loading map style.json")})).then((function(e){e.layers.forEach((function(e){n.baseLayers.push(e.id),n.firstSymbolLayer||"symbol"!==e.type||(n.firstSymbolLayer=e.id)})),n.styleJson=e,t.mapOptions.style=e})).catch((function(e){console.log(e)}));case 3:n.map=new i.Map(t.mapOptions),n.addNativeMaplibreFunctionsAndProps(),n.wrapper.refreshViewport(),n.wrapper.fire("viewportchange"),n.map.on("load",(function(){n.addNativeMaplibreFunctionsAndProps()})),n.map.on("move",(function(){n.wrapper.viewportState=n.wrapper.getViewport(),n.wrapper.fire("viewportchange")})),n.map.on("idle",(function(){n.wrapper.refreshLayerState()})),n.map.on("data",(function(){n.wrapper.refreshLayerState()})),"function"==typeof t.onReady&&t.onReady(n.map,n);case 12:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){s(o,n,a,i,l,"next",e)}function l(e){s(o,n,a,i,l,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}()()}));r(953);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=function(e){var t=Object(n.useRef)(null),r=Object(n.useRef)(null),i=Object(n.useContext)(o.b),s=Object(n.useRef)(e.mapId),l=e.options;return Object(n.useEffect)((function(){var e=s.current;return function(){var r,n;i.removeMap(e),null===(r=t.current)||void 0===r||null===(n=r.remove)||void 0===n||n.call(r),t.current=null}}),[]),Object(n.useEffect)((function(){r.current&&(t.current=new f({mapOptions:y({container:r.current},l),onReady:function(t,r){t.once("load",(function(){e.mapId?i.registerMap(e.mapId,r):i.setMap(r)}))}}))}),[r]),a.a.createElement("div",{ref:r,className:"mapContainer",style:e.style})};h.defaultProps={mapId:void 0,options:{center:{lng:8.607,lat:53.1409349},zoom:11}};t.a=h;try{h.displayName="MapLibreMap",h.__docgenInfo={description:"Creates a MapLibreGlWrapper instance and registers it in MapContext\nafter the MapLibre-gl load event has fired.\n\nMapLibreMap returns the html node that will be used by MapLibre-gl to render the map.\nThis Component must be kept unaware of any related components that interact with the MapLibre-gl\ninstance.",displayName:"MapLibreMap",props:{mapId:{defaultValue:{value:"undefined"},description:"Id of the MapLibreGl(Wrapper) instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},options:{defaultValue:{value:"{\n    center: { lng: 8.607, lat: 53.1409349 },\n    zoom: 11,\n  }"},description:"Config object that is passed to the MapLibreGl constructor as first parameter.\nSee https://maplibre.org/maplibre-gl-js-docs/api/map/ for a formal documentation of al\navailable properties.",name:"options",required:!1,type:{name:"object | undefined"}},style:{defaultValue:null,description:"css style definition passed to the map container DOM element",name:"style",required:!1,type:{name:"object | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MapLibreMap/MapLibreMap.tsx#MapLibreMap"]={docgenInfo:h.__docgenInfo,name:"MapLibreMap",path:"src/components/MapLibreMap/MapLibreMap.tsx#MapLibreMap"})}catch(e){}},145:function(e,t,r){"use strict";var n=r(0),a=r.n(n),o=r(219),i=r(1033),s=r(543),l=r.n(s),c=r(544),u=r.n(c),p=r(210),d=r(211),f=r(376),m=r(30),y=["color"];function g(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var I=function(e){var t=Object(m.a)({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=O(Object(n.useState)(0),2),s=r[0],c=r[1],h=Object(f.a)("(max-width:900px)"),v={minWidth:"20px",minHeight:"20px",width:h?"50px":"30px",height:h?"50px":"30px",backgroundColor:"#414141",borderRadius:"23%",margin:.15,fontSize:h?"1.5em":"1.2em",":hover":{backgroundColor:"#515151"},color:"#ececec"};Object(n.useEffect)((function(){t.map&&(t.map.on("pitchend",(function(){t.map&&c(t.map.map.getPitch())}),t.componentId),c(t.map.map.getPitch()))}),[t.map,e.mapId]);var j;return a.a.createElement("div",{style:{zIndex:501,position:"absolute",right:h?"15px":"5px",bottom:h?"40px":"20px",display:"flex",flexDirection:"column"}},a.a.createElement(p.a,{style:{width:"31px",position:"relative",height:h?"55px":"45px",marginLeft:h?"3px":"-5px",transform:h?"scale(1.6)":"scale(1)"},backgroundStyle:{boxShadow:"0px 0px 18px rgba(0,0,0,.5)"}}),a.a.createElement(o.a,{sx:b(b({},v),{},{fontSize:h?"1.4em":"1em",fontWeight:600}),onClick:function(){if(t.map){var e=60;0!==t.map.map.getPitch()&&(e=0),t.map.map.easeTo({pitch:e})}}},s?"2D":"3D"),a.a.createElement(d.a,{style:b({},(j=v,g(j,y)))}),a.a.createElement(i.a,{orientation:"vertical",sx:{width:"50px",border:"none",Button:{minWidth:"20px !important",border:"none",padding:0},"Button:hover":{border:"none"}}},a.a.createElement(o.a,{sx:b(b({},v),{},{color:"#ececec"}),onClick:function(){t.map&&t.map.map.transform._zoom+.5<=t.map.map.transform._maxZoom&&t.map.map.easeTo({zoom:t.map.map.transform._zoom+.5})}},a.a.createElement(l.a,{sx:{fontSize:h?"1.5em":"1.2em"}})),a.a.createElement(o.a,{sx:b(b({},v),{},{color:"#ececec"}),onClick:function(){t.map&&t.map.map.transform._zoom-.5>=t.map.map.transform._minZoom&&t.map.map.easeTo({zoom:t.map.map.transform._zoom-.5})}},a.a.createElement(u.a,{sx:{fontSize:h?"1.5em":"1.2em"}}))))};t.a=I;try{I.displayName="MlNavigationTools",I.__docgenInfo={description:"",displayName:"MlNavigationTools",props:{mapId:{defaultValue:null,description:"",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:"",name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlNavigationTools/MlNavigationTools.tsx#MlNavigationTools"]={docgenInfo:I.__docgenInfo,name:"MlNavigationTools",path:"src/components/MlNavigationTools/MlNavigationTools.tsx#MlNavigationTools"})}catch(e){}},172:function(e,t,r){"use strict";var n=r(0),a=r(30);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var u=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","hillshade","background"];t.a=function(e){var t=Object(a.a)({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=Object(n.useRef)(""),o=Object(n.useRef)(""),s=Object(n.useRef)(""),c=l(Object(n.useState)(),2),p=c[0],d=c[1],f=Object(n.useRef)(!1),m=Object(n.useRef)(e.layerId||(e.idPrefix?e.idPrefix:"Layer-")+t.componentId),y=Object(n.useCallback)((function(){var n,a;!f.current&&t.map&&(f.current=!0,t.map.addLayer(i(i(i({},e.options),e.geojson?{source:{type:"geojson",data:e.geojson}}:{}),{},{id:m.current}),e.insertBeforeLayer?e.insertBeforeLayer:e.insertBeforeFirstSymbolLayer?t.map.firstSymbolLayer:void 0,t.componentId),d(t.map.map.getLayer(m.current)),void 0!==e.onHover&&t.map.on("mousemove",m.current,e.onHover,t.componentId),void 0!==e.onClick&&t.map.on("click",m.current,e.onClick,t.componentId),void 0!==e.onLeave&&t.map.on("mouseleave",m.current,e.onLeave,t.componentId),o.current=JSON.stringify(null===(n=e.options)||void 0===n?void 0:n.paint),s.current=JSON.stringify(null===(a=e.options)||void 0===a?void 0:a.layout),r.current=e.options.type)}),[e,t.map]);Object(n.useEffect)((function(){if(t.map){if(console.log("create layer"),f.current&&-1!==u.indexOf(e.options.type)&&r.current&&e.options.type!==r.current)console.log("create layer 1"),g();else if(f.current&&(-1===u.indexOf(e.options.type)||-1!==u.indexOf(e.options.type)&&e.options.type===r.current))return void console.log("create layer 2");y()}}),[t.map,e.options,y]),Object(n.useEffect)((function(){var r;f.current&&null!=t&&null!==(r=t.map)&&void 0!==r&&r.map.getSource(m.current)&&t.map.map.getSource(m.current).setData(e.geojson)}),[e.geojson,t.map,e.options.type]),Object(n.useEffect)((function(){var r,n,a;if(t.map&&null!==(r=t.map)&&void 0!==r&&null!==(n=r.map)&&void 0!==n&&null!==(a=n.getLayer)&&void 0!==a&&a.call(n,m.current)&&f.current){var i,l=JSON.stringify(e.options.layout);if(e.options.layout&&l!==s.current){var c=JSON.parse(s.current);for(i in e.options.layout){var u;null!==(u=e.options.layout)&&void 0!==u&&u[i]&&e.options.layout[i]!==c[i]&&t.map.map.setLayoutProperty(m.current,i,e.options.layout[i])}s.current=l}var p=JSON.stringify(e.options.paint);if(p!==o.current){var d=JSON.parse(o.current);for(i in console.log("update paint props"),console.log(d),console.log(e.options.paint),e.options.paint){var y;null!==(y=e.options.paint)&&void 0!==y&&y[i]&&e.options.paint[i]!==d[i]&&t.map.map.setPaintProperty(m.current,i,e.options.paint[i])}o.current=p}}}),[e.options,t.map]);var g=function(){f.current=!1,t.cleanup()};return Object(n.useEffect)((function(){return function(){g()}}),[]),{map:t.map,layer:p,layerId:m.current,componentId:t.componentId,mapHook:t}}},173:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(0),a=r.n(n).a.createContext({}),o=a.Provider;t.b=a},174:function(e,t,r){"use strict";var n=r(0),a=r.n(n),o=r(34),i=r(133),s=(r(511),r(289)),l=r(578),c=r(145),u=Object(s.a)({}),p=[function(e){return a.a.createElement("div",{className:"fullscreen_map"},a.a.createElement(l.a,{theme:u},a.a.createElement(o.a,null,a.a.createElement("div",{style:{overflow:"hidden",position:"absolute",top:"0",bottom:"0",left:"0",right:"0"}},a.a.createElement(e,null),a.a.createElement("div",{className:"maps"},a.a.createElement(i.a,{mapId:"map_1",options:{zoom:14.5,style:"https://wms.wheregroup.com/tileserver/style/osm-liberty.json",center:[7.0851268,50.73884]}}),a.a.createElement(i.a,{mapId:"map_2",options:{zoom:14.5,style:"https://wms.wheregroup.com/tileserver/style/osm-bright.json",center:[7.0851268,50.73884]}}),a.a.createElement(c.a,{mapId:"map_1"}))))))}];t.a=p},20:function(e,t,r){"use strict";var n=r(0),a=r.n(n),o=r(34),i=r(133),s=(r(511),r(289)),l=r(578),c=r(145),u=Object(s.a)({}),p=[function(e){return a.a.createElement("div",{className:"fullscreen_map"},a.a.createElement(l.a,{theme:u},a.a.createElement(o.a,null,a.a.createElement(e,null),a.a.createElement(i.a,{options:{zoom:14.5,style:"https://wms.wheregroup.com/tileserver/style/osm-bright.json",center:[7.0851268,50.73884]},mapId:"map_1"}),a.a.createElement(c.a,{mapId:"map_1"}))))}];t.a=p},210:function(e,t,r){"use strict";var n,a,o,i=r(0),s=r.n(i),l=r(3),c=r.n(l),u=r(169),p=r(179),d=r(30);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var v=function(e){return s.a.createElement("svg",e,s.a.createElement("path",{style:{strokeWidth:".744756"},d:"M442.74 219.336 325.113 251.66l54.711 31.123c-21.994 41.593-32.85 84.883-38.33 127.897-6.862 50.94-5.957 103.997 20.238 155.465 5.973 11.727 13.659 23.597 24.39 35.066 2.659 2.84 5.655 5.754 9.128 8.682a70.913 70.913 0 0 0 3.973 3.11l.582.427 34.578-15.123-.338-.221c-.027-.015-.084-.059-.184-.13a38.703 38.703 0 0 1-1.56-1.25c-2.298-1.914-4.466-4.047-6.64-6.34-8.801-9.272-15.304-19.5-20.84-30.14-24.424-46.907-24.775-97.035-18.58-146.681 4.943-37.375 13.652-74.485 30.204-109.93l58.621 33.348z",transform:"matrix(.26458 0 0 .26458 -86.02 -58.033)"}))};v.defaultProps={width:"149.953",height:"394.094",viewBox:"0 0 39.675 104.271"};var O=function(e){return s.a.createElement("svg",e,s.a.createElement("path",{d:"m8.553 0 31.122 8.552L25.2 16.787c5.82 11.005 8.692 22.459 10.142 33.84 1.816 13.477 1.576 27.515-5.355 41.133-1.58 3.103-3.613 6.243-6.453 9.278a28.1 28.1 0 0 1-2.415 2.297 18.768 18.768 0 0 1-1.051.823l-.154.113-9.149-4.002.09-.058.048-.035c.124-.092.26-.203.413-.33a20.702 20.702 0 0 0 1.757-1.678c2.329-2.453 4.05-5.159 5.514-7.974 6.462-12.41 6.555-25.674 4.916-38.81-1.308-9.888-3.612-19.707-7.992-29.085L0 31.122z"}))};O.defaultProps={width:"149.953",height:"394.094",viewBox:"0 0 39.675 104.271"};var j=function(e){return s.a.createElement("svg",e,s.a.createElement("path",{d:"m37.984 0 37.983 117.357H0Z"}),s.a.createElement("path",{d:"m37.984 234.713 37.983-117.356H0Z"}))};j.defaultProps={width:"287.121",height:"887.106",viewBox:"0 0 75.967 234.713"};var I=u.a.div(n||(n=b(["\n  width: 40%;\n  display: flex;\n  align-items: center;\n\n  &:hover {\n    cursor: pointer;\n  }\n  path {\n    filter: drop-shadow(0px 0px 15px rgba(0, 0, 0, 0.2));\n  }\n  &:hover path {\n    filter: drop-shadow(0px 0px 13px rgba(255, 255, 255, 0.1));\n  }\n  path:nth-of-type(2) {\n    fill: #343434;\n  }\n  &:hover path:nth-of-type(2) {\n    fill: #434343;\n  }\n  path:nth-of-type(1) {\n    fill: #e90318;\n  }\n  &:hover path:nth-of-type(1) {\n    fill: #fb4052;\n  }\n"]))),w=u.a.div(a||(a=b(["\n  pointer-events: none;\n  display: flex;\n  z-index: 1002;\n  position: absolute;\n  align-items: center;\n\n  margin-left: -30%;\n  path:nth-of-type(2) {\n  }\n  svg g {\n    transform: translate(-76.7053, -29.7727) scale(2, 1);\n  }\n  svg {\n    z-index: 9990;\n    height: 150px;\n    width: 200px;\n  }\n"]))),S=u.a.div(o||(o=b(["\n  width: 30%;\n  margin-top: 14px;\n  z-index: 999;\n  display: flex;\n\n  svg:hover {\n    cursor: pointer;\n  }\n  svg:hover path {\n    fill: #ececec;\n    filter: drop-shadow(0px 0px 5px rgba(0, 0, 0, 0.1));\n  }\n  path {\n    fill: #bbb;\n  }\n  svg {\n    transform: scale(0.6);\n    z-index: 9990;\n    height: 172px;\n  }\n"]))),x=function(e){var t=Object(d.a)({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=g(Object(i.useState)(0),2),n=r[0],a=r[1];return Object(i.useEffect)((function(){if(t.map){var e=function(){var e,r;null!==(e=t.map)&&void 0!==e&&null!==(r=e.map)&&void 0!==r&&r.getBearing&&a(Math.round(t.map.map.getBearing()))};return t.map.on("rotate",e,t.componentId),e(),function(){var r;null===(r=t.map)||void 0===r||r.map.off("rotate",e)}}}),[t.map,e.mapId]),s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:Object(p.a)(m({zIndex:1e3,top:0,position:"absolute"},e.style))},s.a.createElement("div",{className:Object(p.a)(m({position:"absolute",border:"10px solid #bcbcbc",backgroundColor:"#717171",background:"radial-gradient(#717171, #414141)",height:"200px",width:"200px",borderRadius:"50%",display:"flex",justifyContent:"center",transform:"scale(0.2) translateX(-448px) translateY(-448px)"},e.backgroundStyle))},s.a.createElement(S,{className:Object(p.a)(m({},e.rotateRightStyle))},s.a.createElement(v,{onClick:function(){if(t.map){var e=Math.round(t.map.map.getBearing()),r=Math.round(e%90);e>0&&(r=90-r),0===r&&(r=90),t.map.map.setBearing(Math.round(e+Math.abs(r)))}}})),s.a.createElement(I,{className:Object(p.a)(m({},e.needleStyle)),onClick:function(){var e;null===(e=t.map)||void 0===e||e.map.setBearing(0)}},s.a.createElement(w,{style:{transform:"rotate("+n+"deg)"}},s.a.createElement(j,null))),s.a.createElement(S,{className:Object(p.a)(m({},e.rotateLeftStyle))},s.a.createElement(O,{onClick:function(){if(t.map){var e=Math.round(t.map.map.getBearing()),r=Math.round(e%90);e<0&&(r=90+r),0===r&&(r=90),t.map.map.setBearing(Math.round(e-Math.abs(r)))}}})))))};x.propTypes={idPrefix:c.a.string,style:c.a.object,backgroundStyle:c.a.object,needleStyle:c.a.object,rotateRightStyle:c.a.object,rotateLeftStyle:c.a.object},t.a=x;try{x.displayName="MlNavigationCompass",x.__docgenInfo={description:"Navigation component that displays a compass component which indicates the current oriantation of the map it is registered for and offers controls to turn the bearing 90° left/right or reset north to point up.\n\nAll style props are applied using @emotion/css to allow more complex css selectors.",displayName:"MlNavigationCompass",props:{mapId:{defaultValue:null,description:"",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:"",name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"any"}},backgroundStyle:{defaultValue:null,description:"",name:"backgroundStyle",required:!1,type:{name:"any"}},needleStyle:{defaultValue:null,description:"",name:"needleStyle",required:!1,type:{name:"any"}},rotateRightStyle:{defaultValue:null,description:"",name:"rotateRightStyle",required:!1,type:{name:"any"}},rotateLeftStyle:{defaultValue:null,description:"",name:"rotateLeftStyle",required:!1,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlNavigationCompass/MlNavigationCompass.tsx#MlNavigationCompass"]={docgenInfo:x.__docgenInfo,name:"MlNavigationCompass",path:"src/components/MlNavigationCompass/MlNavigationCompass.tsx#MlNavigationCompass"})}catch(e){}},211:function(e,t,r){"use strict";var n=r(0),a=r.n(n),o=r(30),i=r(69),s=r(219),l=r(542),c=r.n(l),u=r(52);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var g=function(e){var t,r,l=Object(o.a)({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),p=m(Object(n.useState)(!1),2),f=p[0],y=p[1],g=m(Object(n.useState)(),2),h=g[0],b=g[1],v=m(Object(n.useState)(!1),2),O=v[0],j=v[1],I=m(Object(n.useState)(),2),w=I[0],S=I[1],x=m(Object(n.useState)(0),2),C=x[0],M=x[1],E=Object(n.useCallback)((function(t){if(l.map&&(l.map.map.flyTo({center:[t.coords.longitude,t.coords.latitude],zoom:18,speed:1,curve:1}),e.showUserLocation)){var r=Object(u.point)([t.coords.longitude,t.coords.latitude]);b(r),S(Object(u.circle)(r,t.coords.accuracy/1e3))}}),[l.map,e]),P=function(){console.log("Access of user location denied"),j(!0)},A=Object(n.useMemo)((function(){if(h){var e=C-15,t=C+15,r=Object(u.lineArc)(h,.02,e,t,{steps:65});return r.geometry.coordinates.push(h.geometry.coordinates),r.geometry.coordinates.slice(0,0),r}}),[C,h]),L=function(e){M(-e.alpha)};return Object(n.useEffect)((function(){if(f){var e=L;return window.addEventListener("deviceorientation",e),function(){window.removeEventListener("deviceorientation",e)}}}),[f]),Object(n.useEffect)((function(){if(l.map&&f){var e=navigator.geolocation.watchPosition(E,P);return function(){navigator.geolocation.clearWatch(e)}}}),[l.map,f,E]),a.a.createElement(a.a.Fragment,null,f&&h&&a.a.createElement(i.a,{geojson:w,type:"fill",paint:d({"fill-color":"#cbd300","fill-opacity":.3},e.accuracyPaint),insertBeforeLayer:e.insertBeforeLayer}),f&&A&&a.a.createElement(i.a,{geojson:A,type:"fill",paint:{"fill-color":"#0000ff","fill-antialias":!1,"fill-opacity":.3},insertBeforeLayer:e.insertBeforeLayer}),f&&h&&a.a.createElement(i.a,{geojson:h,type:"circle",paint:d({"circle-color":"#009ee0","circle-radius":5,"circle-stroke-color":"#fafaff","circle-stroke-width":1},e.circlePaint),insertBeforeLayer:e.insertBeforeLayer}),a.a.createElement(s.a,{sx:d({zIndex:1002,color:f?e.onColor:e.offColor},e.style),disabled:O,onClick:function(){y(!f)}}," ",a.a.createElement(c.a,{sx:d({},null!==(t=e.style)&&void 0!==t&&t.fontSize?{fontSize:null===(r=e.style)||void 0===r?void 0:r.fontSize}:{})})," "))};g.defaultProps={mapId:void 0,style:{minWidth:"30px",minHeight:"30px",width:"30px",height:"30px",backgroundColor:"#414141",borderRadius:"23%",margin:.15,fontSize:"1.3em",":hover":{backgroundColor:"#515151",color:"#ececec"}},onColor:"#ececec",offColor:"#666",showAccuracyCircle:!0,showUserLocation:!0,showOrientation:!0},t.a=g;try{g.displayName="MlFollowGps",g.__docgenInfo={description:"Adds a button that makes the map follow the users GPS position using\nnavigator.geolocation.watchPosition if activated",displayName:"MlFollowGps",props:{mapId:{defaultValue:{value:"undefined"},description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:'The layerId of an existing layer this layer should be rendered visually beneath\nhttps://maplibre.org/maplibre-gl-js-docs/api/map/#map#addlayer - see "beforeId" property',name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},showUserLocation:{defaultValue:{value:"true"},description:"By default a dot will be shown on the map at the user's location. Set to false to disable.",name:"showUserLocation",required:!1,type:{name:"boolean | undefined"}},showOrientation:{defaultValue:{value:"true"},description:"By default a cone will be shown on the map at the user's location to indicate the device's orientation.\nSet to false to disable.",name:"showOrientation",required:!1,type:{name:"boolean | undefined"}},showAccuracyCircle:{defaultValue:{value:"true"},description:"By default, if showUserLocation is true, a transparent circle will be drawn around the user location\nindicating the accuracy (95% confidence level) of the user's location. Set to false to disable.",name:"showAccuracyCircle",required:!1,type:{name:"boolean | undefined"}},circlePaint:{defaultValue:null,description:'position circle paint property object, that is passed to the MlGeoJsonLayer responsible for drawing the accuracy circle.\nUse any available paint prop from layer type "fill".\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill',name:"circlePaint",required:!1,type:{name:"any"}},onColor:{defaultValue:{value:"#ececec"},description:"Active button font color",name:"onColor",required:!1,type:{name:"string | undefined"}},offColor:{defaultValue:{value:"#666"},description:"Inactive button font color",name:"offColor",required:!1,type:{name:"string | undefined"}},accuracyPaint:{defaultValue:null,description:'Accuracy paint property object, that is passed to the MlGeoJsonLayer responsible for drawing the accuracy circle.\nUse any available paint prop from layer type "fill".\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill',name:"accuracyPaint",required:!1,type:{name:"any"}},style:{defaultValue:{value:'{\n    minWidth: "30px",\n    minHeight: "30px",\n    width: "30px",\n    height: "30px",\n    backgroundColor: "#414141",\n    borderRadius: "23%",\n    margin: 0.15,\n    fontSize: "1.3em",\n    ":hover": {\n      backgroundColor: "#515151",\n      color: "#ececec",\n    },\n  }'},description:"CSS style object that is applied to the button component",name:"style",required:!1,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlFollowGps/MlFollowGps.tsx#MlFollowGps"]={docgenInfo:g.__docgenInfo,name:"MlFollowGps",path:"src/components/MlFollowGps/MlFollowGps.tsx#MlFollowGps"})}catch(e){}},213:function(e,t,r){"use strict";var n=r(0),a=r.n(n),o=r(3),i=r.n(o),s=r(52),l=r(1037),c=r(577),u=r(576),p=r(290),d=r(552),f=r.n(d),m=r(551),y=r.n(m),g=r(130),h=r(1031),b=r(1029),v=r(1032),O=r(173),j=r(550),I=r(376),w=r(30);function S(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||C(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw a}}return o}(e,t)||C(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){if(e){if("string"==typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M(e,t):void 0}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var E=function(e){var t=Object(n.useContext)(O.b),r=Object(n.useRef)(!1),o=Object(w.a)({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),i="importer-layer-lines",d="importer-layer-points",m=x(Object(n.useState)(!1),2),C=m[0],M=m[1],E=Object(n.useRef)(null),P=x(Object(n.useState)(0),2),A=P[0],L=P[1],T=x(Object(n.useState)([]),2),R=T[0],k=T[1],_=Object(n.useRef)(null),H=Object(I.a)("(max-width:900px)"),G=Object(n.useRef)(new g.Popup({closeButton:!1,closeOnClick:!0}));Object(n.useEffect)((function(){o.map&&!r.current&&(r.current=!0,o.map.addSource("import-source",{type:"geojson",data:t.data},o.componentId),o.map.addLayer({id:i,source:"import-source",type:"line",paint:{"line-width":4,"line-color":"rgba(212, 55, 23,0.5)"}},e.insertBeforeLayer,o.componentId),o.map.addLayer({id:d,source:"import-source",type:"circle",paint:{"circle-color":"rgba(72, 77, 99,0.5)","circle-radius":7},filter:["==","$type","Point"]},e.insertBeforeLayer,o.componentId),[i,d].forEach((function(e){o.map.setLayoutProperty(e,"visibility","visible")})),o.map.on("mouseenter",d,(function(e){for(var t=e.features[0].geometry.coordinates.slice(),r=e.features[0].properties.name;Math.abs(e.lngLat.lng-t[0])>180;)t[0]+=e.lngLat.lng>t[0]?360:-360;G.current.setLngLat(t).setHTML(r).addTo(o.map)}),o.componentId),o.map.on("mouseleave","places",(function(){o.map.getCanvas().style.cursor="",G.current.remove()}),o.componentId),o.map.setZoom(10))}),[o.map]),Object(n.useEffect)((function(){var e=E.current,t=function(e){L(1e3),N(e)},r=function(){L(0)},n=function(e){L(0),N(e)};return window.addEventListener("dragenter",t),window.addEventListener("dragover",N),e.addEventListener("dragleave",r),window.addEventListener("drop",n),function(){window.removeEventListener("dragenter",t),window.removeEventListener("dragover",N),e.removeEventListener("dragleave",r),window.removeEventListener("drop",n)}}));var N=function(e){e.preventDefault(),e.stopPropagation()};Object(n.useEffect)((function(){if(o.map){var t=e.visible?"visible":"none";[i,d].forEach((function(e){o.map.setLayoutProperty(e,"visibility",t)}))}}),[e.visible]);var D=function(e){if(o.map)try{k([]);var r=(new DOMParser).parseFromString(e,"application/xml");r.querySelector("metadata").childNodes.forEach((function(e){var t=e.textContent,r=e.nodeName;if("link"===e.nodeName&&(t=e.getAttribute("href")),t.trim().length){var n={title:r,value:t,id:(new Date).getTime()};k((function(e){return[].concat(S(e),[n])}))}}));var n=j.a.gpx(r);t.setData(n),o.map.getSource("import-source").setData(n);var a=Object(s.bbox)(n);o.map.fitBounds(a)}catch(e){console.log(e)}};return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{style:{position:"fixed",right:"5px",bottom:H?"40px":"25px",display:"flex",flexDirection:"column",gap:"5px",zIndex:1e3}},a.a.createElement(p.a,{onClick:function(){_.current.click()},style:{backgroundColor:"rgba(255,255,255,1)"},size:"large"},a.a.createElement("input",{ref:_,onChange:function(){var e=_.current.files[0];if(!e)return!1;var t=new FileReader;t.onload=function(e){D(e.currentTarget.result)},t.readAsText(e)},type:"file",id:"input",multiple:!0,style:{display:"none"}}),a.a.createElement(y.a,null)),a.a.createElement(p.a,{onClick:function(){M((function(e){return!e}))},style:{backgroundColor:"rgba(255,255,255,1)"},size:"large"},a.a.createElement(f.a,null))),a.a.createElement(u.a,{variant:"persistent",anchor:"left",open:C},a.a.createElement(c.a,{variant:"h6",style:{textAlign:"center",padding:"1em"},noWrap:!0},"Informationen zur Route"),a.a.createElement(l.a,null),a.a.createElement(h.a,null,R.map((function(e){return a.a.createElement(b.a,{key:"item--".concat(e.id)},a.a.createElement(v.a,{primary:e.value}))})))),a.a.createElement("div",{onDrop:function(e){if(e.preventDefault(),e.dataTransfer.items){if(e.dataTransfer.items.length>1)return!1;if("file"===e.dataTransfer.items[0].kind){var t=new FileReader;t.onload=function(e){D(e.currentTarget.result)};var r=e.dataTransfer.items[0].getAsFile();t.readAsText(r)}}},ref:E,style:{position:"absolute",left:"0",top:"0",backgroundColor:"rgba(255,255,255,0.5)",width:"100%",height:"100%",zIndex:A}},a.a.createElement(c.a,{variant:"h6",style:{top:"50%",position:"absolute",left:"50%",msTransform:"translate(-50%, -50%)",transform:" translate(-50%, -50%)"},noWrap:!0},"Gpx-Datei ablegen")))};E.defaultProps={visible:!0},E.propTypes={mapId:i.a.string,idPrefix:i.a.string,visible:i.a.bool,insertBeforeLayer:i.a.string},t.a=E},214:function(e,t,r){"use strict";var n=r(0),a=r.n(n),o=r(172);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=function(e){return Object(o.a)({idPrefix:"MlLayer-",layerId:e.layerId,mapId:e.mapId,options:s({type:"background",paint:{"background-color":"rgba(0,0,0,0)"}},e.options),insertBeforeLayer:e.insertBeforeLayer}),a.a.createElement(a.a.Fragment,null)};t.a=c;try{c.displayName="MlLayer",c.__docgenInfo={description:"Basic layer component that create a layer in a MapLibre-gl instance and keeps it updated according to it attribute configuration.",displayName:"MlLayer",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:'The layerId of an existing layer this layer should be rendered visually beneath\nhttps://maplibre.org/maplibre-gl-js-docs/api/map/#map#addlayer - see "beforeId" property',name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"Id of the layer that will be added by this component to the maplibre-gl instance",name:"layerId",required:!1,type:{name:"string | undefined"}},options:{defaultValue:null,description:"Javascript object that is passed the addLayer command as first parameter.",name:"options",required:!1,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlLayer/MlLayer.tsx#MlLayer"]={docgenInfo:c.__docgenInfo,name:"MlLayer",path:"src/components/MlLayer/MlLayer.tsx#MlLayer"})}catch(e){}},215:function(e,t,r){"use strict";var n=r(0),a=r.n(n),o=r(69),i=r(1035),s=r(76),l=r(30);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var p=function(e){var t=Object(l.a)({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=Object(s.a)({mapId:e.mapId,watch:{viewport:!0}}),u=Object(n.useRef)(null),p=c(Object(n.useState)({width:"400px",height:"500px"}),2),d=p[0],f=p[1],m=c(Object(n.useState)(),2),y=m[0],g=m[1];return Object(n.useEffect)((function(){var r,n;if(null!==(r=t.map)&&void 0!==r&&null!==(n=r.map)&&void 0!==n&&n.project){var a=t.map.map.project([e.lng,e.lat]);g(a)}}),[t.map,e.lng,e.lat,r.viewport]),Object(n.useEffect)((function(){var r,n,a,o,i,s,l,c,p,d,m,y;if(t.map&&null!==(r=u.current)&&void 0!==r&&null!==(n=r.contentWindow)&&void 0!==n&&null!==(a=n.document)&&void 0!==a&&null!==(o=a.body)&&void 0!==o&&o.scrollHeight){var g=t.map.map._container.clientHeight-t.map.map.project([e.lng,e.lat]).y,h=null===(i=u.current)||void 0===i||null===(s=i.contentWindow)||void 0===s||null===(l=s.document)||void 0===l||null===(c=l.body)||void 0===c?void 0:c.scrollHeight,b=null===(p=u.current)||void 0===p||null===(d=p.contentWindow)||void 0===d||null===(m=d.document)||void 0===m||null===(y=m.body)||void 0===y?void 0:y.scrollWidth;f({width:b+"px",height:(g<h?g:h)+"px"})}}),[e.lng,e.lat,e.content]),a.a.createElement(a.a.Fragment,null,a.a.createElement(o.a,{geojson:{type:"Feature",geometry:{type:"Point",coordinates:[e.lng,e.lat]},properties:{}},paint:{"circle-radius":14,"circle-color":"rgba(40,200,20,0.5)"},type:"circle",mapId:e.mapId}),y&&a.a.createElement(i.a,{sx:{opacity:.7,position:"fixed",display:"flex",left:y.x,top:y.y,width:d.width,height:d.height,"&:hover":{opacity:1},zIndex:-1}},a.a.createElement("iframe",{style:{width:"100%"},srcDoc:e.content,ref:u,sandbox:"allow-same-origin allow-popups-to-escape-sandbox",frameBorder:"0",title:t.componentId})))};p.defaultProps={mapId:void 0},t.a=p;try{p.displayName="MlMarker",p.__docgenInfo={description:'Adds a marker to the map and displays the contents of the "content" property in an iframe next to it',displayName:"MlMarker",props:{mapId:{defaultValue:{value:"undefined"},description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:'The layerId of an existing layer this layer should be rendered visually beneath\nhttps://maplibre.org/maplibre-gl-js-docs/api/map/#map#addlayer - see "beforeId" property',name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},lng:{defaultValue:null,description:"Longitude of the marker position",name:"lng",required:!0,type:{name:"number"}},lat:{defaultValue:null,description:"Latitude of the marker position",name:"lat",required:!0,type:{name:"number"}},content:{defaultValue:null,description:"Content of the description popup",name:"content",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlMarker/MlMarker.tsx#MlMarker"]={docgenInfo:p.__docgenInfo,name:"MlMarker",path:"src/components/MlMarker/MlMarker.tsx#MlMarker"})}catch(e){}},275:function(e,t,r){"use strict";var n=r(0),a=r.n(n),o=r(3),i=r.n(o),s=r(173);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var u=function(e){var t=e.children,r=l(Object(n.useState)({type:"FeatureCollection",features:[]}),2),o={data:r[0],setData:r[1],getEmptyFeatureCollection:function(){return{type:"FeatureCollection",features:[]}}};return a.a.createElement(s.a,{value:o},t)};u.propTypes={children:i.a.node.isRequired},t.a=u},276:function(e){e.exports=JSON.parse('{"type":"Feature","properties":{},"geometry":{"type":"LineString","coordinates":[[7.1074676513671875,50.74340774029213],[7.0992279052734375,50.756441089372665],[7.079315185546874,50.764693667025014],[7.045669555664062,50.77945780529241],[7.030563354492187,50.79161300845443],[7.0291900634765625,50.80940599750376],[7.0236968994140625,50.820685846099174],[7.0085906982421875,50.825891011253546],[6.9879913330078125,50.826758482363275],[6.97906494140625,50.835432306955276],[6.9824981689453125,50.84583876895451],[6.9962310791015625,50.85147463352982],[7.012023925781249,50.85710981721644],[7.021636962890625,50.86664473085768],[7.0367431640625,50.872278081520406],[7.0477294921875,50.877044231111014],[7.052536010742187,50.88397594225127]]}}')},278:function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var n=r(0),a=r.n(n),o=r(6),i=r(1028),s=r(576),l=r(562),c=r.n(l),u=r(561),p=r.n(u),d=r(290),f=r(376);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v=Object(i.a)((function(e){return{drawer:{flexGrow:1,zIndex:105,position:"absolute",top:0,left:0,bottom:0,backgroundColor:"#fafafa",display:"flex",flexDirection:"column",alignItems:"stretch",alignContent:"stretch"},drawerPaper:{position:"initial !important",boxSizing:"border-box",padding:"40px",visibility:"visible !important",zIndex:"initial !important"},drawerHeader:{alignContent:"flex-start",display:"flex"},drawerContent:{}}})),O=Object(o.a)("div")((function(e){e.theme;return{display:"flex",alignItems:"center"}}));function j(e){var t=v(),r=Object(f.a)("(max-width:900px)"),o=h(Object(n.useState)(!0),2),i=o[0],l=o[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement(d.a,{onClick:function(){l(!0)},style:{zIndex:101,position:"relative",padding:"20px"}},a.a.createElement(p.a,null)),a.a.createElement(s.a,{transitionDuration:0,className:t.drawer,variant:"persistent",anchor:"left",open:i,classes:{paper:t.drawerPaper},sx:y(y(y({},e.sx),{maxWidth:r?"90vw":"20vw"}),i?{}:{left:r?"-90vw":"-20vw"})},a.a.createElement(O,{className:t.drawerHeader},a.a.createElement(d.a,{onClick:function(){l(!1)}},a.a.createElement(c.a,{style:{}}))),a.a.createElement("div",{style:{maxWidth:"100%"}},e.children)))}},286:function(e){e.exports=JSON.parse('{"type":"FeatureCollection","features":[{"type":"Feature","properties":{},"geometry":{"coordinates":[[[7.08646747303149,50.74485058672653],[7.084287513691095,50.74371917250187],[7.084437772332876,50.743610683782215],[7.084640903561933,50.743721758552354],[7.085805654941254,50.74293993704128],[7.087023278906713,50.74218320888983],[7.087791368229503,50.74258090834434],[7.088796806075749,50.743261830692745],[7.089275088452752,50.743701110992674],[7.088087117762917,50.74409411011173],[7.087662548338368,50.743784963165815],[7.087184330538875,50.7440368518605],[7.087233860417484,50.744077781245316],[7.08714938625954,50.744122118772154],[7.087057544749172,50.74427276821896],[7.087104984084277,50.744509715654885],[7.08646747303149,50.74485058672653]]],"type":"Polygon"}}]}')},30:function(e,t,r){"use strict";var n=r(0),a=r(575),o=r(34),i=r(76);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.a=function(e){var t=Object(n.useContext)(o.b),r=s(Object(n.useState)(),2),l=r[0],c=r[1],u=Object(i.a)({mapId:e.mapId,watch:{viewport:!1,layers:!!e.waitForLayer,sources:!1},filter:{includeBaseLayers:!0}}),p=Object(n.useRef)(!1),d=Object(n.useRef)(void 0),f=Object(n.useRef)(Object(a.a)()),m=s(Object(n.useState)(!1),2),y=m[0],g=m[1],h=function(){d.current&&(d.current.cleanup(f.current),d.current=void 0),p.current=!1,g(!1)};return Object(n.useEffect)((function(){return h}),[]),Object(n.useEffect)((function(){if(t.mapExists(e.mapId)&&!p.current){if(e.waitForLayer){var r,n=!1;if(null==u||null===(r=u.layers)||void 0===r||r.forEach((function(t){t.id===e.waitForLayer&&(n=!0)})),!n)return}p.current=!0,d.current=t.getMap(e.mapId),c(d.current),g(!0)}}),[t.mapIds,u.layers,t,e.waitForLayer,e.mapId]),{map:l,mapIsReady:y,componentId:f.current,layers:u.layers,cleanup:h}}},511:function(e,t,r){var n=r(128),a=r(955);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1};n(a,o);e.exports=a.locals||{}},550:function(e,t,r){"use strict";(function(e){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=function(){var t,a=/\s*/g,o=/^\s*|\s*$/g,i=/\s+/;function s(e){if(!e||!e.length)return 0;for(var t=0,r=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t)|0;return r}function l(e,t){return e.getElementsByTagName(t)}function c(e,t){return e.getAttribute(t)}function u(e,t){return parseFloat(c(e,t))}function p(e,t){var r=l(e,t);return r.length?r[0]:null}function d(e){for(var t=0,r=[];t<e.length;t++)r[t]=parseFloat(e[t]);return r}function f(e){var t;return e&&(t=e).normalize&&t.normalize(),e&&e.textContent||""}function m(e,t){var r,n,a={};for(n=0;n<t.length;n++)(r=p(e,t[n]))&&(a[t[n]]=f(r));return a}function y(e,t){for(var r in t)e[r]=t[r]}function g(e){return d(e.replace(a,"").split(","))}function h(e){for(var t=e.replace(o,"").split(i),r=[],n=0;n<t.length;n++)r.push(g(t[n]));return r}function b(e){var t,r=[u(e,"lon"),u(e,"lat")],n=p(e,"ele"),a=p(e,"gpxtpx:hr")||p(e,"hr"),o=p(e,"time");return n&&(t=parseFloat(f(n)),isNaN(t)||r.push(t)),{coordinates:r,time:o?f(o):null,heartRate:a?parseFloat(f(a)):null}}if("undefined"!=typeof XMLSerializer)t=new XMLSerializer;else{var v="object"===(void 0===e?"undefined":n(e))&&!e.browser,O="object"===("undefined"==typeof Titanium?"undefined":n(Titanium));if("object"!==("undefined"==typeof exports?"undefined":n(exports))||!v&&!O)throw new Error("Unable to initialize serializer");t=new(r(973).XMLSerializer)}function j(e){return void 0!==e.xml?e.xml:t.serializeToString(e)}return{kml:function(e){for(var t={type:"FeatureCollection",features:[]},r={},n={},a={},o=["Polygon","LineString","Point","Track","gx:Track"],i=l(e,"Placemark"),u=l(e,"Style"),m=l(e,"StyleMap"),y=0;y<u.length;y++){var b=s(j(u[y])).toString(16);r["#"+c(u[y],"id")]=b,n[b]=u[y]}for(var v=0;v<m.length;v++){r["#"+c(m[v],"id")]=s(j(m[v])).toString(16);for(var O=l(m[v],"Pair"),I={},w=0;w<O.length;w++)I[f(p(O[w],"key"))]=f(p(O[w],"styleUrl"));a["#"+c(m[v],"id")]=I}for(var S=0;S<i.length;S++)t.features=t.features.concat(M(i[S]));function x(e){var t,r;return"#"===(e=e||"").substr(0,1)&&(e=e.substr(1)),6!==e.length&&3!==e.length||(t=e),8===e.length&&(r=parseInt(e.substr(0,2),16)/255,t="#"+e.substr(6,2)+e.substr(4,2)+e.substr(2,2)),[t,isNaN(r)?void 0:r]}function C(e){var t=l(e,"coord"),r=[],n=[];0===t.length&&(t=l(e,"gx:coord"));for(var a=0;a<t.length;a++)r.push(d(f(t[a]).split(" ")));for(var o=l(e,"when"),i=0;i<o.length;i++)n.push(f(o[i]));return{coords:r,times:n}}function M(e){var t,i=function e(t){var r,n,a,i,s,c=[],u=[];if(p(t,"MultiGeometry"))return e(p(t,"MultiGeometry"));if(p(t,"MultiTrack"))return e(p(t,"MultiTrack"));if(p(t,"gx:MultiTrack"))return e(p(t,"gx:MultiTrack"));for(a=0;a<o.length;a++)if(n=l(t,o[a]))for(i=0;i<n.length;i++)if(r=n[i],"Point"===o[a])c.push({type:"Point",coordinates:g(f(p(r,"coordinates")))});else if("LineString"===o[a])c.push({type:"LineString",coordinates:h(f(p(r,"coordinates")))});else if("Polygon"===o[a]){var d=l(r,"LinearRing"),m=[];for(s=0;s<d.length;s++)m.push(h(f(p(d[s],"coordinates"))));c.push({type:"Polygon",coordinates:m})}else if("Track"===o[a]||"gx:Track"===o[a]){var y=C(r);c.push({type:"LineString",coordinates:y.coords}),y.times.length&&u.push(y.times)}return{geoms:c,coordTimes:u}}(e),s={},u=f(p(e,"name")),d=f(p(e,"address")),m=f(p(e,"styleUrl")),y=f(p(e,"description")),b=p(e,"TimeSpan"),v=p(e,"TimeStamp"),O=p(e,"ExtendedData"),j=p(e,"LineStyle"),I=p(e,"PolyStyle"),w=p(e,"visibility");if(!i.geoms.length)return[];if(u&&(s.name=u),d&&(s.address=d),m){"#"!==m[0]&&(m="#"+m),s.styleUrl=m,r[m]&&(s.styleHash=r[m]),a[m]&&(s.styleMapHash=a[m],s.styleHash=r[a[m].normal]);var S=n[s.styleHash];if(S){j||(j=p(S,"LineStyle")),I||(I=p(S,"PolyStyle"));var M=p(S,"IconStyle");if(M){var E=p(M,"Icon");if(E){var P=f(p(E,"href"));P&&(s.icon=P)}}}}if(y&&(s.description=y),b){var A=f(p(b,"begin")),L=f(p(b,"end"));s.timespan={begin:A,end:L}}if(v&&(s.timestamp=f(p(v,"when"))),j){var T=x(f(p(j,"color"))),R=T[0],k=T[1],_=parseFloat(f(p(j,"width")));R&&(s.stroke=R),isNaN(k)||(s["stroke-opacity"]=k),isNaN(_)||(s["stroke-width"]=_)}if(I){var H=x(f(p(I,"color"))),G=H[0],N=H[1],D=f(p(I,"fill")),F=f(p(I,"outline"));G&&(s.fill=G),isNaN(N)||(s["fill-opacity"]=N),D&&(s["fill-opacity"]="1"===D?s["fill-opacity"]||1:0),F&&(s["stroke-opacity"]="1"===F?s["stroke-opacity"]||1:0)}if(O){var B=l(O,"Data"),z=l(O,"SimpleData");for(t=0;t<B.length;t++)s[B[t].getAttribute("name")]=f(p(B[t],"value"));for(t=0;t<z.length;t++)s[z[t].getAttribute("name")]=f(z[t])}w&&(s.visibility=f(w)),i.coordTimes.length&&(s.coordTimes=1===i.coordTimes.length?i.coordTimes[0]:i.coordTimes);var U={type:"Feature",geometry:1===i.geoms.length?i.geoms[0]:{type:"GeometryCollection",geometries:i.geoms},properties:s};return c(e,"id")&&(U.id=c(e,"id")),[U]}return t},gpx:function(e){var t,r,n=l(e,"trk"),a=l(e,"rte"),o=l(e,"wpt"),i={type:"FeatureCollection",features:[]};for(t=0;t<n.length;t++)(r=d(n[t]))&&i.features.push(r);for(t=0;t<a.length;t++)(r=g(a[t]))&&i.features.push(r);for(t=0;t<o.length;t++)i.features.push(h(o[t]));function s(e,t){for(var r=0;r<t;r++)e.push(null);return e}function u(e,t){var r=l(e,t),n=[],a=[],o=[],i=r.length;if(i<2)return{};for(var c=0;c<i;c++){var u=b(r[c]);n.push(u.coordinates),u.time&&a.push(u.time),(u.heartRate||o.length)&&(o.length||s(o,c),o.push(u.heartRate||null))}return{line:n,times:a,heartRates:o}}function d(e){for(var t,r=l(e,"trkseg"),n=[],a=[],o=[],i=0;i<r.length;i++)if((t=u(r[i],"trkpt"))&&(t.line&&n.push(t.line),t.times&&t.times.length&&a.push(t.times),o.length||t.heartRates&&t.heartRates.length)){if(!o.length)for(var c=0;c<i;c++)o.push(s([],n[c].length));t.heartRates&&t.heartRates.length?o.push(t.heartRates):o.push(s([],t.line.length||0))}if(0!==n.length){var d=O(e);return y(d,v(p(e,"extensions"))),a.length&&(d.coordTimes=1===n.length?a[0]:a),o.length&&(d.heartRates=1===n.length?o[0]:o),{type:"Feature",properties:d,geometry:{type:1===n.length?"LineString":"MultiLineString",coordinates:1===n.length?n[0]:n}}}}function g(e){var t=u(e,"rtept");if(t.line){var r=O(e);return y(r,v(p(e,"extensions"))),{type:"Feature",properties:r,geometry:{type:"LineString",coordinates:t.line}}}}function h(e){var t=O(e);return y(t,m(e,["sym"])),{type:"Feature",properties:t,geometry:{type:"Point",coordinates:b(e).coordinates}}}function v(e){var t={};if(e){var r=p(e,"line");if(r){var n=f(p(r,"color")),a=parseFloat(f(p(r,"opacity"))),o=parseFloat(f(p(r,"width")));n&&(t.stroke=n),isNaN(a)||(t["stroke-opacity"]=a),isNaN(o)||(t["stroke-width"]=96*o/25.4)}}return t}function O(e){var t=m(e,["name","cmt","desc","type","time","keywords"]),r=l(e,"link");r.length&&(t.links=[]);for(var n,a=0;a<r.length;a++)y(n={href:c(r[a],"href")},m(r[a],["text","type"])),t.links.push(n);return t}return i}}}();t.a=a}).call(this,r(153))},554:function(e,t,r){e.exports=r.p+"static/media/wg-marker.bf3eeb2d.png"},563:function(e){e.exports=JSON.parse('{"type":"Feature","properties":{},"geometry":{"type":"LineString","coordinates":[[7.0635223388671875,50.71385204707258],[7.06146240234375,50.709721458354075],[7.063865661621094,50.70298129536074],[7.064552307128906,50.69906720767511],[7.059059143066406,50.69428287906098],[7.05596923828125,50.68797551838366],[7.0580291748046875,50.680797145321655],[7.062835693359375,50.67514068397085],[7.060432434082031,50.6686131506577],[7.051849365234375,50.659255436656736],[7.044639587402344,50.6512019574539],[7.0484161376953125,50.64271166020676],[7.0566558837890625,50.63748609931014]]}}')},567:function(e){e.exports=JSON.parse('{"type":"Feature","properties":{},"geometry":{"type":"LineString","coordinates":[[7.1074676513671875,50.74340774029213],[7.0992279052734375,50.756441089372665],[7.079315185546874,50.764693667025014],[7.045669555664062,50.77945780529241],[7.030563354492187,50.79161300845443],[7.0291900634765625,50.80940599750376],[7.0236968994140625,50.820685846099174],[7.0085906982421875,50.825891011253546],[6.9879913330078125,50.826758482363275],[6.97906494140625,50.835432306955276],[6.9824981689453125,50.84583876895451],[6.9962310791015625,50.85147463352982],[7.012023925781249,50.85710981721644],[7.021636962890625,50.86664473085768],[7.0367431640625,50.872278081520406],[7.0477294921875,50.877044231111014],[7.052536010742187,50.88397594225127]]}}')},568:function(e){e.exports=JSON.parse('{"type":"Feature","properties":{},"geometry":{"type":"LineString","coordinates":[[7.0635223388671875,50.71385204707258],[7.06146240234375,50.709721458354075],[7.063865661621094,50.70298129536074],[7.064552307128906,50.69906720767511],[7.059059143066406,50.69428287906098],[7.05596923828125,50.68797551838366],[7.0580291748046875,50.680797145321655],[7.062835693359375,50.67514068397085],[7.060432434082031,50.6686131506577],[7.051849365234375,50.659255436656736],[7.044639587402344,50.6512019574539],[7.0484161376953125,50.64271166020676],[7.0566558837890625,50.63748609931014]]}}')},569:function(e){e.exports=JSON.parse('{"type":"FeatureCollection","features":[{"type":"Feature","properties":{},"geometry":{"coordinates":[[[7.08646747303149,50.74485058672653],[7.084287513691095,50.74371917250187],[7.084437772332876,50.743610683782215],[7.084640903561933,50.743721758552354],[7.085805654941254,50.74293993704128],[7.087023278906713,50.74218320888983],[7.087791368229503,50.74258090834434],[7.088796806075749,50.743261830692745],[7.089275088452752,50.743701110992674],[7.088087117762917,50.74409411011173],[7.087662548338368,50.743784963165815],[7.087184330538875,50.7440368518605],[7.087233860417484,50.744077781245316],[7.08714938625954,50.744122118772154],[7.087057544749172,50.74427276821896],[7.087104984084277,50.744509715654885],[7.08646747303149,50.74485058672653]]],"type":"Polygon"}}]}')},633:function(e,t,r){r(634),r(783),r(784),r(997),r(990),r(1001),r(1002),r(1003),r(998),r(993),r(1004),r(992),r(994),r(1005),e.exports=r(949)},69:function(e,t,r){"use strict";var n=r(0),a=r.n(n),o=r(172),i=r(575),s=function(e,t){switch(e){case"fill":return null!=t&&t.fill?t.fill:{"fill-color":"rgba(10,240,256,0.6)"};case"line":return null!=t&&t.line?t.line:{"line-color":"rgb(203,211,2)","line-width":5};case"circle":default:return null!=t&&t.circle?t.circle:{"circle-color":"rgba(10,240,256)","circle-stroke-color":"#fff","circle-stroke-width":2}}},l={Position:"circle",Point:"circle",MultiPoint:"circle",LineString:"line",MultiLineString:"line",Polygon:"fill",MultiPolygon:"fill",GeometryCollection:"circle"},c=function e(t){var r;return"Feature"===(null==t?void 0:t.type)?null!=l&&l[null==t||null===(r=t.geometry)||void 0===r?void 0:r.type]?l[t.geometry.type]:"circle":"FeatureCollection"===(null==t?void 0:t.type)?t.features.length?e(t.features[0]):"circle":"fill"};function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=function(e){var t=e.type||c(e.geojson);console.log(t);var r=Object(o.a)({mapId:e.mapId,layerId:e.layerId||"MlGeoJsonLayer-"+Object(i.a)(),geojson:e.geojson,options:p(p({paint:e.paint||s(t,e.defaultPaintOverrides),layout:e.layout||{}},e.options),{},{type:t}),insertBeforeLayer:e.insertBeforeLayer,onHover:e.onHover,onClick:e.onClick,onLeave:e.onLeave});return Object(n.useEffect)((function(){console.log(r.layer)}),[r.layer]),a.a.createElement(a.a.Fragment,null)};t.a=f;try{f.displayName="MlGeoJsonLayer",f.__docgenInfo={description:'Adds source and layer of types "line", "fill" or "circle" to display GeoJSON data on the map.',displayName:"MlGeoJsonLayer",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:'Id of an existing layer in the mapLibre instance to help specify the layer order\nThis layer will be visually beneath the layer with the "insertBeforeLayer" id.',name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"Id of the new layer and source that are added to the MapLibre instance",name:"layerId",required:!1,type:{name:"string | undefined"}},geojson:{defaultValue:null,description:"GeoJSON data that is supposed to be rendered by this component.",name:"geojson",required:!0,type:{name:"Feature<Geometry | GeometryCollection, Properties> | FeatureCollection<Geometry | GeometryCollection, Properties> | undefined"}},type:{defaultValue:null,description:'Type of the layer that will be added to the MapLibre instance.\nPossible values: "line", "circle", "fill"',name:"type",required:!1,type:{name:"string | undefined"}},paint:{defaultValue:null,description:"Paint property object, that is passed to the addLayer call.\nPossible props depend on the layer type.\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#line\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#circle\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill",name:"paint",required:!1,type:{name:"any"}},layout:{defaultValue:null,description:"Layout property object, that is passed to the addLayer call.\nPossible props depend on the layer type.\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#line\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#circle\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill",name:"layout",required:!1,type:{name:"any"}},options:{defaultValue:null,description:"Javascript object that is spread into the addLayer commands first parameter.",name:"options",required:!1,type:{name:"any"}},defaultPaintOverrides:{defaultValue:null,description:'Javascript object with optional properties "fill", "line", "circle" to override implicit layer type default paint properties.',name:"defaultPaintOverrides",required:!1,type:{name:"any"}},onHover:{defaultValue:null,description:"Hover event handler that is executed whenever a geometry rendered by this component is hovered.",name:"onHover",required:!1,type:{name:"Function | undefined"}},onClick:{defaultValue:null,description:"Click event handler that is executed whenever a geometry rendered by this component is clicked.",name:"onClick",required:!1,type:{name:"Function | undefined"}},onLeave:{defaultValue:null,description:"Leave event handler that is executed whenever a geometry rendered by this component is\nleft/unhovered.",name:"onLeave",required:!1,type:{name:"Function | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlGeoJsonLayer/MlGeoJsonLayer.tsx#MlGeoJsonLayer"]={docgenInfo:f.__docgenInfo,name:"MlGeoJsonLayer",path:"src/components/MlGeoJsonLayer/MlGeoJsonLayer.tsx#MlGeoJsonLayer"})}catch(e){}},693:function(e,t){},76:function(e,t,r){"use strict";var n=r(0),a=r(3),o=r.n(a),i=r(575),s=r(34);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e){var t=Object(n.useContext)(s.b),r=Object(n.useRef)(!1),a=Object(n.useRef)(),o=l(Object(n.useState)(),2),c=o[0],u=o[1],p=Object(n.useRef)(void 0),d=l(Object(n.useState)([]),2),f=d[0],m=d[1],y=Object(n.useRef)(),g=Object(n.useRef)(Object(i.a)()),h=Object(n.useCallback)((function(t){var r,n;return!((null==e||null===(r=e.filter)||void 0===r||!r.includeBaseLayers)&&t.baseLayer)&&(void 0===(null===(n=e.filter)||void 0===n?void 0:n.matchLayerIds)||(e.filter.matchLayerIds instanceof RegExp?e.filter.matchLayerIds.test(t.id):t.id.includes(e.filter.matchLayerIds)))}),[e.filter]),b=Object(n.useCallback)((function(){if(a.current){var e=a.current.wrapper.layerState.filter(h),t=JSON.stringify(e);y.current!==t&&(y.current=t,m(e))}}),[h]);return Object(n.useEffect)((function(){var e=g.current;return function(){a.current&&(a.current.cleanup(e),a.current=void 0),r.current=!1}}),[]),Object(n.useEffect)((function(){var n,o,i,s;t.mapExists(e.mapId)&&!r.current&&(r.current=!0,a.current=t.getMap(e.mapId),a.current&&(null!=e&&null!==(n=e.watch)&&void 0!==n&&n.viewport&&(u(a.current.wrapper.viewportState),a.current.wrapper.on("viewportchange",(function(){var e,t;p.current!==(null===(e=a.current)||void 0===e?void 0:e.wrapper.viewportStateString)&&u(null===(t=a.current)||void 0===t?void 0:t.wrapper.viewportState)}),g.current)),null!=e&&null!==(o=e.watch)&&void 0!==o&&o.layers&&(b(),a.current.wrapper.on("layerchange",b,{includeBaseLayers:null==e||null===(i=e.filter)||void 0===i?void 0:i.includeBaseLayers,matchLayerIds:null==e||null===(s=e.filter)||void 0===s?void 0:s.matchLayerIds},g.current))))}),[t.mapIds,t,e.mapId,b,e]),{layers:f,viewport:c}}u.defaultProps={mapId:void 0,watch:{layers:!0,sources:!1,viewport:!1},filter:{includeBaseLayers:!1}},u.propTypes={mapId:o.a.string,watch:o.a.shape({layers:o.a.bool,sources:o.a.bool,viewport:o.a.bool}),filter:o.a.shape({includeBaseLayers:o.a.bool,matchLayerIds:o.a.oneOfType([o.a.string,o.a.instanceOf(RegExp)]),matchSourceIds:o.a.oneOfType([o.a.string,o.a.instanceOf(RegExp)])})},t.a=u},784:function(e,t,r){"use strict";r.r(t);r(441)},84:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(0),a=r.n(n),o=r(1034),i=r(1036);function s(e){return a.a.createElement("div",{style:{flexGrow:1,zIndex:120,position:"absolute",top:0,left:0,right:0}},a.a.createElement(o.a,{sx:{minHeight:"62px",backgroundColor:"#f1f1f1"},color:"primary",position:"static"},a.a.createElement(i.a,null,e.children)))}},947:function(e,t,r){var n=r(128),a=r(948);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1};n(a,o);e.exports=a.locals||{}},948:function(e,t,r){(t=r(129)(!1)).push([e.i,".docs-story > div:first-child{\n  z-index:0;\n}\n\n.docs-story > div > div:first-child, .innerZoomElementWrapper, .innerZoomElementWrapper > div:first-child, .innerZoomElementWrapper > div:first-child > div:first-child{\n\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n.innerZoomElementWrapper > div > div > div:first-child{\n  height: 100% !important;\n}\n",""]),e.exports=t},949:function(e,t,r){"use strict";(function(e){(0,r(441).configure)([r(950),r(951)],e,!1)}).call(this,r(296)(e))},950:function(e,t){function r(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=950},951:function(e,t,r){var n={"./components/MapLibreMap/MapLibreMap.stories.js":952,"./components/MlComponentTemplate/MlComponentTemplate.stories.js":1006,"./components/MlCreatePdfButton/MlCreatePdfButton.stories.js":995,"./components/MlFeatureEditor/MlFeatureEditor.stories.js":991,"./components/MlFillExtrusionLayer/MlFillExtrusionLayer.stories.js":1007,"./components/MlFollowGps/MlFollowGps.stories.js":971,"./components/MlGPXViewer/MlGPXViewer.stories.js":972,"./components/MlGeoJsonLayer/MlGeoJsonLayer.stories.js":976,"./components/MlImageMarkerLayer/MlImageMarkerLayer.stories.js":1008,"./components/MlLayer/MlLayer.stories.js":977,"./components/MlLayerMagnify/MlLayerMagnify.stories.js":1009,"./components/MlLayerSwipe/MlLayerSwipe.stories.js":1010,"./components/MlMarker/MlMarker.stories.js":982,"./components/MlNavigationCompass/MlNavigationCompass.stories.js":983,"./components/MlNavigationTools/MlNavigationTools.stories.js":984,"./components/MlOsmLayer/MlOsmLayer.stories.js":1011,"./components/MlScaleReference/MlScaleReference.stories.js":1012,"./components/MlShareMapState/MlShareMapState.stories.js":1013,"./components/MlSpatialElevationProfile/MlSpatialElevationProfile.stories.js":1014,"./components/MlThreeJsLayer/MlThreeJsLayer.stories.js":996,"./components/MlTransitionGeoJsonLayer/MlTransitionGeoJsonLayer.stories.js":999,"./components/MlUseMapDebugger/MlUseMapDebugger.stories.js":1015,"./components/MlVectorTileLayer/MlVectorTileLayer.stories.js":1016,"./components/MlWmsFeatureInfoPopup/MlWmsFeatureInfoPopup.stories.js":1017,"./components/MlWmsLayer/MlWmsLayer.stories.js":985,"./components/MlWmsLoader/MlWmsLoader.stories.js":1e3,"./hooks/useMapState.stories.js":989};function a(e){var t=o(e);return r(t)}function o(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=o,e.exports=a,a.id=951},952:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return u}));var n=r(0),a=r.n(n),o=r(133),i=r(34);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c={title:"Core/MapLibreMap",component:o.a,argTypes:{options:{control:{type:"object"}}}};t.default=c;var u=function(e){return a.a.createElement(i.a,null,a.a.createElement(o.a,{options:e.options,style:{position:"absolute",height:"100vh",width:"100vw",top:0,right:0,left:0,bottom:0,zIndex:100}}))}.bind({});u.args={options:{style:"https://wms.wheregroup.com/tileserver/style/osm-bright.json",center:[8.607,53.1409349],zoom:14}},u.parameters={},u.parameters=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({storySource:{source:'(args) => (\n  <MapComponentsProvider>\n    <MapLibreMap\n      options={args.options}\n      style={{\n        position: "absolute",\n        height: "100vh",\n        width: "100vw",\n        top: 0,\n        right: 0,\n        left: 0,\n        bottom: 0,\n        zIndex: 100,\n      }}\n    />\n  </MapComponentsProvider>\n)'}},u.parameters)},955:function(e,t,r){(t=r(129)(!1)).push([e.i,"#root {\n  background-color: #000;\n  position: absolute;\n  min-height: 400px;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n.docs-story {\n  min-height: 400px;\n  display: flex;\n  align-items: stretch;\n}\n.docs-story > div:first-child {\n  width: 100%;\n}\n\n.App {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.fullscreen_map .mapContainer {\n  position: absolute;\n  height: 100vh;\n  width: 100vw;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  z-index: 100;\n}\n\n",""]),e.exports=t},961:function(e,t,r){var n=r(128),a=r(962);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1};n(a,o);e.exports=a.locals||{}},962:function(e,t,r){(t=r(129)(!1)).push([e.i,"",""]),e.exports=t},971:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return u}));var n=r(0),a=r.n(n),o=r(211),i=r(20);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c={title:"MapComponents/MlFollowGps",component:o.a,argTypes:{},decorators:i.a};t.default=c;var u=function(e){return a.a.createElement(o.a,null)}.bind({});u.parameters={},u.args={},u.parameters=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({storySource:{source:"(args) => <MlFollowGps />"}},u.parameters)},972:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return p}));var n=r(0),a=r.n(n),o=r(213),i=r(20),s=r(275);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u={title:"MapComponents/MlGPXViewer",component:o.a,argTypes:{options:{control:{type:"object"}}},decorators:i.a};t.default=u;var p=function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement(s.a,null,a.a.createElement(o.a,null)))}.bind({});p.parameters={},p.parameters=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({storySource:{source:"(args) => (\n  <>\n    <GeoJsonProvider>\n      <MlGPXViewer />\n    </GeoJsonProvider>\n  </>\n)"}},p.parameters)},976:function(e,t,r){"use strict";r.r(t),r.d(t,"Linestring",(function(){return m})),r.d(t,"Polygon",(function(){return y})),r.d(t,"DefaultPaintOverrides",(function(){return g}));var n=r(0),a=r.n(n),o=r(69),i=r(20),s=r(276),l=r(286);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}console.log(l);var d={title:"MapComponents/MlGeoJsonLayer",component:o.a,argTypes:{},decorators:i.a};t.default=d;var f=function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement(o.a,e))},m=function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement(o.a,{type:"line",geojson:s}))}.bind({});m.parameters={},m.args={type:""};var y=f.bind({});y.parameters={},y.args={geojson:l,paint:{"fill-color":"rgba(120,20,80,.5)"},type:""};var g=f.bind({});g.parameters={},g.args={defaultPaintOverrides:{fill:{"fill-color":"blue"},circle:{"circle-color":"red"},line:{"line-color":"orange"}},geojson:l,type:""},m.parameters=u({storySource:{source:'(props) => {\n  return (\n    <>\n      <MlGeoJsonLayer type="line" geojson={sample_geojson_1} />\n    </>\n  );\n}'}},m.parameters),y.parameters=u({storySource:{source:"(props) => {\n  return (\n    <>\n      <MlGeoJsonLayer {...props} />\n    </>\n  );\n}"}},y.parameters),g.parameters=u({storySource:{source:"(props) => {\n  return (\n    <>\n      <MlGeoJsonLayer {...props} />\n    </>\n  );\n}"}},g.parameters)},977:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return u}));var n=r(0),a=r.n(n),o=r(214),i=r(20);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c={title:"MapComponents/MlLayer",component:o.a,argTypes:{},decorators:i.a};t.default=c;var u=function(e){return a.a.createElement(o.a,null)}.bind({});u.parameters={},u.args={},u.parameters=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({storySource:{source:"(args) => <MlLayer />"}},u.parameters)},978:function(e,t,r){var n=r(128),a=r(979);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1};n(a,o);e.exports=a.locals||{}},979:function(e,t,r){(t=r(129)(!1)).push([e.i,".mapboxgl-compare {\n  background-color:#fff;\n  position:absolute;\n  width:2px;\n  height:100%;\n  z-index:110;\n  top: 0;\n  margin-left:0;\n  left:0;\n}\n.mapboxgl-compare .compare-swiper-vertical {\n  z-index:120;\n  background-color:#3887be;\n  box-shadow:inset 0 0 0 2px #fff;\n  display:inline-block;\n  border-radius:50%;\n  position:absolute;\n  width:60px;\n  height:60px;\n  top:50%;\n  left:-30px;\n  margin:-30px 1px 0;\n  color: #fff;\n  cursor:ew-resize;\n\tbackground-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiAgIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyIgICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgICB4bWxuczpzb2RpcG9kaT0iaHR0cDovL3NvZGlwb2RpLnNvdXJjZWZvcmdlLm5ldC9EVEQvc29kaXBvZGktMC5kdGQiICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiICAgd2lkdGg9IjYwIiAgIGhlaWdodD0iNjAiICAgdmVyc2lvbj0iMS4xIiAgIHZpZXdCb3g9IjAgMCA2MCA2MCIgICBpZD0ic3ZnNTQzNCIgICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjkxK2RldmVsK29zeG1lbnUgcjEyOTExIiAgIHNvZGlwb2RpOmRvY25hbWU9Imwtci5zdmciPiAgPG1ldGFkYXRhICAgICBpZD0ibWV0YWRhdGE1NDQ0Ij4gICAgPHJkZjpSREY+ICAgICAgPGNjOldvcmsgICAgICAgICByZGY6YWJvdXQ9IiI+ICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4gICAgICAgIDxkYzp0eXBlICAgICAgICAgICByZGY6cmVzb3VyY2U9Imh0dHA6Ly9wdXJsLm9yZy9kYy9kY21pdHlwZS9TdGlsbEltYWdlIiAvPiAgICAgICAgPGRjOnRpdGxlPjwvZGM6dGl0bGU+ICAgICAgPC9jYzpXb3JrPiAgICA8L3JkZjpSREY+ICA8L21ldGFkYXRhPiAgPGRlZnMgICAgIGlkPSJkZWZzNTQ0MiIgLz4gIDxzb2RpcG9kaTpuYW1lZHZpZXcgICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIgICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IiAgICAgYm9yZGVyb3BhY2l0eT0iMSIgICAgIG9iamVjdHRvbGVyYW5jZT0iMTAiICAgICBncmlkdG9sZXJhbmNlPSIxMCIgICAgIGd1aWRldG9sZXJhbmNlPSIxMCIgICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwIiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIgICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTI4NiIgICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9Ijc1MSIgICAgIGlkPSJuYW1lZHZpZXc1NDQwIiAgICAgc2hvd2dyaWQ9InRydWUiICAgICBpbmtzY2FwZTp6b29tPSI0IiAgICAgaW5rc2NhcGU6Y3g9IjI1Ljg4OTgzMSIgICAgIGlua3NjYXBlOmN5PSIzNC4zODE4MzMiICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMCIgICAgIGlua3NjYXBlOndpbmRvdy15PSIyMyIgICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjAiICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJzdmc1NDM0IiAgICAgaW5rc2NhcGU6b2JqZWN0LW5vZGVzPSJ0cnVlIiAgICAgaW5rc2NhcGU6c25hcC1zbW9vdGgtbm9kZXM9InRydWUiPiAgICA8aW5rc2NhcGU6Z3JpZCAgICAgICB0eXBlPSJ4eWdyaWQiICAgICAgIGlkPSJncmlkNTk4OSIgLz4gIDwvc29kaXBvZGk6bmFtZWR2aWV3PiAgPHBhdGggICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjFweDtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIiAgICAgZD0iTSAyNSAyNCBMIDE2IDMwIEwgMjUgMzYgTCAyNSAyNCB6IE0gMzUgMjQgTCAzNSAzNiBMIDQ0IDMwIEwgMzUgMjQgeiAiICAgICBpZD0icGF0aDU5OTUiIC8+PC9zdmc+);\n  }\n\n.mapboxgl-compare-horizontal {\n  position:relative;\n  width:100%;\n  height:2px;\n}\n.mapboxgl-compare .compare-swiper-horizontal {\n  background-color:#3887be;\n  box-shadow:inset 0 0 0 2px #fff;\n  display:inline-block;\n  border-radius:50%;\n  position:absolute;\n  width:60px;\n  height:60px;\n  top:50%;\n  left:50%;\n  margin:-30px 1px 0;\n  color: #fff;\n  cursor:ns-resize;\n  background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiAgIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyIgICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgICB4bWxuczpzb2RpcG9kaT0iaHR0cDovL3NvZGlwb2RpLnNvdXJjZWZvcmdlLm5ldC9EVEQvc29kaXBvZGktMC5kdGQiICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiICAgd2lkdGg9IjYwIiAgIGhlaWdodD0iNjAiICAgdmVyc2lvbj0iMS4xIiAgIHZpZXdCb3g9IjAgMCA2MCA2MCIgICBpZD0ic3ZnNTQzNCIgICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjkxK2RldmVsK29zeG1lbnUgcjEyOTExIiAgIHNvZGlwb2RpOmRvY25hbWU9Imwtci5zdmciPiAgPG1ldGFkYXRhICAgICBpZD0ibWV0YWRhdGE1NDQ0Ij4gICAgPHJkZjpSREY+ICAgICAgPGNjOldvcmsgICAgICAgICByZGY6YWJvdXQ9IiI+ICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4gICAgICAgIDxkYzp0eXBlICAgICAgICAgICByZGY6cmVzb3VyY2U9Imh0dHA6Ly9wdXJsLm9yZy9kYy9kY21pdHlwZS9TdGlsbEltYWdlIiAvPiAgICAgICAgPGRjOnRpdGxlPjwvZGM6dGl0bGU+ICAgICAgPC9jYzpXb3JrPiAgICA8L3JkZjpSREY+ICA8L21ldGFkYXRhPiAgPGRlZnMgICAgIGlkPSJkZWZzNTQ0MiIgLz4gIDxzb2RpcG9kaTpuYW1lZHZpZXcgICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIgICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IiAgICAgYm9yZGVyb3BhY2l0eT0iMSIgICAgIG9iamVjdHRvbGVyYW5jZT0iMTAiICAgICBncmlkdG9sZXJhbmNlPSIxMCIgICAgIGd1aWRldG9sZXJhbmNlPSIxMCIgICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwIiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIgICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTI4NiIgICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9Ijc1MSIgICAgIGlkPSJuYW1lZHZpZXc1NDQwIiAgICAgc2hvd2dyaWQ9InRydWUiICAgICBpbmtzY2FwZTp6b29tPSI0IiAgICAgaW5rc2NhcGU6Y3g9IjI1Ljg4OTgzMSIgICAgIGlua3NjYXBlOmN5PSIzNC4zODE4MzMiICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMCIgICAgIGlua3NjYXBlOndpbmRvdy15PSIyMyIgICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjAiICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJzdmc1NDM0IiAgICAgaW5rc2NhcGU6b2JqZWN0LW5vZGVzPSJ0cnVlIiAgICAgaW5rc2NhcGU6c25hcC1zbW9vdGgtbm9kZXM9InRydWUiPiAgICA8aW5rc2NhcGU6Z3JpZCAgICAgICB0eXBlPSJ4eWdyaWQiICAgICAgIGlkPSJncmlkNTk4OSIgLz4gIDwvc29kaXBvZGk6bmFtZWR2aWV3PiAgPHBhdGggICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjFweDtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIiAgICAgZD0iTSAyNSAyNCBMIDE2IDMwIEwgMjUgMzYgTCAyNSAyNCB6IE0gMzUgMjQgTCAzNSAzNiBMIDQ0IDMwIEwgMzUgMjQgeiAiICAgICBpZD0icGF0aDU5OTUiIC8+PC9zdmc+);\n  transform: rotate(90deg)\n}\n",""]),e.exports=t},980:function(e,t,r){var n=r(128),a=r(981);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1};n(a,o);e.exports=a.locals||{}},981:function(e,t,r){(t=r(129)(!1)).push([e.i,".mapboxgl-compare {\n  background-color:#fff;\n  position:absolute;\n  width:2px;\n  height:100%;\n  z-index:110;\n  top: 0;\n  margin-left:0;\n  left:0;\n}\n.mapboxgl-compare .compare-swiper-vertical {\n  z-index:120;\n  background-color:#3887be;\n  box-shadow:inset 0 0 0 2px #fff;\n  display:inline-block;\n  border-radius:50%;\n  position:absolute;\n  width:60px;\n  height:60px;\n  top:50%;\n  left:-30px;\n  margin:-30px 1px 0;\n  color: #fff;\n  cursor:ew-resize;\n\tbackground-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiAgIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyIgICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgICB4bWxuczpzb2RpcG9kaT0iaHR0cDovL3NvZGlwb2RpLnNvdXJjZWZvcmdlLm5ldC9EVEQvc29kaXBvZGktMC5kdGQiICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiICAgd2lkdGg9IjYwIiAgIGhlaWdodD0iNjAiICAgdmVyc2lvbj0iMS4xIiAgIHZpZXdCb3g9IjAgMCA2MCA2MCIgICBpZD0ic3ZnNTQzNCIgICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjkxK2RldmVsK29zeG1lbnUgcjEyOTExIiAgIHNvZGlwb2RpOmRvY25hbWU9Imwtci5zdmciPiAgPG1ldGFkYXRhICAgICBpZD0ibWV0YWRhdGE1NDQ0Ij4gICAgPHJkZjpSREY+ICAgICAgPGNjOldvcmsgICAgICAgICByZGY6YWJvdXQ9IiI+ICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4gICAgICAgIDxkYzp0eXBlICAgICAgICAgICByZGY6cmVzb3VyY2U9Imh0dHA6Ly9wdXJsLm9yZy9kYy9kY21pdHlwZS9TdGlsbEltYWdlIiAvPiAgICAgICAgPGRjOnRpdGxlPjwvZGM6dGl0bGU+ICAgICAgPC9jYzpXb3JrPiAgICA8L3JkZjpSREY+ICA8L21ldGFkYXRhPiAgPGRlZnMgICAgIGlkPSJkZWZzNTQ0MiIgLz4gIDxzb2RpcG9kaTpuYW1lZHZpZXcgICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIgICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IiAgICAgYm9yZGVyb3BhY2l0eT0iMSIgICAgIG9iamVjdHRvbGVyYW5jZT0iMTAiICAgICBncmlkdG9sZXJhbmNlPSIxMCIgICAgIGd1aWRldG9sZXJhbmNlPSIxMCIgICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwIiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIgICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTI4NiIgICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9Ijc1MSIgICAgIGlkPSJuYW1lZHZpZXc1NDQwIiAgICAgc2hvd2dyaWQ9InRydWUiICAgICBpbmtzY2FwZTp6b29tPSI0IiAgICAgaW5rc2NhcGU6Y3g9IjI1Ljg4OTgzMSIgICAgIGlua3NjYXBlOmN5PSIzNC4zODE4MzMiICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMCIgICAgIGlua3NjYXBlOndpbmRvdy15PSIyMyIgICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjAiICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJzdmc1NDM0IiAgICAgaW5rc2NhcGU6b2JqZWN0LW5vZGVzPSJ0cnVlIiAgICAgaW5rc2NhcGU6c25hcC1zbW9vdGgtbm9kZXM9InRydWUiPiAgICA8aW5rc2NhcGU6Z3JpZCAgICAgICB0eXBlPSJ4eWdyaWQiICAgICAgIGlkPSJncmlkNTk4OSIgLz4gIDwvc29kaXBvZGk6bmFtZWR2aWV3PiAgPHBhdGggICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjFweDtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIiAgICAgZD0iTSAyNSAyNCBMIDE2IDMwIEwgMjUgMzYgTCAyNSAyNCB6IE0gMzUgMjQgTCAzNSAzNiBMIDQ0IDMwIEwgMzUgMjQgeiAiICAgICBpZD0icGF0aDU5OTUiIC8+PC9zdmc+);\n  }\n\n.mapboxgl-compare-horizontal {\n  position:relative;\n  width:100%;\n  height:2px;\n}\n.mapboxgl-compare .compare-swiper-horizontal {\n  background-color:#3887be;\n  box-shadow:inset 0 0 0 2px #fff;\n  display:inline-block;\n  border-radius:50%;\n  position:absolute;\n  width:60px;\n  height:60px;\n  top:50%;\n  left:50%;\n  margin:-30px 1px 0;\n  color: #fff;\n  cursor:ns-resize;\n  background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiAgIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyIgICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgICB4bWxuczpzb2RpcG9kaT0iaHR0cDovL3NvZGlwb2RpLnNvdXJjZWZvcmdlLm5ldC9EVEQvc29kaXBvZGktMC5kdGQiICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiICAgd2lkdGg9IjYwIiAgIGhlaWdodD0iNjAiICAgdmVyc2lvbj0iMS4xIiAgIHZpZXdCb3g9IjAgMCA2MCA2MCIgICBpZD0ic3ZnNTQzNCIgICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjkxK2RldmVsK29zeG1lbnUgcjEyOTExIiAgIHNvZGlwb2RpOmRvY25hbWU9Imwtci5zdmciPiAgPG1ldGFkYXRhICAgICBpZD0ibWV0YWRhdGE1NDQ0Ij4gICAgPHJkZjpSREY+ICAgICAgPGNjOldvcmsgICAgICAgICByZGY6YWJvdXQ9IiI+ICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4gICAgICAgIDxkYzp0eXBlICAgICAgICAgICByZGY6cmVzb3VyY2U9Imh0dHA6Ly9wdXJsLm9yZy9kYy9kY21pdHlwZS9TdGlsbEltYWdlIiAvPiAgICAgICAgPGRjOnRpdGxlPjwvZGM6dGl0bGU+ICAgICAgPC9jYzpXb3JrPiAgICA8L3JkZjpSREY+ICA8L21ldGFkYXRhPiAgPGRlZnMgICAgIGlkPSJkZWZzNTQ0MiIgLz4gIDxzb2RpcG9kaTpuYW1lZHZpZXcgICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIgICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IiAgICAgYm9yZGVyb3BhY2l0eT0iMSIgICAgIG9iamVjdHRvbGVyYW5jZT0iMTAiICAgICBncmlkdG9sZXJhbmNlPSIxMCIgICAgIGd1aWRldG9sZXJhbmNlPSIxMCIgICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwIiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIgICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTI4NiIgICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9Ijc1MSIgICAgIGlkPSJuYW1lZHZpZXc1NDQwIiAgICAgc2hvd2dyaWQ9InRydWUiICAgICBpbmtzY2FwZTp6b29tPSI0IiAgICAgaW5rc2NhcGU6Y3g9IjI1Ljg4OTgzMSIgICAgIGlua3NjYXBlOmN5PSIzNC4zODE4MzMiICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMCIgICAgIGlua3NjYXBlOndpbmRvdy15PSIyMyIgICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjAiICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJzdmc1NDM0IiAgICAgaW5rc2NhcGU6b2JqZWN0LW5vZGVzPSJ0cnVlIiAgICAgaW5rc2NhcGU6c25hcC1zbW9vdGgtbm9kZXM9InRydWUiPiAgICA8aW5rc2NhcGU6Z3JpZCAgICAgICB0eXBlPSJ4eWdyaWQiICAgICAgIGlkPSJncmlkNTk4OSIgLz4gIDwvc29kaXBvZGk6bmFtZWR2aWV3PiAgPHBhdGggICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjFweDtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIiAgICAgZD0iTSAyNSAyNCBMIDE2IDMwIEwgMjUgMzYgTCAyNSAyNCB6IE0gMzUgMjQgTCAzNSAzNiBMIDQ0IDMwIEwgMzUgMjQgeiAiICAgICBpZD0icGF0aDU5OTUiIC8+PC9zdmc+);\n  transform: rotate(90deg)\n}\n",""]),e.exports=t},982:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return u}));var n=r(0),a=r.n(n),o=r(215),i=r(20);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c={title:"MapComponents/MlMarker",component:o.a,decorators:i.a};t.default=c;var u=function(e){return a.a.createElement(o.a,e)}.bind({});u.args={content:"WhereGroup",lng:7.0851268,lat:50.73884,mapId:"map_1"},u.parameters=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({storySource:{source:"(args) => <MlMarker {...args}/>"}},u.parameters)},983:function(e,t,r){"use strict";r.r(t),r.d(t,"Standard",(function(){return d})),r.d(t,"StyleExample",(function(){return f}));var n=r(0),a=r.n(n),o=r(210),i=r(20);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u={title:"MapComponents/MlNavigationCompass",component:o.a,decorators:i.a};t.default=u;var p=function(e){return a.a.createElement(o.a,e)},d=p.bind({});d.args={style:{transform:"scale(4)",left:"50%",marginLeft:"-100px",top:"50%",marginTop:"-100px"}};var f=p.bind({});f.args={style:{transform:"scale(4)",left:"50%",marginLeft:"-100px",top:"50%",marginTop:"-100px"},backgroundStyle:{border:"12px solid #adad44",background:"radial-gradient(#417741, #111)"},needleStyle:{":hover svg path:nth-of-type(1)":{fill:"#eded66"},":hover svg path:nth-of-type(2)":{fill:"#252f1b"},"svg path:nth-of-type(1)":{fill:"#adad44"},"svg path:nth-of-type(2)":{fill:"#1a1d15"}},rotateRightStyle:{"svg:hover path":{fill:"#ededb1"}},rotateLeftStyle:{"svg:hover path":{fill:"#ededb1"}}},d.parameters=l({storySource:{source:"(props) => <MlNavigationCompass {...props} />"}},d.parameters),f.parameters=l({storySource:{source:"(props) => <MlNavigationCompass {...props} />"}},f.parameters)},984:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return u}));var n=r(0),a=r.n(n),o=r(145),i=r(20);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c={title:"MapComponents/MlNavigationTools",component:o.a,argTypes:{url:{},layer:{}},decorators:i.a};t.default=c;var u=function(e){return a.a.createElement(o.a,null)}.bind({});u.parameters={},u.args={},u.parameters=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({storySource:{source:"(args) => <MlNavigationTools />"}},u.parameters)},985:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return y}));var n=r(0),a=r.n(n),o=r(113),i=r(84),s=r(219),l=r(174);r(986);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var m={title:"MapComponents/MlWmsLayer",component:o.a,argTypes:{url:{},layer:{}},decorators:l.a};t.default=m;var y=function(e){var t=d(Object(n.useState)(!0),2),r=t[0],l=t[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement(i.a,null,a.a.createElement(s.a,{color:"primary",variant:r?"contained":"outlined",onClick:function(){return l(!r)}},"WMS")),a.a.createElement(o.a,p({visible:r},e)))}.bind({});y.parameters={},y.args={mapId:"map_2",url:"https://www.wms.nrw.de/geobasis/wms_nw_uraufnahme",urlParameters:{layers:"nw_uraufnahme_rw"}},y.parameters=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({storySource:{source:'(props) => {\n  const [showLayer, setShowLayer] = useState(true);\n\n  return (\n    <>\n      <TopToolbar>\n        <Button\n          color="primary"\n          variant={showLayer ? "contained" : "outlined"}\n          onClick={() => setShowLayer(!showLayer)}\n        >\n          WMS\n        </Button>\n      </TopToolbar>\n      <MlWmsLayer visible={showLayer} {...props} />\n    </>\n  );\n}'}},y.parameters)},986:function(e,t,r){var n=r(128),a=r(987);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1};n(a,o);e.exports=a.locals||{}},987:function(e,t,r){(t=r(129)(!1)).push([e.i,"/**\n * #root {\n  background-color: #000;\n  position: absolute;\n  min-height: 400px;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n.docs-story {\n  min-height: 400px;\n  display: flex;\n  align-items: stretch;\n}\n.docs-story > div:first-child {\n  width: 100%;\n}\n.MuiToolbar-root .MuiButtonBase-root {\n  margin-right: 8px;\n}\n\n.App {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.mapContainer {\n  position: absolute;\n  height: 100vh;\n  width: 100vw;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  z-index: 100;\n}\n\n.overlay {\n  width: 100%;\n  display: inline-flex;\n  position: fixed;\n  top: 0;\n  left: 0;\n  background-color: transparent;\n  z-index: 1 !important;\n  padding-top: 1rem;\n  padding-left: 1rem;\n}\n.MuiToolbar-root .MuiButtonBase-root {\n  margin-right: 8px;\n}\n*/\n",""]),e.exports=t},989:function(e,t,r){"use strict";r.r(t),r.d(t,"ViewportOnly",(function(){return d})),r.d(t,"IncludeBaseLayers",(function(){return f})),r.d(t,"MatchLayerIdString",(function(){return m})),r.d(t,"MatchLayerIdRegexp",(function(){return y})),r.d(t,"NonBaseLayersOnly",(function(){return g}));var n=r(0),a=r.n(n),o=r(76),i=r(20);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u={title:"Hooks/UseMapState",component:o.a,argTypes:{},decorators:i.a};t.default=u;var p=function(e){var t=Object(o.a)(l({},e));return Object(n.useEffect)((function(){}),[t.layers]),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{style:{position:"fixed",zIndex:1e4,display:"flex",flexWrap:"wrap",top:0,left:0,right:0,bottom:0,maxHeight:"100VH",backgroundColor:"rgba(80,80,80,.8)",padding:"50px",fontSize:"20px",color:"#51ff09",overflow:"hidden",pointerEvents:"none"}},a.a.createElement("pre",null,JSON.stringify(t,null,"  "))))},d=p.bind({});d.parameters={},d.args={mapId:"map_1",watch:{viewport:!0,layers:!1,sources:!1}};var f=p.bind({});f.parameters={},f.args={mapId:"map_1",watch:{viewport:!1,layers:!0,sources:!1},filter:{includeBaseLayers:!0}};var m=p.bind({});m.parameters={},m.args={mapId:"map_1",watch:{viewport:!1,layers:!0,sources:!1},filter:{includeBaseLayers:!0,matchLayerIds:"water"}};var y=p.bind({});y.parameters={},y.args={mapId:"map_1",watch:{viewport:!1,layers:!0,sources:!1},filter:{includeBaseLayers:!0,matchLayerIds:/water/}};var g=p.bind({});g.parameters={},g.args={mapId:"map_1",watch:{viewport:!1,layers:!0,sources:!1},filter:{includeBaseLayers:!1}},d.parameters=l({storySource:{source:'(props) => {\n  const mapState = useMapState({ ...props });\n\n  useEffect(() => {\n\n  \n  }, [mapState.layers])\n\n  return (\n    <>\n    <div\n        style={{\n          position: "fixed",\n          zIndex: 10000,\n          display: "flex",\n          flexWrap: "wrap",\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          maxHeight:\'100VH\',\n          backgroundColor: "rgba(80,80,80,.8)",\n          padding: "50px",\n          fontSize: "20px",\n          color: "#51ff09",\n          overflow:\'hidden\',\n          pointerEvents: "none",\n        }}\n    >\n\n        <pre>{JSON.stringify(mapState, null, "  ")}</pre>\n\n\n    </div>\n    </>\n  );\n}'}},d.parameters),f.parameters=l({storySource:{source:'(props) => {\n  const mapState = useMapState({ ...props });\n\n  useEffect(() => {\n\n  \n  }, [mapState.layers])\n\n  return (\n    <>\n    <div\n        style={{\n          position: "fixed",\n          zIndex: 10000,\n          display: "flex",\n          flexWrap: "wrap",\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          maxHeight:\'100VH\',\n          backgroundColor: "rgba(80,80,80,.8)",\n          padding: "50px",\n          fontSize: "20px",\n          color: "#51ff09",\n          overflow:\'hidden\',\n          pointerEvents: "none",\n        }}\n    >\n\n        <pre>{JSON.stringify(mapState, null, "  ")}</pre>\n\n\n    </div>\n    </>\n  );\n}'}},f.parameters),m.parameters=l({storySource:{source:'(props) => {\n  const mapState = useMapState({ ...props });\n\n  useEffect(() => {\n\n  \n  }, [mapState.layers])\n\n  return (\n    <>\n    <div\n        style={{\n          position: "fixed",\n          zIndex: 10000,\n          display: "flex",\n          flexWrap: "wrap",\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          maxHeight:\'100VH\',\n          backgroundColor: "rgba(80,80,80,.8)",\n          padding: "50px",\n          fontSize: "20px",\n          color: "#51ff09",\n          overflow:\'hidden\',\n          pointerEvents: "none",\n        }}\n    >\n\n        <pre>{JSON.stringify(mapState, null, "  ")}</pre>\n\n\n    </div>\n    </>\n  );\n}'}},m.parameters),y.parameters=l({storySource:{source:'(props) => {\n  const mapState = useMapState({ ...props });\n\n  useEffect(() => {\n\n  \n  }, [mapState.layers])\n\n  return (\n    <>\n    <div\n        style={{\n          position: "fixed",\n          zIndex: 10000,\n          display: "flex",\n          flexWrap: "wrap",\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          maxHeight:\'100VH\',\n          backgroundColor: "rgba(80,80,80,.8)",\n          padding: "50px",\n          fontSize: "20px",\n          color: "#51ff09",\n          overflow:\'hidden\',\n          pointerEvents: "none",\n        }}\n    >\n\n        <pre>{JSON.stringify(mapState, null, "  ")}</pre>\n\n\n    </div>\n    </>\n  );\n}'}},y.parameters),g.parameters=l({storySource:{source:'(props) => {\n  const mapState = useMapState({ ...props });\n\n  useEffect(() => {\n\n  \n  }, [mapState.layers])\n\n  return (\n    <>\n    <div\n        style={{\n          position: "fixed",\n          zIndex: 10000,\n          display: "flex",\n          flexWrap: "wrap",\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          maxHeight:\'100VH\',\n          backgroundColor: "rgba(80,80,80,.8)",\n          padding: "50px",\n          fontSize: "20px",\n          color: "#51ff09",\n          overflow:\'hidden\',\n          pointerEvents: "none",\n        }}\n    >\n\n        <pre>{JSON.stringify(mapState, null, "  ")}</pre>\n\n\n    </div>\n    </>\n  );\n}'}},g.parameters)},991:function(e,t,r){"use strict";r.r(t),r.d(t,"EditPolygon",(function(){return ve})),r.d(t,"EditPoint",(function(){return Oe})),r.d(t,"EditLineString",(function(){return je})),r.d(t,"DrawPolygon",(function(){return Ie})),r.d(t,"DrawPoint",(function(){return we})),r.d(t,"DrawLineString",(function(){return Se}));var n=r(0),a=r.n(n),o=(r(961),r(963),r(373)),i=r.n(o),s="mapbox-gl-draw_boxselect",l="add",c="move",u="pointer",p="none",d="polygon",f="Feature",m="Polygon",y="LineString",g="Point",h="Multi",b="MultiPoint",v="MultiLineString",O="MultiPolygon",j="draw.create",I="draw.update",w="draw.combine",S="draw.uncombine",x="move",C="change_coordinates",M="feature",E="midpoint",P="vertex",A="true",L="false";function T(e){return function(t){var r=t.featureTarget;return!!r&&(!!r.properties&&r.properties.meta===e)}}function R(e){return!!e.featureTarget&&(!!e.featureTarget.properties&&(e.featureTarget.properties.active===A&&e.featureTarget.properties.meta===M))}function k(e){return!!e.featureTarget&&(!!e.featureTarget.properties&&(e.featureTarget.properties.active===L&&e.featureTarget.properties.meta===M))}function _(e){return void 0===e.featureTarget}function H(e){var t=e.featureTarget;return!!t&&(!!t.properties&&t.properties.meta===P)}function G(e){return!!e.originalEvent&&!0===e.originalEvent.shiftKey}var N={enable:function(e){setTimeout((function(){e.map&&e.map.doubleClickZoom&&e._ctx&&e._ctx.store&&e._ctx.store.getInitialConfigValue&&e._ctx.store.getInitialConfigValue("doubleClickZoom")&&e.map.doubleClickZoom.enable()}),0)},disable:function(e){setTimeout((function(){e.map&&e.map.doubleClickZoom&&e.map.doubleClickZoom.disable()}),0)}};var D=function(e,t){return!!e.lngLat&&(e.lngLat.lng===t[0]&&e.lngLat.lat===t[1])},F=function(e,t,r,n){return{type:f,properties:{meta:P,parent:e,coord_path:r,active:n?A:L},geometry:{type:g,coordinates:t}}},B={onSetup:function(){console.log("Change mode: custom polygon");var e=this.newFeature({type:f,properties:{},geometry:{type:m,coordinates:[[]]}});return this.addFeature(e),this.clearSelectedFeatures(),N.disable(this),this.updateUIClasses({mouse:l}),this.activateUIButton(d),this.setActionableState({trash:!0}),{polygon:e,currentVertexPosition:0}},clickAnywhere:function(e,t){if(e.currentVertexPosition>0&&D(t,e.polygon.coordinates[0][e.currentVertexPosition-1]))return this.changeMode("custom_select",{featureIds:[e.polygon.id]});this.updateUIClasses({mouse:l}),e.polygon.updateCoordinate("0.".concat(e.currentVertexPosition),t.lngLat.lng,t.lngLat.lat),e.currentVertexPosition++,e.polygon.updateCoordinate("0.".concat(e.currentVertexPosition),t.lngLat.lng,t.lngLat.lat),this.map.fire(j,{features:[e.polygon.toGeoJSON()]})},clickOnVertex:function(e){return this.changeMode("custom_select",{featureIds:[e.polygon.id]})},onMouseMove:function(e,t){e.polygon.updateCoordinate("0.".concat(e.currentVertexPosition),t.lngLat.lng,t.lngLat.lat),H(t)&&this.updateUIClasses({mouse:u})}};B.onTap=B.onClick=function(e,t){return H(t)?this.clickOnVertex(e,t):this.clickAnywhere(e,t)},B.onKeyUp=function(e,t){!function(e){return 27===e.keyCode}(t)?function(e){return 13===e.keyCode}(t)&&this.changeMode("custom_select",{featureIds:[e.polygon.id]}):(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode("custom_select"))},B.onStop=function(e){this.updateUIClasses({mouse:p}),N.enable(this),this.activateUIButton(),void 0!==this.getFeature(e.polygon.id)&&(e.polygon.removeCoordinate("0.".concat(e.currentVertexPosition)),e.polygon.isValid()?this.map.fire(j,{features:[e.polygon.toGeoJSON()]}):(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode("custom_select",{},{silent:!0})))},B.toDisplayFeatures=function(e,t,r){var n=t.properties.id===e.polygon.id;if(t.properties.active=n?A:L,!n)return r(t);if(0!==t.geometry.coordinates.length){var a=t.geometry.coordinates[0].length;if(!(a<3)){if(t.properties.meta=M,r(F(e.polygon.id,t.geometry.coordinates[0][0],"0.0",!1)),a>3){var o=t.geometry.coordinates[0].length-3;r(F(e.polygon.id,t.geometry.coordinates[0][o],"0.".concat(o),!1))}if(a<=4){var i=[[t.geometry.coordinates[0][0][0],t.geometry.coordinates[0][0][1]],[t.geometry.coordinates[0][1][0],t.geometry.coordinates[0][1][1]]];if(r({type:f,properties:t.properties,geometry:{coordinates:i,type:y}}),3===a)return}return r(t)}}},B.onTrash=function(e){this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode("custom_select")};var z=B,U=r(548),Z=r.n(U);var W=function(e,t){var r=t.getBoundingClientRect();return new Z.a(e.clientX-r.left-(t.clientLeft||0),e.clientY-r.top-(t.clientTop||0))},V=function(e,t,r){var n=t.geometry.coordinates,a=r.geometry.coordinates;if(n[1]>85||n[1]<-85||a[1]>85||a[1]<-85)return null;var o={lng:(n[0]+a[0])/2,lat:(n[1]+a[1])/2};return{type:f,properties:{meta:E,parent:e,lng:o.lng,lat:o.lat,coord_path:r.properties.coord_path},geometry:{type:g,coordinates:[o.lng,o.lat]}}};var Y=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=t.geometry,o=a.type,i=a.coordinates,s=t.properties&&t.properties.id,l=[];function c(e,t){var n="",a=null;e.forEach((function(e,o){var i=null!=t?"".concat(t,".").concat(o):String(o),c=F(s,e,i,u(i));if(r.midpoints&&a){var p=V(s,a,c);p&&l.push(p)}a=c;var d=JSON.stringify(e);n!==d&&l.push(c),0===o&&(n=d)}))}function u(e){return!!r.selectedPaths&&-1!==r.selectedPaths.indexOf(e)}function p(){var n=o.replace(h,"");i.forEach((function(a,o){var i={type:f,properties:t.properties,geometry:{type:n,coordinates:a}};l=l.concat(e(i,r,o))}))}return o===g?l.push(F(s,i,n,u(n))):o===m?i.forEach((function(e,t){c(e,null!==n?"".concat(n,".").concat(t):String(t))})):o===y?c(i,n):0===o.indexOf(h)&&p(),l};function J(e){if(this._items={},this._nums={},this._length=e?e.length:0,e)for(var t=0,r=e.length;t<r;t++)this.add(e[t]),void 0!==e[t]&&("string"==typeof e[t]?this._items[e[t]]=t:this._nums[e[t]]=t)}J.prototype.add=function(e){return this.has(e)||(this._length++,"string"==typeof e?this._items[e]=this._length:this._nums[e]=this._length),this},J.prototype.delete=function(e){return!1===this.has(e)||(this._length--,delete this._items[e],delete this._nums[e]),this},J.prototype.has=function(e){return("string"==typeof e||"number"==typeof e)&&(void 0!==this._items[e]||void 0!==this._nums[e])},J.prototype.values=function(){var e=this,t=[];return Object.keys(this._items).forEach((function(r){t.push({k:r,v:e._items[r]})})),Object.keys(this._nums).forEach((function(r){t.push({k:JSON.parse(r),v:e._nums[r]})})),t.sort((function(e,t){return e.v-t.v})).map((function(e){return e.k}))},J.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var X=J,q=r(549),K=r.n(q),Q=function(e,t){var r=-90,n=90,a=-90,o=90,i=270,s=-270;e.forEach((function(e){var t=K()(e),l=t[1],c=t[3],u=t[0],p=t[2];l>r&&(r=l),c<n&&(n=c),c>a&&(a=c),l<o&&(o=l),u<i&&(i=u),p>s&&(s=p)}));var l=t;return r+l.lat>85&&(l.lat=85-r),a+l.lat>90&&(l.lat=90-a),n+l.lat<-85&&(l.lat=-85-n),o+l.lat<-90&&(l.lat=-90-o),i+l.lng<=-270&&(l.lng+=360*Math.ceil(Math.abs(l.lng)/360)),s+l.lng>=270&&(l.lng-=360*Math.ceil(Math.abs(l.lng)/360)),l},$=function(e,t){var r=Q(e.map((function(e){return e.toGeoJSON()})),t);e.forEach((function(e){var t,n=e.getCoordinates(),a=function(e){var t={lng:e[0]+r.lng,lat:e[1]+r.lat};return[t.lng,t.lat]},o=function(e){return e.map((function(e){return a(e)}))};e.type===g?t=a(n):e.type===y||e.type===b?t=n.map(a):e.type===m||e.type===v?t=n.map(o):e.type===O&&(t=n.map((function(e){return e.map((function(e){return o(e)}))}))),e.incomingCoords(t)}))},ee={onSetup:function(e){var t=this;console.log("Change mode: custom select");var r={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:e.featureIds||[]};return this.setSelected(r.initiallySelectedFeatureIds.filter((function(e){return void 0!==t.getFeature(e)}))),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),r},fireUpdate:function(){this.map.fire(I,{action:x,features:this.getSelected().map((function(e){return e.toGeoJSON()}))})},fireActionable:function(){var e=this,t=this.getSelected(),r=t.filter((function(t){return e.isInstanceOf("MultiFeature",t)})),n=!1;if(t.length>1){n=!0;var a=t[0].type.replace("Multi","");t.forEach((function(e){e.type.replace("Multi","")!==a&&(n=!1)}))}var o=r.length>0,i=t.length>0;this.setActionableState({combineFeatures:n,uncombineFeatures:o,trash:i})},getUniqueIds:function(e){return e.length?e.map((function(e){return e.properties.id})).filter((function(e){return void 0!==e})).reduce((function(e,t){return e.add(t),e}),new X).values():[]},stopExtendedInteractions:function(e){e.boxSelectElement&&(e.boxSelectElement.parentNode&&e.boxSelectElement.parentNode.removeChild(e.boxSelectElement),e.boxSelectElement=null),this.map.dragPan.enable(),e.boxSelecting=!1,e.canBoxSelect=!1,e.dragMoving=!1,e.canDragMove=!1},onStop:function(){N.enable(this)},onMouseMove:function(e){return this.stopExtendedInteractions(e)},onMouseOut:function(e){if(e.dragMoving)return this.fireUpdate()}};ee.onTap=ee.onClick=function(e,t){return _(t)?this.clickAnywhere(e,t):T(P)(t)?this.clickOnVertex(e,t):function(e){return!!e.featureTarget&&(!!e.featureTarget.properties&&e.featureTarget.properties.meta===M)}(t)?this.clickOnFeature(e,t):void 0},ee.clickAnywhere=function(e){var t=this,r=this.getSelectedIds();r.length&&(this.clearSelectedFeatures(),r.forEach((function(e){return t.doRender(e)}))),N.enable(this),this.stopExtendedInteractions(e)},ee.clickOnVertex=function(e,t){this.changeMode("custom_direct_select",{featureId:t.featureTarget.properties.parent,coordPath:t.featureTarget.properties.coord_path,startPos:t.lngLat}),this.updateUIClasses({mouse:c})},ee.startOnActiveFeature=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),this.doRender(t.featureTarget.properties.id),e.canDragMove=!0,e.dragMoveLocation=t.lngLat},ee.clickOnFeature=function(e,t){var r=this;N.disable(this),this.stopExtendedInteractions(e);var n=G(t),a=this.getSelectedIds(),o=t.featureTarget.properties.id,i=this.isSelected(o);if(!n&&i&&this.getFeature(o).type!==g)return this.changeMode("custom_direct_select",{featureId:o});i&&n?(this.deselect(o),this.updateUIClasses({mouse:u}),1===a.length&&N.enable(this)):!i&&n?(this.select(o),this.updateUIClasses({mouse:c})):i||n||(a.forEach((function(e){return r.doRender(e)})),this.setSelected(o),this.updateUIClasses({mouse:c})),this.doRender(o)},ee.onMouseDown=function(e,t){return R(t)?this.startOnActiveFeature(e,t):this.drawConfig.boxSelect&&function(e){return!!e.originalEvent&&(!!e.originalEvent.shiftKey&&0===e.originalEvent.button)}(t)?this.startBoxSelect(e,t):void 0},ee.startBoxSelect=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),e.boxSelectStartLocation=W(t.originalEvent,this.map.getContainer()),e.canBoxSelect=!0},ee.onTouchStart=function(e,t){if(R(t))return this.startOnActiveFeature(e,t)},ee.onDrag=function(e,t){return e.canDragMove?this.dragMove(e,t):this.drawConfig.boxSelect&&e.canBoxSelect?this.whileBoxSelect(e,t):void 0},ee.whileBoxSelect=function(e,t){e.boxSelecting=!0,this.updateUIClasses({mouse:l}),e.boxSelectElement||(e.boxSelectElement=document.createElement("div"),e.boxSelectElement.classList.add(s),this.map.getContainer().appendChild(e.boxSelectElement));var r=W(t.originalEvent,this.map.getContainer()),n=Math.min(e.boxSelectStartLocation.x,r.x),a=Math.max(e.boxSelectStartLocation.x,r.x),o=Math.min(e.boxSelectStartLocation.y,r.y),i=Math.max(e.boxSelectStartLocation.y,r.y),c="translate(".concat(n,"px, ").concat(o,"px)");e.boxSelectElement.style.transform=c,e.boxSelectElement.style.WebkitTransform=c,e.boxSelectElement.style.width="".concat(a-n,"px"),e.boxSelectElement.style.height="".concat(i-o,"px")},ee.dragMove=function(e,t){e.dragMoving=!0,t.originalEvent.stopPropagation();var r={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};$(this.getSelected(),r),e.dragMoveLocation=t.lngLat},ee.onMouseUp=function(e,t){var r=this;if(e.dragMoving)this.fireUpdate();else if(e.boxSelecting){var n=[e.boxSelectStartLocation,W(t.originalEvent,this.map.getContainer())],a=this.featuresAt(null,n,"click"),o=this.getUniqueIds(a).filter((function(e){return!r.isSelected(e)}));o.length&&(this.select(o),o.forEach((function(e){return r.doRender(e)})),this.updateUIClasses({mouse:c}))}this.stopExtendedInteractions(e)},ee.toDisplayFeatures=function(e,t,r){t.properties.active=this.isSelected(t.properties.id)?A:L,r(t),this.fireActionable(),t.properties.active===A&&t.geometry.type!==g&&Y(t).forEach(r)},ee.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},ee.onCombineFeatures=function(){var e=this.getSelected();if(!(0===e.length||e.length<2)){for(var t=[],r=[],n=e[0].type.replace("Multi",""),a=0;a<e.length;a++){var o=e[a];if(o.type.replace("Multi","")!==n)return;o.type.includes("Multi")?o.getCoordinates().forEach((function(e){t.push(e)})):t.push(o.getCoordinates()),r.push(o.toGeoJSON())}if(r.length>1){var i=this.newFeature({type:f,properties:r[0].properties,geometry:{type:"Multi".concat(n),coordinates:t}});this.addFeature(i),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([i.id]),this.map.fire(w,{createdFeatures:[i.toGeoJSON()],deletedFeatures:r})}this.fireActionable()}},ee.onUncombineFeatures=function(){var e=this,t=this.getSelected();if(0!==t.length){for(var r=[],n=[],a=function(a){var o=t[a];e.isInstanceOf("MultiFeature",o)&&(o.getFeatures().forEach((function(t){e.addFeature(t),t.properties=o.properties,r.push(t.toGeoJSON()),e.select([t.id])})),e.deleteFeature(o.id,{silent:!0}),n.push(o.toGeoJSON()))},o=0;o<t.length;o++)a(o);r.length>1&&this.map.fire(S,{createdFeatures:r,deletedFeatures:n}),this.fireActionable()}};var te=ee,re={getMatchingVertices:function(e,t,r,n){for(var a=[],o=e[0].toFixed(5),i=e[1].toFixed(5),s=0;s<r.length;s++)if(r[s].id!==t)for(var l=0;l<r[s].geometry.coordinates.length;l++)for(var c=0;c<r[s].geometry.coordinates[l].length;c++)o===r[s].geometry.coordinates[l][c][0].toFixed(5)&&i===r[s].geometry.coordinates[l][c][1].toFixed(5)&&a.push({featureId:r[s].id,coord_path:l+"."+c,lng:r[s].geometry.coordinates[l][c][0],lat:r[s].geometry.coordinates[l][c][1]});return a},getDrawInstance:function(e){for(var t=e._controls.length-1;t>=0;t--)if(e._controls[t].options&&"custom_select"===e._controls[t].options.defaultMode)return e._controls[t];return null}},ne=T(P),ae=T(E),oe={fireUpdate:function(){this.map.fire(I,{action:C,features:this.getSelected().map((function(e){return e.toGeoJSON()}))})},fireActionable:function(e){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:e.selectedCoordPaths.length>0})},startDragging:function(e,t){this.map.dragPan.disable(),e.canDragMove=!0,e.dragMoveLocation=t.lngLat},stopDragging:function(e){this.map.dragPan.enable(),e.dragMoving=!1,e.canDragMove=!1,e.dragMoveLocation=null},onVertex:function(e,t){this.startDragging(e,t);var r=t.featureTarget.properties,n=e.selectedCoordPaths.indexOf(r.coord_path);G(t)||-1!==n?G(t)&&-1===n&&e.selectedCoordPaths.push(r.coord_path):e.selectedCoordPaths=[r.coord_path];var a=re.getDrawInstance(this.map).getAll(),o=re.getMatchingVertices(t.featureTarget._geometry.coordinates,t.featureTarget.properties.parent,a.features,this.map);e.groupMove_vertices=o;for(var i=0;i<e.groupMove_vertices.length;i++)e.groupMove_vertices[i].feature=this.getFeature(e.groupMove_vertices[i].featureId);var s=this.pathsToCoordinates(e.featureId,e.selectedCoordPaths);this.setSelectedCoordinates(s)},onMidpoint:function(e,t){this.startDragging(e,t);var r=t.featureTarget.properties;e.feature.addCoordinate(r.coord_path,r.lng,r.lat),this.fireUpdate(),e.selectedCoordPaths=[r.coord_path]},pathsToCoordinates:function(e,t){return t.map((function(t){return{feature_id:e,coord_path:t}}))},onFeature:function(e,t){0===e.selectedCoordPaths.length?this.startDragging(e,t):this.stopDragging(e)},dragFeature:function(e,t,r){$(this.getSelected(),r),e.dragMoveLocation=t.lngLat},dragVertex:function(e,t,r){for(var n=e.selectedCoordPaths.map((function(t){return e.feature.getCoordinate(t)})),a=n.map((function(e){return{type:f,properties:{},geometry:{type:g,coordinates:e}}})),o=Q(a,r),i=0;i<n.length;i++){var s=n[i];e.feature.updateCoordinate(e.selectedCoordPaths[i],s[0]+o.lng,s[1]+o.lat);for(var l=0;l<e.groupMove_vertices.length;l++){var c=e.groupMove_vertices[l].coord_path.split(".");if(void 0!==c[0]&&void 0!==c[1]&&void 0!==e.groupMove_vertices[l].feature.coordinates[c[0]]&&void 0!==e.groupMove_vertices[l].feature.coordinates[c[0]][c[1]]){var u=e.groupMove_vertices[l].feature.coordinates[c[0]][c[1]];e.groupMove_vertices[l].feature.updateCoordinate(e.groupMove_vertices[l].coord_path,u[0]+o.lng,u[1]+o.lat)}}}},clickNoTarget:function(){this.changeMode("custom_select")},clickInactive:function(){this.changeMode("custom_select")},clickActiveFeature:function(e){e.selectedCoordPaths=[],this.clearSelectedCoordinates(),e.feature.changed()},onSetup:function(e){var t=e.featureId,r=this.getFeature(t);if(!r)throw new Error("You must provide a featureId to enter direct_select mode");if(r.type===g)throw new TypeError("direct_select mode doesn't handle point features");var n={featureId:t,feature:r,dragMoveLocation:e.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:e.coordPath?[e.coordPath]:[],groupMove_vertices:e.groupMove_vertices?e.groupMove_vertices:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(t,n.selectedCoordPaths)),this.setSelected(t),N.disable(this),this.setActionableState({trash:!0}),n},onStop:function(){N.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(e,t,r){e.featureId===t.properties.id?(t.properties.active=A,r(t),Y(t,{map:this.map,midpoints:!0,selectedPaths:e.selectedCoordPaths}).forEach(r)):(t.properties.active=L,r(t)),this.fireActionable(e)},onTrash:function(e){e.selectedCoordPaths.sort((function(e,t){return t.localeCompare(e,"en",{numeric:!0})})).forEach((function(t){return e.feature.removeCoordinate(t)})),this.fireUpdate(),e.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(e),!1===e.feature.isValid()&&(this.deleteFeature([e.featureId]),this.changeMode("custom_select",{}))},onMouseMove:function(e,t){var r=R(t),n=ne(t),a=0===e.selectedCoordPaths.length;r&&a||n&&!a?this.updateUIClasses({mouse:c}):this.updateUIClasses({mouse:p}),this.stopDragging(e)},onMouseOut:function(e){e.dragMoving&&this.fireUpdate()}};oe.onTouchStart=oe.onMouseDown=function(e,t){return ne(t)?this.onVertex(e,t):R(t)?this.onFeature(e,t):ae(t)?this.onMidpoint(e,t):void 0},oe.onDrag=function(e,t){if(!0===e.canDragMove){e.dragMoving=!0,t.originalEvent.stopPropagation();var r={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};e.selectedCoordPaths.length>0?this.dragVertex(e,t,r):this.dragFeature(e,t,r),e.dragMoveLocation=t.lngLat}},oe.onClick=function(e,t){return _(t)?this.clickNoTarget(e,t):R(t)?this.clickActiveFeature(e,t):k(t)?this.clickInactive(e,t):void this.stopDragging(e)},oe.onTap=function(e,t){return _(t)?this.clickNoTarget(e,t):R(t)?this.clickActiveFeature(e,t):k(t)?this.clickInactive(e,t):void 0},oe.onTouchEnd=oe.onMouseUp=function(e){e.dragMoving&&this.fireUpdate(),this.stopDragging(e)};var ie=oe,se=r(30);function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ce(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ue=function(e){var t=Object(n.useRef)(),r=Object(se.a)({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),o=Object(n.useRef)(e.onChange),s=Object(n.useRef)(!1),l=le(Object(n.useState)(!1),2),c=l[0],u=l[1],p=le(Object(n.useState)(0),2),d=p[0],f=p[1],m=function(e){console.log("MlFeatureEditor mode change to "+e.mode)},y=function(){f(Math.random())};return Object(n.useEffect)((function(){if(r.map&&!s.current){var n;if(s.current=!0,r.map.map.style&&r.map.map.getSource("mapbox-gl-draw-cold")&&t.current)null===(n=t.current)||void 0===n||n.remove();t.current=new i.a({displayControlsDefault:!1,defaultMode:e.mode||"custom_select",modes:Object.assign({custom_polygon:z,custom_select:te,custom_direct_select:ie},i.a.modes)}),r.map.on("draw.modechange",m,r.componentId),r.map.addControl(t.current,"top-left",r.componentId),r.map.on("mouseup",y,r.componentId),u(!0)}}),[r.map,e,s]),Object(n.useEffect)((function(){var r;t.current&&null!==(r=e.geojson)&&void 0!==r&&r.geometry&&t.current.set({type:"FeatureCollection",features:[e.geojson]})}),[e.geojson,c]),Object(n.useEffect)((function(){if(t.current&&d){var e=t.current.getAll();"function"==typeof o.current&&o.current(e.features)}}),[d]),Object(n.useEffect)((function(){e.mode&&t.current&&t.current.changeMode(e.mode)}),[e.mode]),a.a.createElement(a.a.Fragment,null)},pe=ue;try{ue.displayName="MlFeatureEditor",ue.__docgenInfo={description:"GeoJson Feature editor that allows to create or manipulate GeoJson data",displayName:"MlFeatureEditor",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!0,type:{name:"string"}},insertBeforeLayer:{defaultValue:null,description:'Id of an existing layer in the mapLibre instance to help specify the layer order\nThis layer will be visually beneath the layer with the "insertBeforeLayer" id.',name:"insertBeforeLayer",required:!0,type:{name:"string"}},geojson:{defaultValue:null,description:"Input GeoJson data at initialization",name:"geojson",required:!0,type:{name:"any"}},onChange:{defaultValue:null,description:"Callback function that is called each time the GeoJson data within has changed within MlFeatureEditor.\nFirst parameter is the new GeoJson feature.",name:"onChange",required:!1,type:{name:"Function | undefined"}},mode:{defaultValue:null,description:'Feature editor mode:\n- "custom_select" edit features\n- "custom_polygon" draw Polygon\n- "draw_point" draw Point\n- "draw_line_string" draw LineString',name:"mode",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlFeatureEditor/MlFeatureEditor.tsx#MlFeatureEditor"]={docgenInfo:ue.__docgenInfo,name:"MlFeatureEditor",path:"src/components/MlFeatureEditor/MlFeatureEditor.tsx#MlFeatureEditor"})}catch(e){}var de=r(20);function fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(r),!0).forEach((function(t){ye(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ye(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ge(){return(ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var he={title:"MapComponents/MlFeatureEditor",component:pe,argTypes:{},decorators:de.a},be=(t.default=he,function(e){return a.a.createElement(pe,ge({debug:!0,onChange:function(e){console.log(e)}},e))}),ve=be.bind({});ve.args={mode:"custom_select",geojson:{type:"Feature",properties:{},geometry:{coordinates:[[[7.0904979943736635,50.73948334574527],[7.087554458473562,50.73827346433987],[7.093562913197076,50.73723639825727],[7.096294028980594,50.7387727842636],[7.0904979943736635,50.73948334574527]]],type:"Polygon"}}};var Oe=be.bind({});Oe.args={mode:"custom_select",geojson:{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[7.0904979943736635,50.73948334574527]}}};var je=be.bind({});je.args={mode:"simple_select",geojson:{type:"Feature",properties:{},geometry:{coordinates:[[7.0904979943736635,50.73948334574527],[7.087554458473562,50.73827346433987],[7.093562913197076,50.73723639825727],[7.096294028980594,50.7387727842636]],type:"LineString"}}};var Ie=be.bind({});Ie.args={mode:"custom_polygon"};var we=be.bind({});we.args={mode:"draw_point"};var Se=be.bind({});Se.args={mode:"draw_line_string"},ve.parameters=me({storySource:{source:"(args) => {\n  return (\n    <MlFeatureEditor\n      debug={true}\n      onChange={(features) => {\n        console.log(features);\n      }}\n      {...args}\n    />\n  );\n}"}},ve.parameters),Oe.parameters=me({storySource:{source:"(args) => {\n  return (\n    <MlFeatureEditor\n      debug={true}\n      onChange={(features) => {\n        console.log(features);\n      }}\n      {...args}\n    />\n  );\n}"}},Oe.parameters),je.parameters=me({storySource:{source:"(args) => {\n  return (\n    <MlFeatureEditor\n      debug={true}\n      onChange={(features) => {\n        console.log(features);\n      }}\n      {...args}\n    />\n  );\n}"}},je.parameters),Ie.parameters=me({storySource:{source:"(args) => {\n  return (\n    <MlFeatureEditor\n      debug={true}\n      onChange={(features) => {\n        console.log(features);\n      }}\n      {...args}\n    />\n  );\n}"}},Ie.parameters),we.parameters=me({storySource:{source:"(args) => {\n  return (\n    <MlFeatureEditor\n      debug={true}\n      onChange={(features) => {\n        console.log(features);\n      }}\n      {...args}\n    />\n  );\n}"}},we.parameters),Se.parameters=me({storySource:{source:"(args) => {\n  return (\n    <MlFeatureEditor\n      debug={true}\n      onChange={(features) => {\n        console.log(features);\n      }}\n      {...args}\n    />\n  );\n}"}},Se.parameters)},995:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return S}));var n=r(0),a=r.n(n),o=r(30),i=r(130),s=r(546),l={street:["footway","street","road","street_name","residential","path","pedestrian","road_reference","road_reference_intl","square","place"],number:["house_number","street_number"],place:["city","village","hamlet","locality","croft","neighbourhood","suburb","city_district","district","quarter","borough","city_block","residential","commercial","industrial","houses","subdivision","allotments","postal_city","town","municipality","local_administrative_area"],zip:["postcode","partial_postcode"],state:["state","province","state_code"]},c=function(e){var t=[];for(var r in l)l[r].some((function(r){return!!e.hasOwnProperty(r)&&(t.push(e[r]),!0)}));return t.join(", ")};function u(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){return 25.4,96/25.4*e+"px"},f=function(e,t,r){r(!0);var n=window.devicePixelRatio,a=document.createElement("div");a.className="hidden-map",document.body.appendChild(a);var o=document.createElement("div");o.style.width=d(210),o.style.height=d(297),a.appendChild(o);var l=e.map.getStyle(),p=function(e){var t=l.sources[e];Object.keys(t).forEach((function(e){t[e]||delete t[e]}))};for(var f in l.sources)p(f);var m=new i.Map({container:o,center:e.map.getCenter(),zoom:e.map.getZoom(),bearing:e.map.getBearing(),pitch:e.map.getPitch(),interactive:!1,preserveDrawingBuffer:!0,fadeDuration:0,attributionControl:!1,style:l});m.once("idle",(function(){var e,o=new s.a({orientation:"p",unit:"mm",compress:!0});Object.defineProperty(window,"devicePixelRatio",{get:function(){return 3.125}});var i=(t?c(t.address):"").split(","),l=[];l.length&&i.forEach((function(e){var t=e.match(/.{1,34}/g);t&&l.push.apply(l,u(t))})),o.addImage(m.getCanvas().toDataURL("image/png"),"png",0,0,210,297,void 0,"FAST"),o.setFillColor("white"),o.rect(138,287,297,10,"F"),o.setFontSize(10),o.text("Datenquelle: © OpenStreetMap-Mitwirkende",140,o.internal.pageSize.height-3),o.setFillColor("white");var p=3.25*l.length+3+3+6.5+4+1;o.rect(2.5,2,66.5,p,"F"),o.setFontSize(10),o.text("Karten PDF:",6,5.5),o.rect(6,7,60,3.25*l.length+4+1),o.setFontSize(10),l.forEach((function(e,t){o.text(e.trim(),8,10+3.5*t+2)})),o.addImage("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKgAAACxCAMAAABnTAbVAAAC8VBMVEUAAAD/AACAAACqAFW/AECZMzOqK1W2JEm/IECqHDmzGk25F0aqFUCxJzu2JEmqIkSvIEC0HjyqHEeuG0OzGkC2GD2uI0axIUO1IECtHz2xHUWzHEKtG0CwGj6zIkS1IUKyHz60HkSvHUKxHECzHD6uG0OxIUGzIECuHz6wHkOyHkG0HUCwHD6xHEOzIUGvIECxHz6zH0KvHkGxHUCyHT+vHEKwHEGyIECzHz+wH0KxHkGzHkCwHT+xHUKyHEGvIECxHz+yH0KzHkGwHkCxHj+zHUKwHUGxHECyHz+wH0GxH0GyHkCwHj+xHUGyHUGzHUCwHz+xH0GyH0GwHkCxHj+yHkGwHUCxHUCyHT+wH0GxH0CxHkCyHj+wHkGxHkCyHUCwHT+xH0GyH0CwH0CxHj+yHkGwHkCxHUCxHT+yHUGwH0CxH0CyHj+wHkGxHkCyHkCwHT+xHUGxH0CyH0CxHz+xHkGyHkCwHkCxHj+yHUGwHUCxH0CwHkGxHkCxHkCyHj+xHUGxHUCyH0CwHz+xHkGyHkCwHkCxHj+xHkGwHUCxHUCxHz+yH0GxHkCyHj+wHkGxHUCxHUCwHz+xH0GxHkCyHkCxHj+xHkGyHkCxHUCxHT+yH0GwHkCxHkCxHj+wHkGxHkCxHkCyHT+xH0GxH0CyHkCxHj+xHkGxHkCwHkCxHT+xHUCwH0CxHkCxHj+yHkCxHkCxHkCyHj+xHUCxH0CxHkCwHj+xHkCxHkCwHkCxHj+xHkCyHUCxH0CxHj+xHkCxHkCxHkCxHj+wHkCxHUCxH0CyHj+xHkCxHkCyHkCxHj+xHkCxHUCxHz+xHkCwHkCxHkCxHj+yHkCxHkCxHkCxHkCxHkCxHkCxHj+xHkCwHkCxHT+xHkCxHkCxHkCxHj+xHkCxHkCxHkCxHj+xH0CxHkCxHkCyHj+xHkCxHkCxHkCxHj+xHkCxHkCxHkCxHj+xHkCxHkCxHkCxHj+xHkCxHkCxHkCxHj+xHkCxHkD///9g21WfAAAA+XRSTlMAAQIDBAUGBwgJCgsMDQ4PEBESExQVFhcYGRobHB0eHyEiIyQlJicoKSorLC0uLzAxMjM0NTY3ODk6Ozw9Pj9AQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVpbXF1eX2BhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ent8fn+AgYKDhIWGh4iJiouMjY6PkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc/Q0dLT1NXW19ja29zd3uDh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7v1AMKAAAAAWJLR0T61W0GSgAACWZJREFUGBnVwXlAVHUCB/DvmxkuD0QswFo3TcwzS0p01RVMpUytLKxMSVNpLUsLj7VDo7btsNTssrTMdAtWNjNbkyzF3EotwrXMI7XwAAxE5Jz5/rcaMMx782Z452/p84GV2na+ZmRqasrwxE4OtFRhI/+29SS9qn/86PGUKLQ4CW+X0p/n+xeTnGhB4v/NgIpXj3aihZhRyaCOPNYRwrW+KwkKmWxWTVYfiBRy49qzxW0hN5FaeLLiIUrv5UUkl0Au9iy1qXk1BgJIIzZ7eMG1kHuBmpVMkWCz0LQC1itzQkb6hTpsiYOdQmcfZ6M8yPWmLoWDYBsp9SCbZENuDPWpmgKbJO+mr9WQm0y95sEO8Zso9z7k7qJuj8JyzofPUeFjyA2nfvfDYl23089eyPWkfrXDYCXXI1X0Vy5BxllC/U50hHU676aqbpDLogEfoEFUR5g0qoTqJkJuAo0YjQZPpcIMab6bAayBXMgxGrDfiXrhBVnRMOyiTxhQkQtyGTTidjS4quZIEgzqfYRBjIFc2Pc0YCcaLWbdXyUY8acSBrMBCgPqqJ+nExpEniL/FQn9hpczKHdPKCyiAfeh0SMkf+wDvSbWsBlroCCtpX6volFkOcmzqdBntofN8QyGQkQudcuF12qe554DPWZRg70hUAjNoV6fwyuFv1nuhGYT3dRiDpRCVlCnHHiFlfM3m9tCo5trqUlFX/hJO0ddFqJJLut9HQ1NrquiRoc7wM/V31GPa9DkGTbIvwga9C+nZrlO+Al9opqabYWPqWy0NwbNuvQEdXgJKuI/oEaVfeFjFL32xaEZYV+yQeWBbVlZq15f9sp7W/YcrmYAS6AmOY9aeCbA13Vssv8SBPcazzuaPS/5Yvhy9bhtYfZxqlgiQU3SFg+bUzUJMtfTR0EUgpnK2s/n9oQ6qe+cT85R6SUnVPVYXsag9iVCLo2+dkQgsKv3zI9FUBGpuR7KbY6CulZ3bqplICfmhUHhWcpsdCGgi6FB16dOUeaHeATSbtyKI/Tn2TEtAn7yKLdSgkmt55ygr9M3I4ies9fkV7PJwXVTO0HFxbVUWAjTWj10kr7eikRQIb3vSJ8//5l5aSN7RyGAJ6nkuQXmRS1108eRZJgUeZp+yvvAAoP20od7VRxMeZEqDkXDAiFPuumjLCMExo3yUM2nLljhhhL6+iHVAYO6nqK6TFii05eU2ZfmhBHdf2YA7mRYIiybcnvTwqDbgJMM6Gh7WML5JhVOPvNH6CLNqmYQ62ENaSmVatbfFArNEvIoV7Phvmti2rXukrJgazXPmw6LLKa/4uUDHdAi/h8eylQtjoNX1H355JlOsIb0PtUUrhgTgeAcoza5KfddD8hIN37LjbBI+BdUV/HJI4NCEIBr2LKjVNrcFkquhypvh0UuOsCAzm5bktYnBHLRQx/d9Cv9veeCir550bBI3yoGVXv40xWZGdNT09LTH12yZmcR1X0VDlVtR8Aqc2mBXzrCdo7PaN44CHBZKc36CELMpUk1XSBE6EGa8xYEmUBT3L0giLSLZnwIYW6iGbdCGMdhGlcaAXHm07g3IVCHczRsHER6l0bVRkGk22jUTgjVpooGPQuxttCg8RDrARp0OcTqRWPKJYjlqqQh+RBtDw1ZD9FW0pDnIdqDNCQDoo2iIVMgWiINGQvRLqchwyBaFA35M0STamjEIAh3mkYMhnClNOJ6CHeGRqRCuCoakQ7RImhIJkSLoyFvQbSraMhWiDaWhhyFaDNpiKcdBFtOYwZCsG00ZjrEkoppzGsQqzsNyodY99CgukgI9TaNSoZIUiGNWgSREmjYfyDSszSsrj3EcRyjceMgTgpNWAlx1tGEYhdEiaygGddBlIdoyisQJKKQphx3QYxZNGk0hAj7mSblQIiZNKs2DgJEn6RpcyDACpr3kwu2S3TTAnfAbq58WmEP7PYYgzq1fdXf56anT5/ycOayNZ8WMaChsNeQWgZy4NXJie0hFzciY2MF1WyDrWJ/oaritfdchgAiRr18jP5ugI0cW6jCnZsWgaAcwzd6qPCdA/Z5mv4Ozr8EGvR4pZpyE2CbSR4qHU53QaP4LA99FbaDTW6po8L+iU7oMHg3fS2DPYZVUe50uhP6uBbWsom7P+xw7RnKrYuFfgMPsUl+KKw39FfKHEqBIW3Xs8lSWC61ijKrW8Egx1I2uQ0We8BNX1WzYMIsNxuVd4eVnIspc6gfTJnkZqP/RsM6l26nTG4UTHqAXl+1gVWGn6DMhnCYlkmvz8JhidDFHsqsdMICb9BrUxtY4M97KbdMghXCvqFXwWUwq+NaKjwHi3Qto1dhf5gSOruMCu9IsMqdbFI11wnDwmcepdLmEFhnHX18PQDGtM44Tj+72sBCl5yhD88/+0G/K18sor/CWFhqDuV2psfCq/UMNCdm9rdUU5cMa4V8TwVP/uszRicmJAyZ9m5ZJfCXpBAE4Lx2wWc1VLcQVhvHIN4DxrM0J2NwBBRikmdmlzCgrQ5YzbGfgaUA0k6eV1OQ8/y9qSMHJQy96e4HH389r5hBFcXBelMZ0DEngEQPdZsCG4T9zECewgUrqdcOCXZYyACqL8UFHYqoT21f2OJyD9WtQr1p1Oc52GQ3VXl6oZ6URz1OtYFNHqaqj9AovoI6LIBd/kBVQ+E1m9qVRMI2P1LFDjRx5FGzx2GfN+nPMxA+OpVQo7L2sM9k+suGzHhq9AJs1Jl+arpBbhW1uRJ2KqXSMii0LqAWu2Crb6hQGgOlrr9Sgxmw1ftUSIe/MR42q7I9bPU05bZLUPEEm5UDe02jTGU3qJHWsjn3wl7jKbMA6iK+YjO6wF430te3IQgg9hCDOgCbJdNH+RUIqMtxBvMybDaAPiYhiH5lDOJW2Kwfm7yBoJIqGFhX2CyJXgURCG74OQZS4YDNxrJR6RVozohKBrAHdpvEBjUj0LyUCqpbDbvdzwaTocWQUqqaB7stYr1MaJNQRDV3wG7v8DdrJGjU7SBVXA+7fcELPgyFZh2+oL/+sJmjjOd9HAYdWuXQzxWwWS+e92EodJEWeagQA5tNJ7khFHrdUk65cNgsh8wOhX4991GmFewVVs7nHTAiYil9tYO9Uuruh1F3n2GTONjr6dEwrnMevfrBXrEwwzGvig3GomXrvoP1HkQLJ6WV8II30OJ1XO0huQu/AwN3k5Vh+B1wpP3EIfhdCE2fhv+X/wF/AO+L9vuzfwAAAABJRU5ErkJggg==","png",5,12+3*l.length+4,3,3,void 0,"FAST"),o.setFontSize(10),o.text("wheregroup.com",40,12+3.25*l.length+4+1),o.setProperties({title:"Map export",subject:"Map export",creator:"WhereGroup GmbH",author:"(c)WhereGroup GmbH, (c)OpenStreetMap"}),o.save("Map.pdf"),m.remove(),null===(e=a.parentNode)||void 0===e||e.removeChild(a),Object.defineProperty(window,"devicePixelRatio",{get:function(){return n}}),r(!1)}))},m=r(547),y=r.n(m),g=r(219),h=function(e){var t=Object(o.a)({mapId:e.mapId,waitForLayer:e.insertBeforeLayer});return a.a.createElement(a.a.Fragment,null,a.a.createElement(g.a,{color:"primary",variant:"contained",onClick:function(){t.map&&f(t.map,null,(function(){}))}},a.a.createElement(y.a,null)))};h.defaultProps={mapId:void 0};var b=h;try{h.displayName="MlCreatePdfButton",h.__docgenInfo={description:"Renders a button that will create a PDF version of the current map view (dimensions adjusted to fit Din A4 Paper).",displayName:"MlCreatePdfButton",props:{mapId:{defaultValue:{value:"undefined"},description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:'Id of an existing layer in the mapLibre instance to help specify the layer order\nThis layer will be visually beneath the layer with the "insertBeforeLayer" id.',name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlCreatePdfButton/MlCreatePdfButton.tsx#MlCreatePdfButton"]={docgenInfo:h.__docgenInfo,name:"MlCreatePdfButton",path:"src/components/MlCreatePdfButton/MlCreatePdfButton.tsx#MlCreatePdfButton"})}catch(e){}var v=r(84),O=r(20);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w={title:"MapComponents/MlCreatePdfButton",component:b,argTypes:{},decorators:O.a},S=(t.default=w,function(e){return a.a.createElement(v.a,null,a.a.createElement(b,null))}.bind({}));S.parameters=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({storySource:{source:"(args) => (\n  <TopToolbar>\n    <MlCreatePdfButton />\n  </TopToolbar>\n)"}},S.parameters)},996:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return Ge}));var n=r(0),a=r.n(n),o=r(84),i=r(34),s=r(219),l=r(130),c=r.n(l),u=r(4);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw a}}return o}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=f(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function f(e,t){if(e){if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=h(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(arguments.length<3?e:r):a.value}}).apply(this,arguments)}function h(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function O(e,t,r){return t&&v(e.prototype,t),r&&v(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=C(e);if(t){var a=C(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return S(this,r)}}function S(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var M=function(e){j(r,e);var t=w(r);function r(e){var n;return b(this,r),(n=t.call(this,e)).dracoLoader=null,n.ktx2Loader=null,n.meshoptDecoder=null,n.pluginCallbacks=[],n.register((function(e){return new T(e)})),n.register((function(e){return new N(e)})),n.register((function(e){return new D(e)})),n.register((function(e){return new R(e)})),n.register((function(e){return new k(e)})),n.register((function(e){return new _(e)})),n.register((function(e){return new H(e)})),n.register((function(e){return new G(e)})),n.register((function(e){return new A(e)})),n.register((function(e){return new F(e)})),n}return O(r,[{key:"load",value:function(e,t,r,n){var a,o=this;a=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:u.B.extractUrlBase(e),this.manager.itemStart(e);var i=function(t){n?n(t):console.error(t),o.manager.itemError(e),o.manager.itemEnd(e)},s=new u.k(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(r){try{o.parse(r,a,(function(r){t(r),o.manager.itemEnd(e)}),i)}catch(e){i(e)}}),r,i)}},{key:"setDRACOLoader",value:function(e){return this.dracoLoader=e,this}},{key:"setDDSLoader",value:function(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}},{key:"setKTX2Loader",value:function(e){return this.ktx2Loader=e,this}},{key:"setMeshoptDecoder",value:function(e){return this.meshoptDecoder=e,this}},{key:"register",value:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}},{key:"unregister",value:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}},{key:"parse",value:function(e,t,r,n){var a,o={},i={};if("string"==typeof e)a=e;else if(u.B.decodeText(new Uint8Array(e,0,4))===B){try{o[P.KHR_BINARY_GLTF]=new Z(e)}catch(e){return void(n&&n(e))}a=o[P.KHR_BINARY_GLTF].content}else a=u.B.decodeText(new Uint8Array(e));var s=JSON.parse(a);if(void 0===s.asset||s.asset.version[0]<2)n&&n(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var l=new je(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(var c=0;c<this.pluginCallbacks.length;c++){var p=this.pluginCallbacks[c](l);i[p.name]=p,o[p.name]=!0}if(s.extensionsUsed)for(var d=0;d<s.extensionsUsed.length;++d){var f=s.extensionsUsed[d],m=s.extensionsRequired||[];switch(f){case P.KHR_MATERIALS_UNLIT:o[f]=new L;break;case P.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[f]=new J;break;case P.KHR_DRACO_MESH_COMPRESSION:o[f]=new W(s,this.dracoLoader);break;case P.KHR_TEXTURE_TRANSFORM:o[f]=new V;break;case P.KHR_MESH_QUANTIZATION:o[f]=new X;break;default:m.indexOf(f)>=0&&void 0===i[f]&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}l.setExtensions(o),l.setPlugins(i),l.parse(r,n)}}},{key:"parseAsync",value:function(e,t){var r=this;return new Promise((function(n,a){r.parse(e,t,n,a)}))}}]),r}(u.A);function E(){var e={};return{get:function(t){return e[t]},add:function(t,r){e[t]=r},remove:function(t){delete e[t]},removeAll:function(){e={}}}}var P={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"},A=function(){function e(t){b(this,e),this.parser=t,this.name=P.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}return O(e,[{key:"_markDefs",value:function(){for(var e=this.parser,t=this.parser.json.nodes||[],r=0,n=t.length;r<n;r++){var a=t[r];a.extensions&&a.extensions[this.name]&&void 0!==a.extensions[this.name].light&&e._addNodeRef(this.cache,a.extensions[this.name].light)}}},{key:"_loadLight",value:function(e){var t=this.parser,r="light:"+e,n=t.cache.get(r);if(n)return n;var a,o=t.json,i=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e],s=new u.h(16777215);void 0!==i.color&&s.fromArray(i.color);var l=void 0!==i.range?i.range:0;switch(i.type){case"directional":(a=new u.i(s)).target.position.set(0,0,-1),a.add(a.target);break;case"point":(a=new u.R(s)).distance=l;break;case"spot":(a=new u.cb(s)).distance=l,i.spot=i.spot||{},i.spot.innerConeAngle=void 0!==i.spot.innerConeAngle?i.spot.innerConeAngle:0,i.spot.outerConeAngle=void 0!==i.spot.outerConeAngle?i.spot.outerConeAngle:Math.PI/4,a.angle=i.spot.outerConeAngle,a.penumbra=1-i.spot.innerConeAngle/i.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+i.type)}return a.position.set(0,0,0),a.decay=2,void 0!==i.intensity&&(a.intensity=i.intensity),a.name=t.createUniqueName(i.name||"light_"+e),n=Promise.resolve(a),t.cache.add(r,n),n}},{key:"createNodeAttachment",value:function(e){var t=this,r=this.parser,n=r.json.nodes[e],a=(n.extensions&&n.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then((function(e){return r._getNodeRef(t.cache,a,e)}))}}]),e}(),L=function(){function e(){b(this,e),this.name=P.KHR_MATERIALS_UNLIT}return O(e,[{key:"getMaterialType",value:function(){return u.G}},{key:"extendParams",value:function(e,t,r){var n=[];e.color=new u.h(1,1,1),e.opacity=1;var a=t.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){var o=a.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}void 0!==a.baseColorTexture&&n.push(r.assignTexture(e,"map",a.baseColorTexture))}return Promise.all(n)}}]),e}(),T=function(){function e(t){b(this,e),this.parser=t,this.name=P.KHR_MATERIALS_CLEARCOAT}return O(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?u.H:null}},{key:"extendMaterialParams",value:function(e,t){var r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var a=[],o=n.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&a.push(r.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&a.push(r.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(a.push(r.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){var i=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new u.ib(i,i)}return Promise.all(a)}}]),e}(),R=function(){function e(t){b(this,e),this.parser=t,this.name=P.KHR_MATERIALS_SHEEN}return O(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?u.H:null}},{key:"extendMaterialParams",value:function(e,t){var r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var a=[];t.sheenColor=new u.h(0,0,0),t.sheenRoughness=0,t.sheen=1;var o=n.extensions[this.name];return void 0!==o.sheenColorFactor&&t.sheenColor.fromArray(o.sheenColorFactor),void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&a.push(r.assignTexture(t,"sheenColorMap",o.sheenColorTexture)),void 0!==o.sheenRoughnessTexture&&a.push(r.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(a)}}]),e}(),k=function(){function e(t){b(this,e),this.parser=t,this.name=P.KHR_MATERIALS_TRANSMISSION}return O(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?u.H:null}},{key:"extendMaterialParams",value:function(e,t){var r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var a=[],o=n.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&a.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(a)}}]),e}(),_=function(){function e(t){b(this,e),this.parser=t,this.name=P.KHR_MATERIALS_VOLUME}return O(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?u.H:null}},{key:"extendMaterialParams",value:function(e,t){var r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var a=[],o=n.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&a.push(r.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||0;var i=o.attenuationColor||[1,1,1];return t.attenuationColor=new u.h(i[0],i[1],i[2]),Promise.all(a)}}]),e}(),H=function(){function e(t){b(this,e),this.parser=t,this.name=P.KHR_MATERIALS_IOR}return O(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?u.H:null}},{key:"extendMaterialParams",value:function(e,t){var r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var n=r.extensions[this.name];return t.ior=void 0!==n.ior?n.ior:1.5,Promise.resolve()}}]),e}(),G=function(){function e(t){b(this,e),this.parser=t,this.name=P.KHR_MATERIALS_SPECULAR}return O(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?u.H:null}},{key:"extendMaterialParams",value:function(e,t){var r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var a=[],o=n.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&a.push(r.assignTexture(t,"specularIntensityMap",o.specularTexture));var i=o.specularColorFactor||[1,1,1];return t.specularColor=new u.h(i[0],i[1],i[2]),void 0!==o.specularColorTexture&&a.push(r.assignTexture(t,"specularColorMap",o.specularColorTexture).then((function(e){e.encoding=u.mb}))),Promise.all(a)}}]),e}(),N=function(){function e(t){b(this,e),this.parser=t,this.name=P.KHR_TEXTURE_BASISU}return O(e,[{key:"loadTexture",value:function(e){var t=this.parser,r=t.json,n=r.textures[e];if(!n.extensions||!n.extensions[this.name])return null;var a=n.extensions[this.name],o=r.images[a.source],i=t.options.ktx2Loader;if(!i){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o,i)}}]),e}(),D=function(){function e(t){b(this,e),this.parser=t,this.name=P.EXT_TEXTURE_WEBP,this.isSupported=null}return O(e,[{key:"loadTexture",value:function(e){var t=this.name,r=this.parser,n=r.json,a=n.textures[e];if(!a.extensions||!a.extensions[t])return null;var o=a.extensions[t],i=n.images[o.source],s=r.textureLoader;if(i.uri){var l=r.options.manager.getHandler(i.uri);null!==l&&(s=l)}return this.detectSupport().then((function(a){if(a)return r.loadTextureImage(e,i,s);if(n.extensionsRequired&&n.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)}))}},{key:"detectSupport",value:function(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}]),e}(),F=function(){function e(t){b(this,e),this.name=P.EXT_MESHOPT_COMPRESSION,this.parser=t}return O(e,[{key:"loadBufferView",value:function(e){var t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){var n=r.extensions[this.name],a=this.parser.getDependency("buffer",n.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([a,o.ready]).then((function(e){var t=n.byteOffset||0,r=n.byteLength||0,a=n.count,i=n.byteStride,s=new ArrayBuffer(a*i),l=new Uint8Array(e[0],t,r);return o.decodeGltfBuffer(new Uint8Array(s),a,i,l,n.mode,n.filter),s}))}return null}}]),e}(),B="glTF",z=1313821514,U=5130562,Z=O((function e(t){b(this,e),this.name=P.KHR_BINARY_GLTF,this.content=null,this.body=null;var r=new DataView(t,0,12);if(this.header={magic:u.B.decodeText(new Uint8Array(t.slice(0,4))),version:r.getUint32(4,!0),length:r.getUint32(8,!0)},this.header.magic!==B)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var n=this.header.length-12,a=new DataView(t,12),o=0;o<n;){var i=a.getUint32(o,!0);o+=4;var s=a.getUint32(o,!0);if(o+=4,s===z){var l=new Uint8Array(t,12+o,i);this.content=u.B.decodeText(l)}else if(s===U){var c=12+o;this.body=t.slice(c,c+i)}o+=i}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")})),W=function(){function e(t,r){if(b(this,e),!r)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=P.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=r,this.dracoLoader.preload()}return O(e,[{key:"decodePrimitive",value:function(e,t){var r=this.json,n=this.dracoLoader,a=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,i={},s={},l={};for(var c in o){var u=ue[c]||c.toLowerCase();i[u]=o[c]}for(var p in e.attributes){var d=ue[p]||p.toLowerCase();if(void 0!==o[p]){var f=r.accessors[e.attributes[p]],m=ie[f.componentType];l[d]=m,s[d]=!0===f.normalized}}return t.getDependency("bufferView",a).then((function(e){return new Promise((function(t){n.decodeDracoFile(e,(function(e){for(var r in e.attributes){var n=e.attributes[r],a=s[r];void 0!==a&&(n.normalized=a)}t(e)}),i,l)}))}))}}]),e}(),V=function(){function e(){b(this,e),this.name=P.KHR_TEXTURE_TRANSFORM}return O(e,[{key:"extendTexture",value:function(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}]),e}(),Y=function(e){j(r,e);var t=w(r);function r(e){var n;b(this,r),(n=t.call(this)).isGLTFSpecularGlossinessMaterial=!0;var a=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),o=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),i=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),l=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),c={specular:{value:(new u.h).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};return n._extraUniforms=c,n.onBeforeCompile=function(e){for(var t in c)e.uniforms[t]=c[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",a).replace("#include <metalnessmap_pars_fragment>",o).replace("#include <roughnessmap_fragment>",i).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",l)},Object.defineProperties(x(n),{specular:{get:function(){return c.specular.value},set:function(e){c.specular.value=e}},specularMap:{get:function(){return c.specularMap.value},set:function(e){c.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return c.glossiness.value},set:function(e){c.glossiness.value=e}},glossinessMap:{get:function(){return c.glossinessMap.value},set:function(e){c.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete n.metalness,delete n.roughness,delete n.metalnessMap,delete n.roughnessMap,n.setValues(e),n}return O(r,[{key:"copy",value:function(e){return g(C(r.prototype),"copy",this).call(this,e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}]),r}(u.I),J=function(){function e(){b(this,e),this.name=P.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}return O(e,[{key:"getMaterialType",value:function(){return Y}},{key:"extendParams",value:function(e,t,r){var n=t.extensions[this.name];e.color=new u.h(1,1,1),e.opacity=1;var a=[];if(Array.isArray(n.diffuseFactor)){var o=n.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(void 0!==n.diffuseTexture&&a.push(r.assignTexture(e,"map",n.diffuseTexture)),e.emissive=new u.h(0,0,0),e.glossiness=void 0!==n.glossinessFactor?n.glossinessFactor:1,e.specular=new u.h(1,1,1),Array.isArray(n.specularFactor)&&e.specular.fromArray(n.specularFactor),void 0!==n.specularGlossinessTexture){var i=n.specularGlossinessTexture;a.push(r.assignTexture(e,"glossinessMap",i)),a.push(r.assignTexture(e,"specularMap",i))}return Promise.all(a)}},{key:"createMaterial",value:function(e){var t=new Y(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=u.db,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}]),e}(),X=O((function e(){b(this,e),this.name=P.KHR_MESH_QUANTIZATION})),q=function(e){j(r,e);var t=w(r);function r(e,n,a,o){return b(this,r),t.call(this,e,n,a,o)}return O(r,[{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,r=this.sampleValues,n=this.valueSize,a=e*n*3+n,o=0;o!==n;o++)t[o]=r[a+o];return t}}]),r}(u.q);q.prototype.beforeStart_=q.prototype.copySampleValue_,q.prototype.afterEnd_=q.prototype.copySampleValue_,q.prototype.interpolate_=function(e,t,r,n){for(var a=this.resultBuffer,o=this.sampleValues,i=this.valueSize,s=2*i,l=3*i,c=n-t,u=(r-t)/c,p=u*u,d=p*u,f=e*l,m=f-l,y=-2*d+3*p,g=d-p,h=1-y,b=g-p+u,v=0;v!==i;v++){var O=o[m+v+i],j=o[m+v+s]*c,I=o[f+v+i],w=o[f+v]*c;a[v]=h*O+b*j+y*I+g*w}return a};var K=new u.V,Q=function(e){j(r,e);var t=w(r);function r(){return b(this,r),t.apply(this,arguments)}return O(r,[{key:"interpolate_",value:function(e,t,n,a){var o=g(C(r.prototype),"interpolate_",this).call(this,e,t,n,a);return K.fromArray(o).normalize().toArray(o),o}}]),r}(q),$=0,ee=1,te=2,re=3,ne=4,ae=5,oe=6,ie={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},se={9728:u.K,9729:u.x,9984:u.M,9985:u.z,9986:u.L,9987:u.y},le={33071:u.g,33648:u.J,10497:u.X},ce={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ue={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},pe={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},de={CUBICSPLINE:void 0,LINEAR:u.s,STEP:u.r},fe="OPAQUE",me="MASK",ye="BLEND";function ge(e,t,r){for(var n in r.extensions)void 0===e[n]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=r.extensions[n])}function he(e,t){void 0!==t.extras&&("object"===y(t.extras)?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function be(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var r=0,n=t.weights.length;r<n;r++)e.morphTargetInfluences[r]=t.weights[r];if(t.extras&&Array.isArray(t.extras.targetNames)){var a=t.extras.targetNames;if(e.morphTargetInfluences.length===a.length){e.morphTargetDictionary={};for(var o=0,i=a.length;o<i;o++)e.morphTargetDictionary[a[o]]=o}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function ve(e){for(var t="",r=Object.keys(e).sort(),n=0,a=r.length;n<a;n++)t+=r[n]+":"+e[r[n]]+";";return t}function Oe(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}var je=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(this,e),this.json=t,this.extensions={},this.plugins={},this.options=r,this.cache=new E,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},"undefined"!=typeof createImageBitmap&&!1===/Firefox|^((?!chrome|android).)*safari/i.test(navigator.userAgent)?this.textureLoader=new u.n(this.options.manager):this.textureLoader=new u.fb(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new u.k(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}return O(e,[{key:"setExtensions",value:function(e){this.extensions=e}},{key:"setPlugins",value:function(e){this.plugins=e}},{key:"parse",value:function(e,t){var r=this,n=this.json,a=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])})).then((function(t){var o={scene:t[0][n.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:n.asset,parser:r,userData:{}};ge(a,o,n),he(o,n),Promise.all(r._invokeAll((function(e){return e.afterRoot&&e.afterRoot(o)}))).then((function(){e(o)}))})).catch(t)}},{key:"_markDefs",value:function(){for(var e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[],n=0,a=t.length;n<a;n++)for(var o=t[n].joints,i=0,s=o.length;i<s;i++)e[o[i]].isBone=!0;for(var l=0,c=e.length;l<c;l++){var u=e[l];void 0!==u.mesh&&(this._addNodeRef(this.meshCache,u.mesh),void 0!==u.skin&&(r[u.mesh].isSkinnedMesh=!0)),void 0!==u.camera&&this._addNodeRef(this.cameraCache,u.camera)}}},{key:"_addNodeRef",value:function(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}},{key:"_getNodeRef",value:function(e,t,r){var n=this;if(e.refs[t]<=1)return r;var a=r.clone();return function e(t,r){var a=n.associations.get(t);null!=a&&n.associations.set(r,a);var o,i=d(t.children.entries());try{for(i.s();!(o=i.n()).done;){var s=p(o.value,2),l=s[0];e(s[1],r.children[l])}}catch(e){i.e(e)}finally{i.f()}}(r,a),a.name+="_instance_"+e.uses[t]++,a}},{key:"_invokeOne",value:function(e){var t=Object.values(this.plugins);t.push(this);for(var r=0;r<t.length;r++){var n=e(t[r]);if(n)return n}return null}},{key:"_invokeAll",value:function(e){var t=Object.values(this.plugins);t.unshift(this);for(var r=[],n=0;n<t.length;n++){var a=e(t[n]);a&&r.push(a)}return r}},{key:"getDependency",value:function(e,t){var r=e+":"+t,n=this.cache.get(r);if(!n){switch(e){case"scene":n=this.loadScene(t);break;case"node":n=this.loadNode(t);break;case"mesh":n=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":n=this.loadAccessor(t);break;case"bufferView":n=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":n=this.loadBuffer(t);break;case"material":n=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":n=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":n=this.loadSkin(t);break;case"animation":n=this.loadAnimation(t);break;case"camera":n=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(r,n)}return n}},{key:"getDependencies",value:function(e){var t=this.cache.get(e);if(!t){var r=this,n=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(n.map((function(t,n){return r.getDependency(e,n)}))),this.cache.add(e,t)}return t}},{key:"loadBuffer",value:function(e){var t=this.json.buffers[e],r=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[P.KHR_BINARY_GLTF].body);var n=this.options;return new Promise((function(e,a){r.load(u.B.resolveURL(t.uri,n.path),e,void 0,(function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}},{key:"loadBufferView",value:function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var r=t.byteLength||0,n=t.byteOffset||0;return e.slice(n,n+r)}))}},{key:"loadAccessor",value:function(e){var t=this,r=this.json,n=this.json.accessors[e];if(void 0===n.bufferView&&void 0===n.sparse)return Promise.resolve(null);var a=[];return void 0!==n.bufferView?a.push(this.getDependency("bufferView",n.bufferView)):a.push(null),void 0!==n.sparse&&(a.push(this.getDependency("bufferView",n.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",n.sparse.values.bufferView))),Promise.all(a).then((function(e){var a,o,i=e[0],s=ce[n.type],l=ie[n.componentType],c=l.BYTES_PER_ELEMENT,p=c*s,d=n.byteOffset||0,f=void 0!==n.bufferView?r.bufferViews[n.bufferView].byteStride:void 0,m=!0===n.normalized;if(f&&f!==p){var y=Math.floor(d/f),g="InterleavedBuffer:"+n.bufferView+":"+n.componentType+":"+y+":"+n.count,h=t.cache.get(g);h||(a=new l(i,y*f,n.count*f/c),h=new u.o(a,f/c),t.cache.add(g,h)),o=new u.p(h,s,d%f/c,m)}else a=null===i?new l(n.count*s):new l(i,d,n.count*s),o=new u.d(a,s,m);if(void 0!==n.sparse){var b=ce.SCALAR,v=ie[n.sparse.indices.componentType],O=n.sparse.indices.byteOffset||0,j=n.sparse.values.byteOffset||0,I=new v(e[1],O,n.sparse.count*b),w=new l(e[2],j,n.sparse.count*s);null!==i&&(o=new u.d(o.array.slice(),o.itemSize,o.normalized));for(var S=0,x=I.length;S<x;S++){var C=I[S];if(o.setX(C,w[S*s]),s>=2&&o.setY(C,w[S*s+1]),s>=3&&o.setZ(C,w[S*s+2]),s>=4&&o.setW(C,w[S*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse THREE.BufferAttribute.")}}return o}))}},{key:"loadTexture",value:function(e){var t=this.json,r=this.options,n=t.textures[e],a=t.images[n.source],o=this.textureLoader;if(a.uri){var i=r.manager.getHandler(a.uri);null!==i&&(o=i)}return this.loadTextureImage(e,a,o)}},{key:"loadTextureImage",value:function(e,t,r){var n=this,a=this.json,o=this.options,i=a.textures[e],s=(t.uri||t.bufferView)+":"+i.sampler;if(this.textureCache[s])return this.textureCache[s];var l=this.URL||this.webkitURL,c=t.uri||"",p=!1;if(void 0!==t.bufferView)c=n.getDependency("bufferView",t.bufferView).then((function(e){p=!0;var r=new Blob([e],{type:t.mimeType});return c=l.createObjectURL(r)}));else if(void 0===t.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");var d=Promise.resolve(c).then((function(e){return new Promise((function(t,n){var a=t;!0===r.isImageBitmapLoader&&(a=function(e){var r=new u.eb(e);r.needsUpdate=!0,t(r)}),r.load(u.B.resolveURL(e,o.path),a,void 0,n)}))})).then((function(t){!0===p&&l.revokeObjectURL(c),t.flipY=!1,i.name&&(t.name=i.name);var r=(a.samplers||{})[i.sampler]||{};return t.magFilter=se[r.magFilter]||u.x,t.minFilter=se[r.minFilter]||u.y,t.wrapS=le[r.wrapS]||u.X,t.wrapT=le[r.wrapT]||u.X,n.associations.set(t,{textures:e}),t})).catch((function(){return console.error("THREE.GLTFLoader: Couldn't load texture",c),null}));return this.textureCache[s]=d,d}},{key:"assignTexture",value:function(e,t,r){var n=this;return this.getDependency("texture",r.index).then((function(a){if(void 0===r.texCoord||0==r.texCoord||"aoMap"===t&&1==r.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+r.texCoord+" for texture "+t+" not yet supported."),n.extensions[P.KHR_TEXTURE_TRANSFORM]){var o=void 0!==r.extensions?r.extensions[P.KHR_TEXTURE_TRANSFORM]:void 0;if(o){var i=n.associations.get(a);a=n.extensions[P.KHR_TEXTURE_TRANSFORM].extendTexture(a,o),n.associations.set(a,i)}}return e[t]=a,a}))}},{key:"assignFinalMaterial",value:function(e){var t=e.geometry,r=e.material,n=void 0===t.attributes.tangent,a=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){var i="PointsMaterial:"+r.uuid,s=this.cache.get(i);s||(s=new u.T,u.C.prototype.copy.call(s,r),s.color.copy(r.color),s.map=r.map,s.sizeAttenuation=!1,this.cache.add(i,s)),r=s}else if(e.isLine){var l="LineBasicMaterial:"+r.uuid,c=this.cache.get(l);c||(c=new u.u,u.C.prototype.copy.call(c,r),c.color.copy(r.color),this.cache.add(l,c)),r=c}if(n||a||o){var p="ClonedMaterial:"+r.uuid+":";r.isGLTFSpecularGlossinessMaterial&&(p+="specular-glossiness:"),n&&(p+="derivative-tangents:"),a&&(p+="vertex-colors:"),o&&(p+="flat-shading:");var d=this.cache.get(p);d||(d=r.clone(),a&&(d.vertexColors=!0),o&&(d.flatShading=!0),n&&(d.normalScale&&(d.normalScale.y*=-1),d.clearcoatNormalScale&&(d.clearcoatNormalScale.y*=-1)),this.cache.add(p,d),this.associations.set(d,this.associations.get(r))),r=d}r.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=r}},{key:"getMaterialType",value:function(){return u.I}},{key:"loadMaterial",value:function(e){var t,r=this,n=this.json,a=this.extensions,o=n.materials[e],i={},s=o.extensions||{},l=[];if(s[P.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var c=a[P.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=c.getMaterialType(),l.push(c.extendParams(i,o,r))}else if(s[P.KHR_MATERIALS_UNLIT]){var p=a[P.KHR_MATERIALS_UNLIT];t=p.getMaterialType(),l.push(p.extendParams(i,o,r))}else{var d=o.pbrMetallicRoughness||{};if(i.color=new u.h(1,1,1),i.opacity=1,Array.isArray(d.baseColorFactor)){var f=d.baseColorFactor;i.color.fromArray(f),i.opacity=f[3]}void 0!==d.baseColorTexture&&l.push(r.assignTexture(i,"map",d.baseColorTexture)),i.metalness=void 0!==d.metallicFactor?d.metallicFactor:1,i.roughness=void 0!==d.roughnessFactor?d.roughnessFactor:1,void 0!==d.metallicRoughnessTexture&&(l.push(r.assignTexture(i,"metalnessMap",d.metallicRoughnessTexture)),l.push(r.assignTexture(i,"roughnessMap",d.metallicRoughnessTexture))),t=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),l.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,i)}))))}!0===o.doubleSided&&(i.side=u.j);var m=o.alphaMode||fe;if(m===ye?(i.transparent=!0,i.depthWrite=!1):(i.transparent=!1,m===me&&(i.alphaTest=void 0!==o.alphaCutoff?o.alphaCutoff:.5)),void 0!==o.normalTexture&&t!==u.G&&(l.push(r.assignTexture(i,"normalMap",o.normalTexture)),i.normalScale=new u.ib(1,1),void 0!==o.normalTexture.scale)){var y=o.normalTexture.scale;i.normalScale.set(y,y)}return void 0!==o.occlusionTexture&&t!==u.G&&(l.push(r.assignTexture(i,"aoMap",o.occlusionTexture)),void 0!==o.occlusionTexture.strength&&(i.aoMapIntensity=o.occlusionTexture.strength)),void 0!==o.emissiveFactor&&t!==u.G&&(i.emissive=(new u.h).fromArray(o.emissiveFactor)),void 0!==o.emissiveTexture&&t!==u.G&&l.push(r.assignTexture(i,"emissiveMap",o.emissiveTexture)),Promise.all(l).then((function(){var n;return n=t===Y?a[P.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(i):new t(i),o.name&&(n.name=o.name),n.map&&(n.map.encoding=u.mb),n.emissiveMap&&(n.emissiveMap.encoding=u.mb),he(n,o),r.associations.set(n,{materials:e}),o.extensions&&ge(a,n,o),n}))}},{key:"createUniqueName",value:function(e){for(var t=u.U.sanitizeNodeName(e||""),r=t,n=1;this.nodeNamesUsed[r];++n)r=t+"_"+n;return this.nodeNamesUsed[r]=!0,r}},{key:"loadGeometries",value:function(e){var t=this,r=this.extensions,n=this.primitiveCache;function a(e){return r[P.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(r){return we(r,e,t)}))}for(var o,i,s=[],l=0,c=e.length;l<c;l++){var p=e[l],d=(i=void 0,(i=(o=p).extensions&&o.extensions[P.KHR_DRACO_MESH_COMPRESSION])?"draco:"+i.bufferView+":"+i.indices+":"+ve(i.attributes):o.indices+":"+ve(o.attributes)+":"+o.mode),f=n[d];if(f)s.push(f.promise);else{var m=void 0;m=p.extensions&&p.extensions[P.KHR_DRACO_MESH_COMPRESSION]?a(p):we(new u.e,p,t),n[d]={primitive:p,promise:m},s.push(m)}}return Promise.all(s)}},{key:"loadMesh",value:function(e){for(var t,r=this,n=this.json,a=this.extensions,o=n.meshes[e],i=o.primitives,s=[],l=0,c=i.length;l<c;l++){var p=void 0===i[l].material?(void 0===(t=this.cache).DefaultMaterial&&(t.DefaultMaterial=new u.I({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:u.l})),t.DefaultMaterial):this.getDependency("material",i[l].material);s.push(p)}return s.push(r.loadGeometries(i)),Promise.all(s).then((function(t){for(var n=t.slice(0,t.length-1),s=t[t.length-1],l=[],c=0,p=s.length;c<p;c++){var d=s[c],f=i[c],m=void 0,y=n[c];if(f.mode===ne||f.mode===ae||f.mode===oe||void 0===f.mode)!0!==(m=!0===o.isSkinnedMesh?new u.ab(d,y):new u.F(d,y)).isSkinnedMesh||m.geometry.attributes.skinWeight.normalized||m.normalizeSkinWeights(),f.mode===ae?m.geometry=Se(m.geometry,u.hb):f.mode===oe&&(m.geometry=Se(m.geometry,u.gb));else if(f.mode===ee)m=new u.w(d,y);else if(f.mode===re)m=new u.t(d,y);else if(f.mode===te)m=new u.v(d,y);else{if(f.mode!==$)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+f.mode);m=new u.S(d,y)}Object.keys(m.geometry.morphAttributes).length>0&&be(m,o),m.name=r.createUniqueName(o.name||"mesh_"+e),he(m,o),f.extensions&&ge(a,m,f),r.assignFinalMaterial(m),l.push(m)}for(var g=0,h=l.length;g<h;g++)r.associations.set(l[g],{meshes:e,primitives:g});if(1===l.length)return l[0];var b=new u.m;r.associations.set(b,{meshes:e});for(var v=0,O=l.length;v<O;v++)b.add(l[v]);return b}))}},{key:"loadCamera",value:function(e){var t,r=this.json.cameras[e],n=r[r.type];if(n)return"perspective"===r.type?t=new u.Q(u.D.radToDeg(n.yfov),n.aspectRatio||1,n.znear||1,n.zfar||2e6):"orthographic"===r.type&&(t=new u.P(-n.xmag,n.xmag,n.ymag,-n.ymag,n.znear,n.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),he(t,r),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}},{key:"loadSkin",value:function(e){var t=this.json.skins[e],r={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(r):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return r.inverseBindMatrices=e,r}))}},{key:"loadAnimation",value:function(e){for(var t=this.json.animations[e],r=[],n=[],a=[],o=[],i=[],s=0,l=t.channels.length;s<l;s++){var c=t.channels[s],p=t.samplers[c.sampler],d=c.target,f=void 0!==d.node?d.node:d.id,m=void 0!==t.parameters?t.parameters[p.input]:p.input,y=void 0!==t.parameters?t.parameters[p.output]:p.output;r.push(this.getDependency("node",f)),n.push(this.getDependency("accessor",m)),a.push(this.getDependency("accessor",y)),o.push(p),i.push(d)}return Promise.all([Promise.all(r),Promise.all(n),Promise.all(a),Promise.all(o),Promise.all(i)]).then((function(r){for(var n=r[0],a=r[1],o=r[2],i=r[3],s=r[4],l=[],c=function(e,t){var r=n[e],c=a[e],p=o[e],d=i[e],f=s[e];if(void 0===r)return"continue";r.updateMatrix(),r.matrixAutoUpdate=!0;var m=void 0;switch(pe[f.path]){case pe.weights:m=u.N;break;case pe.rotation:m=u.W;break;case pe.position:case pe.scale:default:m=u.kb}var y=r.name?r.name:r.uuid,g=void 0!==d.interpolation?de[d.interpolation]:u.s,h=[];pe[f.path]===pe.weights?r.traverse((function(e){e.morphTargetInfluences&&h.push(e.name?e.name:e.uuid)})):h.push(y);var b=p.array;if(p.normalized){for(var v=Oe(b.constructor),O=new Float32Array(b.length),j=0,I=b.length;j<I;j++)O[j]=b[j]*v;b=O}for(var w=0,S=h.length;w<S;w++){var x=new m(h[w]+"."+pe[f.path],c.array,b,g);"CUBICSPLINE"===d.interpolation&&(x.createInterpolant=function(e){return new(this instanceof u.W?Q:q)(this.times,this.values,this.getValueSize()/3,e)},x.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(x)}},p=0,d=n.length;p<d;p++)c(p);var f=t.name?t.name:"animation_"+e;return new u.a(f,void 0,l)}))}},{key:"createNodeMesh",value:function(e){var t=this.json,r=this,n=t.nodes[e];return void 0===n.mesh?null:r.getDependency("mesh",n.mesh).then((function(e){var t=r._getNodeRef(r.meshCache,n.mesh,e);return void 0!==n.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,r=n.weights.length;t<r;t++)e.morphTargetInfluences[t]=n.weights[t]})),t}))}},{key:"loadNode",value:function(e){var t,r,n=this.json,a=this.extensions,o=this,i=n.nodes[e],s=i.name?o.createUniqueName(i.name):"";return(t=[],r=o._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)})),r&&t.push(r),void 0!==i.camera&&t.push(o.getDependency("camera",i.camera).then((function(e){return o._getNodeRef(o.cameraCache,i.camera,e)}))),o._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)).then((function(t){var r;if((r=!0===i.isBone?new u.b:t.length>1?new u.m:1===t.length?t[0]:new u.O)!==t[0])for(var n=0,l=t.length;n<l;n++)r.add(t[n]);if(i.name&&(r.userData.name=i.name,r.name=s),he(r,i),i.extensions&&ge(a,r,i),void 0!==i.matrix){var c=new u.E;c.fromArray(i.matrix),r.applyMatrix4(c)}else void 0!==i.translation&&r.position.fromArray(i.translation),void 0!==i.rotation&&r.quaternion.fromArray(i.rotation),void 0!==i.scale&&r.scale.fromArray(i.scale);return o.associations.has(r)||o.associations.set(r,{}),o.associations.get(r).nodes=e,r}))}},{key:"loadScene",value:function(e){var t=this.json,r=this.extensions,n=this.json.scenes[e],a=this,o=new u.m;n.name&&(o.name=a.createUniqueName(n.name)),he(o,n),n.extensions&&ge(r,o,n);for(var i=n.nodes||[],s=[],l=0,c=i.length;l<c;l++)s.push(Ie(i[l],o,t,a));return Promise.all(s).then((function(){return a.associations=function(e){var t,r=new Map,n=d(a.associations);try{for(n.s();!(t=n.n()).done;){var o=p(t.value,2),i=o[0],s=o[1];(i instanceof u.C||i instanceof u.eb)&&r.set(i,s)}}catch(e){n.e(e)}finally{n.f()}return e.traverse((function(e){var t=a.associations.get(e);null!=t&&r.set(e,t)})),r}(o),o}))}}]),e}();function Ie(e,t,r,n){var a=r.nodes[e];return n.getDependency("node",e).then((function(e){return void 0===a.skin?e:n.getDependency("skin",a.skin).then((function(e){for(var r=[],a=0,o=(t=e).joints.length;a<o;a++)r.push(n.getDependency("node",t.joints[a]));return Promise.all(r)})).then((function(r){return e.traverse((function(e){if(e.isMesh){for(var n=[],a=[],o=0,i=r.length;o<i;o++){var s=r[o];if(s){n.push(s);var l=new u.E;void 0!==t.inverseBindMatrices&&l.fromArray(t.inverseBindMatrices.array,16*o),a.push(l)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[o])}e.bind(new u.Z(n,a),e.matrixWorld)}})),e}));var t})).then((function(e){t.add(e);var o=[];if(a.children)for(var i=a.children,s=0,l=i.length;s<l;s++){var c=i[s];o.push(Ie(c,e,r,n))}return Promise.all(o)}))}function we(e,t,r){var n=t.attributes,a=[];function o(t,n){return r.getDependency("accessor",t).then((function(t){e.setAttribute(n,t)}))}for(var i in n){var s=ue[i]||i.toLowerCase();s in e.attributes||a.push(o(n[i],s))}if(void 0!==t.indices&&!e.index){var l=r.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));a.push(l)}return he(e,t),function(e,t,r){var n=t.attributes,a=new u.c;if(void 0!==n.POSITION){var o=r.json.accessors[n.POSITION],i=o.min,s=o.max;if(void 0!==i&&void 0!==s){if(a.set(new u.jb(i[0],i[1],i[2]),new u.jb(s[0],s[1],s[2])),o.normalized){var l=Oe(ie[o.componentType]);a.min.multiplyScalar(l),a.max.multiplyScalar(l)}var c=t.targets;if(void 0!==c){for(var p=new u.jb,d=new u.jb,f=0,m=c.length;f<m;f++){var y=c[f];if(void 0!==y.POSITION){var g=r.json.accessors[y.POSITION],h=g.min,b=g.max;if(void 0!==h&&void 0!==b){if(d.setX(Math.max(Math.abs(h[0]),Math.abs(b[0]))),d.setY(Math.max(Math.abs(h[1]),Math.abs(b[1]))),d.setZ(Math.max(Math.abs(h[2]),Math.abs(b[2]))),g.normalized){var v=Oe(ie[g.componentType]);d.multiplyScalar(v)}p.max(d)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}a.expandByVector(p)}e.boundingBox=a;var O=new u.bb;a.getCenter(O.center),O.radius=a.min.distanceTo(a.max)/2,e.boundingSphere=O}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(e,t,r),Promise.all(a).then((function(){return void 0!==t.targets?function(e,t,r){for(var n=!1,a=!1,o=0,i=t.length;o<i;o++){var s=t[o];if(void 0!==s.POSITION&&(n=!0),void 0!==s.NORMAL&&(a=!0),n&&a)break}if(!n&&!a)return Promise.resolve(e);for(var l=[],c=[],u=0,p=t.length;u<p;u++){var d=t[u];if(n){var f=void 0!==d.POSITION?r.getDependency("accessor",d.POSITION):e.attributes.position;l.push(f)}if(a){var m=void 0!==d.NORMAL?r.getDependency("accessor",d.NORMAL):e.attributes.normal;c.push(m)}}return Promise.all([Promise.all(l),Promise.all(c)]).then((function(t){var r=t[0],o=t[1];return n&&(e.morphAttributes.position=r),a&&(e.morphAttributes.normal=o),e.morphTargetsRelative=!0,e}))}(e,t.targets,r):e}))}function Se(e,t){var r=e.getIndex();if(null===r){var n=[],a=e.getAttribute("position");if(void 0===a)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var o=0;o<a.count;o++)n.push(o);e.setIndex(n),r=e.getIndex()}var i=r.count-2,s=[];if(t===u.gb)for(var l=1;l<=i;l++)s.push(r.getX(0)),s.push(r.getX(l)),s.push(r.getX(l+1));else for(var c=0;c<i;c++)c%2==0?(s.push(r.getX(c)),s.push(r.getX(c+1)),s.push(r.getX(c+2))):(s.push(r.getX(c+2)),s.push(r.getX(c+1)),s.push(r.getX(c)));s.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var p=e.clone();return p.setIndex(s),p}var xe=M,Ce=r(3),Me=r.n(Ce);function Ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Pe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ae=function(e){var t=Object(n.useContext)(i.b),r=Ee(Object(n.useState)(!0),2),o=r[0],l=r[1],p=Object(n.useRef)(!0),d=Object(n.useRef)(!1),f=Object(n.useRef)(null),m=Object(n.useRef)(e.init),y=function(){f.current&&f.current.style&&(f.current.getLayer("3d-model")&&f.current.removeLayer("3d-model"),f.current=null)};return Object(n.useEffect)((function(){return"function"==typeof m.current&&m.current(),y}),[]),Object(n.useEffect)((function(){if(t.mapExists(e.mapId)&&!d.current){d.current=!0,f.current=t.getMap(e.mapId),f.current.setCenter([7.099771581806502,50.73395746209983]),f.current.setZoom(15),f.current.setPitch(45);var r=[Math.PI/2,90,0],n=c.a.MercatorCoordinate.fromLngLat([7.099771581806502,50.73395746209983],0),a={translateX:n.x+8e-7,translateY:n.y+18e-7,translateZ:n.z,rotateX:r[0],rotateY:r[1],rotateZ:r[2],scale:n.meterInMercatorCoordinateUnits()+3e-8},o={id:"3d-model",type:"custom",renderingMode:"3d",onAdd:function(t,r){this.camera=new u.f,this.scene=new u.Y;var n=new u.i(16777215);n.position.set(0,-70,100).normalize(),this.scene.add(n);var a=new u.i(16777215);a.position.set(0,70,100).normalize(),this.scene.add(a),(new xe).load("assets/3D/godzilla_simple.glb",function(t){this.scene.add(t.scene),"function"==typeof e.onDone&&e.onDone()}.bind(this)),this.map=t,this.renderer=new u.lb({canvas:t.getCanvas(),context:r,antialias:!0}),this.renderer.autoClear=!1},render:function(e,t){var r=(new u.E).makeRotationAxis(new u.jb(1,0,0),a.rotateX),n=(new u.E).makeRotationAxis(new u.jb(0,1,0),a.rotateY),o=(new u.E).makeRotationAxis(new u.jb(0,0,1),a.rotateZ),i=(new u.E).fromArray(t),s=(new u.E).makeTranslation(a.translateX,a.translateY,a.translateZ).scale(new u.jb(a.scale,-a.scale,a.scale)).multiply(r).multiply(n).multiply(o);this.camera.projectionMatrix=i.multiply(s),this.renderer.resetState(),this.renderer.render(this.scene,this.camera),this.map.triggerRepaint()}};f.current.addLayer(o),f.current.getLayer("3d-model")&&f.current.setLayoutProperty("3d-model","visibility","visible")}}),[t.mapIds,t,e]),Object(n.useEffect)((function(){f.current&&f.current.getLayer("3d-model")&&(o?f.current.setLayoutProperty("3d-model","visibility","visible"):f.current.setLayoutProperty("3d-model","visibility","none"))}),[o,t]),a.a.createElement(a.a.Fragment,null,a.a.createElement(s.a,{color:"primary",variant:o?"contained":"outlined",onClick:function(){l(!o),p.current=!o}},"3D"))};Ae.propTypes={mapId:Me.a.string,init:Me.a.func,onDone:Me.a.func};var Le=Ae,Te=r(20);var Re=a.a.createContext({});Re.Provider;function ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Me.a.node.isRequired;var He={title:"MapComponents/MlThreeJsLayer",component:Le,argTypes:{options:{control:{type:"object"}}},decorators:Te.a},Ge=(t.default=He,function(e){var t=Object(n.useContext)(Re);return a.a.createElement(o.a,null,a.a.createElement(Le,{init:function(){var e;return null==t||null===(e=t.setControlled)||void 0===e?void 0:e.call(t,!0)},onDone:function(){return setTimeout((function(){var e;return null==t||null===(e=t.setLoadingDone)||void 0===e?void 0:e.call(t,!0)}),1200)}}))}.bind({}));Ge.parameters={},Ge.parameters=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(r),!0).forEach((function(t){_e(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({storySource:{source:"(args) => {\n  const loadingOverlayContext = useContext(LoadingOverlayContext);\n\n  return (\n    <TopToolbar>\n      <MlThreeJsLayer\n        init={() => loadingOverlayContext?.setControlled?.(true)}\n        onDone={() =>\n          setTimeout(() => loadingOverlayContext?.setLoadingDone?.(true), 1200)\n        }\n      />\n    </TopToolbar>\n  );\n}"}},Ge.parameters)},999:function(e,t,r){"use strict";r.r(t),r.d(t,"Linestring",(function(){return A}));var n=r(0),a=r.n(n),o=r(52),i=r(30);function s(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=function(e,t,r,n,a,i,l,c,p,d){var f=[],m=[],y=[],g=[];t.current=[];var h=a.current||{geometry:{type:"LineString",coordinates:[]},properties:{},type:"Feature"},b=e.geojson,v=b,O=h,j=!1;if(void 0===v.geometry&&void 0!==O.geometry&&O.geometry.coordinates.length>1)v=o.lineString(O.geometry.coordinates.slice(0,2));else if(void 0===O.geometry&&void 0!==v.geometry&&v.geometry.coordinates.length>1)O=o.lineString(v.geometry.coordinates.slice(0,2));else if(void 0===O.geometry&&void 0===v.geometry)return;if(v.geometry.coordinates.length<O.geometry.coordinates.length&&(v=h,O=b,j=!0),v&&O)for(var I=0,w=v.geometry.coordinates.length;I<w;I++)void 0!==O.geometry.coordinates[I]&&v.geometry.coordinates[I][0]===O.geometry.coordinates[I][0]&&v.geometry.coordinates[I][1]===O.geometry.coordinates[I][1]?t.current.push(v.geometry.coordinates[I]):(void 0!==v.geometry.coordinates[I]&&m.push(v.geometry.coordinates[I]),void 0!==O.geometry.coordinates[I]&&f.push(O.geometry.coordinates[I]));if(j?(y=f,g=m):(y=m,g=f),!(y.length<2&&g<2)){var S,x=e.transitionTime/i,C=g.length>1?Math.round(o.length(o.lineString(g))):0,M=y.length>1?Math.round(o.length(o.lineString(y))):0,E=M+C,P=C/E,A=Math.round(x*P),L=Math.round(C/A*100)/100,T=M/E,R=Math.round(x*T),k=Math.round(M/R*100)/100;C<=0&&.1,(S=s(u(g,L,A))).reverse(),(S=[].concat(s(S),s(u(y,k,R)))).push(b),r.current=S,l.current=1,n.current=!0,p.current=setTimeout((function(){return function e(t,r,n,a,i,l,c,u,p){var d=arguments;if(void 0!==a.current[l.current]){var f=l.current+1===a.current.length?t.geojson:o.lineString([].concat(s(i.current),s(a.current[l.current].geometry.coordinates)));p(f),"function"==typeof t.onTransitionFrame&&t.onTransitionFrame(f),l.current++,n.current&&l.current<a.current.length?u.current=setTimeout((function(){return e.apply(void 0,s(d))}),c):("function"==typeof t.onTransitionEnd&&t.onTransitionEnd(t.geojson),n.current=!1)}}(e,c,n,r,t,l,i,p,d)}),i)}},u=function(e,t,r){var n=[];if(e.length>1)for(var a=o.lineChunk(o.lineString(e),t),i=a.features[0],l=0;l<r&&(n.push(i),void 0!==a.features[l]);l++)i=o.lineString([].concat(s(i.geometry.coordinates),s(a.features[l].geometry.coordinates)));return n},p=r(69),d=["geojson"];function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var h=function(e){e.geojson;var t=g(e,d),r=Object(i.a)({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),s=Object(n.useRef)(!1),l=Object(n.useRef)(),u=Object(n.useRef)(!1),y=Object(n.useRef)(void 0),h=Object(n.useRef)(!1),b=Object(n.useRef)([]),v=Object(n.useRef)([]),O=m(Object(n.useState)(o.featureCollection([])),2),j=O[0],I=O[1];Object(n.useEffect)((function(){return function(){y.current&&clearTimeout(y.current)}}),[]);var w=Object(n.useCallback)((function(){c(e,v,b,u,l,50,h,r.map,y,I)}),[e,r.map]);Object(n.useEffect)((function(){r.map&&s.current&&(void 0!==e.transitionTime&&"line"===e.type&&l.current&&(u.current=!1,h.current=!1,b.current=[],v.current=[],w()),l.current=e.geojson)}),[r.map,w,e]);var S=Object(n.useCallback)((function(){"line"===e.type&&void 0!==e.transitionTime&&e.transitionTime&&void 0!==e.geojson&&JSON.stringify(l.current)!==JSON.stringify(e.geojson)&&(w(),l.current=e.geojson)}),[e,w]);return Object(n.useEffect)((function(){r.mapIsReady&&e.geojson&&(s.current=!0,S())}),[r.mapIsReady,S,e]),a.a.createElement(a.a.Fragment,null,a.a.createElement(p.a,f({},t,{geojson:j})))},b=h;try{h.displayName="MlTransitionGeoJsonLayer",h.__docgenInfo={description:'Adds source and layer of types "line", "fill" or "circle" to display GeoJSON data on the map.',displayName:"MlTransitionGeoJsonLayer",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!0,type:{name:"string"}},type:{defaultValue:null,description:'Type of the layer that will be added to the MapLibre instance.\nPossible values: "line", "circle", "fill"',name:"type",required:!0,type:{name:"string"}},layout:{defaultValue:null,description:"Layout property object, that is passed to the addLayer call.\nPossible props depend on the layer type.\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#line\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#circle\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill",name:"layout",required:!0,type:{name:"any"}},paint:{defaultValue:null,description:"Paint property object, that is passed to the addLayer call.\nPossible props depend on the layer type.\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#line\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#circle\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill",name:"paint",required:!0,type:{name:"any"}},defaultPaintOverrides:{defaultValue:null,description:'Javascript object with optional properties "fill", "line", "circle" to override implicit layer type default paint properties.',name:"defaultPaintOverrides",required:!0,type:{name:"any"}},options:{defaultValue:null,description:"Javascript object that is spread into the addLayer commands first parameter.",name:"options",required:!0,type:{name:"any"}},geojson:{defaultValue:null,description:"GeoJSON data that is supposed to be rendered by this component.",name:"geojson",required:!0,type:{name:"Feature<Geometry | GeometryCollection, Properties> | FeatureCollection<Geometry | GeometryCollection, Properties>"}},insertBeforeLayer:{defaultValue:null,description:'Id of an existing layer in the mapLibre instance to help specify the layer order\nThis layer will be visually beneath the layer with the "insertBeforeLayer" id.',name:"insertBeforeLayer",required:!0,type:{name:"string"}},onClick:{defaultValue:null,description:"Click event handler that is executed whenever a geometry rendered by this component is clicked.",name:"onClick",required:!0,type:{name:"Function"}},onHover:{defaultValue:null,description:"Hover event handler that is executed whenever a geometry rendered by this component is hovered.",name:"onHover",required:!0,type:{name:"Function"}},onLeave:{defaultValue:null,description:"Leave event handler that is executed whenever a geometry rendered by this component is\nleft/unhovered.",name:"onLeave",required:!0,type:{name:"Function"}},transitionTime:{defaultValue:null,description:'Creates transition animation whenever the geojson prop changes.\nOnly works with layer type "line" and LineString GeoJSON data.',name:"transitionTime",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlTransitionGeoJsonLayer/MlTransitionGeoJsonLayer.tsx#MlTransitionGeoJsonLayer"]={docgenInfo:h.__docgenInfo,name:"MlTransitionGeoJsonLayer",path:"src/components/MlTransitionGeoJsonLayer/MlTransitionGeoJsonLayer.tsx#MlTransitionGeoJsonLayer"})}catch(e){}var v=r(20),O=r(34),j=r(567),I=r(568),w=r(569);function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}console.log(w);var P={title:"MapComponents/MlTransitionGeoJsonLayer",component:b,argTypes:{url:{},layer:{}},decorators:v.a},A=(t.default=P,function(e){var t=Object(n.useContext)(O.b),r=M(Object(n.useState)(j),2),o=r[0],i=r[1],s=Object(n.useRef)(!1);return Object(n.useEffect)((function(){t.getMap()&&!s.current&&(s.current=!0,t.getMap().setCenter({lng:7.137609868988648,lat:50.74746799549129}),t.getMap().setZoom(9.5),setTimeout((function(){i(I)}),4e3))}),[o,t]),a.a.createElement(a.a.Fragment,null,a.a.createElement(b,C({type:"line",geojson:o,transitionTime:2e3},e)))}.bind({}));A.parameters={},A.args={paint:{"line-color":"red","line-width":4}},A.parameters=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({storySource:{source:'(props) => {\n  const mapContext = useContext(MapContext);\n  const [geojson, setGeojson] = useState(sample_geojson_1);\n  const initializedRef = useRef(false);\n\n  useEffect(() => {\n    if (!mapContext.getMap() || initializedRef.current) return;\n\n    initializedRef.current = true;\n    mapContext.getMap().setCenter({ lng: 7.137609868988648, lat: 50.74746799549129 });\n    mapContext.getMap().setZoom(9.5);\n\n    setTimeout(() => {\n      setGeojson(sample_geojson_2);\n    }, 4000);\n  }, [geojson, mapContext]);\n\n  return (\n    <>\n      <MlTransitionGeoJsonLayer type="line" geojson={geojson} transitionTime={2000} {...props} />\n    </>\n  );\n}'}},A.parameters)}});
//# sourceMappingURL=main~24120820.6c66c56c.iframe.bundle.js.map